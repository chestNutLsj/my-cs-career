## 16.2　数组是第一级对象

无论使用哪种类型的数组，数组标识符其实只是一个引用，指向在堆中创建的一个真实对象，这个（数组）对象用以保存指向其他对象的引用。可以作为数组初始化语法的一部分隐式地创建此对象，或者用new表达式显式地创建。只读成员length是数组对象的一部分（事实上，这是唯一一个可以访问的字段或方法），表示此数组对象可以存储多少元素。“[]”语法是访问数组对象唯一的方式。

下例总结了初始化数组的各种方式，以及如何对指向数组的引用赋值，使之指向另一个数组对象。此例也说明，对象数组和基本类型数组在使用上几乎是相同的；唯一的区别就是对象数组保存的是引用，基本类型数组直接保存基本类型的值。

![467-2](../Images/image03328.jpeg)

![468-1](../Images/image03329.jpeg)

数组a是一个尚未初始化的局部变量，在你对它正确地初始化之前，编译器不允许用此引用做任何事情。数组b初始化为指向一个BerylliumSphere引用的数组，但其实并没有BerylliumSphere对象置入数组中。然而，仍然可以询问数组的大小，因为b指向一个合法的对象。这样做有一个小缺点：你无法知道在此数组中确切地有多少元素，因为length只表示数组能够容纳多少元素。也就是说，length是数组的大小，而不是实际保存的元素个数。新生成一个数组对象时，其中所有的引用被自动初始化为null；所以检查其中的引用是否为null，即可知道数组的某个位置是否存有对象。同样，基本类型的数组如果是数值型的，就被自动初始化为0；如果是字符型（char）的，就被自动初始化为（char）O；如果是布尔型（boolean），就被自动初始化为false。

数组c表明，数组对象在创建之后，随即将数组的各个位置都赋值为BerylliumSphere对象。数组d表明使用“聚集初始化”语法创建数组对象（隐式地使用new在堆中创建，就像数组c一样），并且以BerylliumSphere对象将其初始化的过程，这些操作只用了一条语句。

下一个数组初始化可以看作是“动态的聚集初始化”。数组d采用的聚集初始化操作必须在定义d的位置使用，但若使用第二种语法，可以在任意位置创建和初始化数组对象。例如，假设方法hide()需要一个BerylliumSphere对象的数组作为输入参数。可以如下调用：

![469-1](../Images/image03330.jpeg)

但也可以动态地创建将要作为参数传递的数组：

![469-2](../Images/image03331.jpeg)

在许多情况下，此语法使得代码书写变得更方便了。

表达式：

![469-3](../Images/image03332.jpeg)

说明如何将指向某个数组对象的引用赋给另一个数组对象，这与其他类型的对象引用没什么区别。现在a与d都指向堆中的同一个数组对象。

ArraySize.java的第二部分说明，基本类型数组的工作方式与对象数组一样，不过基本类型的数组直接存储基本类型数据的值。

练习1：（2）创建一个受BerylliumSphere数组作为参数的方法，并动态地创建参数去调用这个方法。证明在本例中普通的聚集数组初始化不能奏效。去发现总结在哪些情况下，普通的聚集初始化可以起作用，而又在哪些情况下，动态聚集初始化显得多余。