### 15.4.6　一个Set实用工具

作为泛型方法的另一个示例，我们看看如何用Set来表达数学中的关系式。通过使用泛型方法，可以很方便地做到这一点，而且可以应用于多种类型：

![400-1](../Images/image03204.jpeg)

在前三个方法中，都将第一个参数Set复制了一份，将Set中的所有引用都存入一个新的HashSet对象中，因此，我们并未直接修改参数中的Set。返回的值是一个全新的Set对象。

这四个方法表达了如下的数学集合操作：union()返回一个Set，它将两个参数合并在一起；intersection()返回的Set只包含两个参数共有的部分；difference()方法从superset中移除subset包含的元素；complement()返回的Set包含除了交集之外的所有元素。下面提供了一个enum，它包含各种水彩画的颜色。我们将用它来演示以上这些方法的功能和效果。

![400-2](../Images/image03205.jpeg)

为了方便起见（可以直接使用enum中的元素名），下面的示例以static的方式引入Watercolors。这个示例使用了EnumSet，这是Java SE5中的新工具，用来从enum直接创建Set。（在第19章中，我们会详细介绍EnumSet。）在这里，我们向static方法EnumSet.range()传入某个范围的第一个元素与最后一个元素，然后它将返回一个Set，其中包含该范围内的所有元素：

![401-1](../Images/image03206.jpeg)

我们可以从输出中看到各种关系运算的结果。

下面的示例使用Sets.difference()打印出java.util包中各种Collection类与Map类之间的方法差异：

![401-2](../Images/image03207.jpeg)

![402-1](../Images/image03208.jpeg)

在第11章的“总结”中，我们使用了这个程序的输出结果。

练习17：（4）研究JDK文档中有关EnumSet的部分，你会看到它定义了clone()方法。然而，在Sets.java中，你却不能复制Set接口中的引用。请试着修改Sets.java，使其不但能接受一般的Set接口，而且能直接接受EnumSet，并使用clone()而不是创建新的HashSet对象。