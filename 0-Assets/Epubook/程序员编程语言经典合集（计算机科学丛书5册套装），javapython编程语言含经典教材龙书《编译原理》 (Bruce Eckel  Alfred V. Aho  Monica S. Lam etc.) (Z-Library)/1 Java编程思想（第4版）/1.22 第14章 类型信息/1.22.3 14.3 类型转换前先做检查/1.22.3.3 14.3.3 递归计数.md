### 14.3.3　递归计数

在PetCount3.PetCounter中的Map预加载了所有不同的Pet类。与预加载映射表不同的是，我们可以使用Class.isAssignableFrom()，并创建一个不局限于对Pet计数的通用工具。

![363-1](../Images/image03143.jpeg)

count()方法获取其参数的Class，然后使用isAssignableFrom()来执行运行时的检查，以校验你传递的对象确实属于我们感兴趣的继承结构。countClass()首先对该类的确切类型计数，然后，如果其超类可以赋值给baseType，countClass()将其超类上递归计数。

![363-2](../Images/image03144.jpeg)

正如在输出中看到的那样，对基类型和确切类型都进行了计数。

练习11：（2）在typeinfo.pets类库中添加Gerbil，并修改本章中的所有示例，让它们适应这个新类。

练习12：（3）将第15章中的CoffeeGenerator.java类用于TypeCounter。

练习13：（3）将本章中的RegisteredFactories.java示例用于TypeCounter。