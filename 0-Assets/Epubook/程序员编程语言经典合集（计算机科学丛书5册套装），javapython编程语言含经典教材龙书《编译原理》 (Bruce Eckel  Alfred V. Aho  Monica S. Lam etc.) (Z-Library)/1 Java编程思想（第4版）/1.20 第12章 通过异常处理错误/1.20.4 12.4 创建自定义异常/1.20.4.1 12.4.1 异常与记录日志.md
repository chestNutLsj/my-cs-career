### 12.4.1　异常与记录日志

你可能还想使用java.util.logging工具将输出记录到日志中。尽管记录日志的全部细节是在http://MindView.net/Books/BetterJava的补充材料中介绍的，但是这里所使用的基本的日志记录功能还是相当简单易懂的：

![286-2](../Images/image03008.jpeg)

![287-1](../Images/image03009.jpeg)

静态的Logger.getLogger()方法创建了一个String参数相关联的Logger对象（通常与错误相关的包名和类名），这个Logger对象会将其输出发送到System.err。向Logger写入的最简单方式就是直接调用与日志记录消息的级别相关联的方法，这里使用的是severe()。为了产生日志记录消息，我们欲获取异常抛出处的栈轨迹，但是printStackTrace()不会默认地产生字符串。为了获取字符串，我们需要使用重载的printStackTrace()方法，它接受一个java.io.PrintWriter对象作为参数（这些都将在第18章中详细解释）。如果我们将一个java.io.StringWriter对象传递给这个PrintWriter的构造器，那么通过调用toString()方法，就可以将输出抽取为一个String。

尽管由于LoggingException将所有记录日志的基础设施都构建在异常自身中，使得它所使用的方式非常方便，并因此不需要客户端程序员的干预就可以自动运行，但是更常见的情形是我们需要捕获和记录其他人编写的异常，因此我们必须在异常处理程序中生成日志消息：

![287-2](../Images/image03010.jpeg)

还可以更进一步自定义异常，比如加入额外的构造器和成员：

![287-3](../Images/image03011.jpeg)

![288-1](../Images/image03012.jpeg)

新的异常添加了字段x以及设定x值的构造器和读取数据的方法。此外，还覆盖了Throwable.getMessage()方法，以产生更详细的信息。对于异常类来说，getMessage()方法有点类似于toString()方法。

既然异常也是对象的一种，所以可以继续修改这个异常类，以得到更强的功能。但要记住，使用程序包的客户端程序员可能仅仅只是查看一下抛出的异常类型，其他的就不管了（大多数Java库里的异常都是这么用的），所以对异常所添加的其他功能也许根本用不上。

练习6：（1）创建两个异常类，每一个都自动记录它们自己的日志，演示它们都可以正常运行。

练习7：（1）修改练习3，使得catch子句可以将结果作为日志记录。