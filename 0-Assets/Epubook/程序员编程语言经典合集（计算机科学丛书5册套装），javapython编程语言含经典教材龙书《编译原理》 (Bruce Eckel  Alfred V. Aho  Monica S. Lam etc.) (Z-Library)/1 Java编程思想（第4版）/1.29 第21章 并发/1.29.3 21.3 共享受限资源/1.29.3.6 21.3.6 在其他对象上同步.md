### 21.3.6　在其他对象上同步

synchronized块必须给定一个在其上进行同步的对象，并且最合理的方式是，使用其方法正在被调用的当前对象：synchronized（this），这正是PairManager2所使用的方式。在这种方式中，如果获得了synchronized块上的锁，那么该对象其他的synchronized方法和临界区就不能被调用了。因此，如果在this上同步，临界区的效果就会直接缩小在同步的范围内。

有时必须在另一个对象上同步，但是如果你要这么做，就必须确保所有相关的任务都是在同一个对象上同步的。下面的示例演示了两个任务可以同时进入同一个对象，只要这个对象上的方法是在不同的锁上同步的即可：

![722-2](../Images/image03711.jpeg)

![723-1](../Images/image03712.jpeg)

DualSync.f()（通过同步整个方法）在this同步，而g()有一个在syncObject上同步的synchronized块。因此，这两个同步是互相独立的。通过在main()中创建调用f()的Thread对这一点进行了演示，因为main()线程是被用来调用g()的。从输出中可以看到，这两个方式在同时运行，因此任何一个方法都没有因为对另一个方法的同步而被阻塞。

练习15：（1）创建一个类，它具有三个方法，这些方法包含一个临界区，所有对该临界区的同步都是在同一个对象上的。创建多个任务来演示这些方法同时只能运行一个。现在修改这些方法，使得每个方法都在不同的对象上同步，并展示所有三个方法可以同时运行。

练习16：（1）使用显式的Lock对象来修改练习15。