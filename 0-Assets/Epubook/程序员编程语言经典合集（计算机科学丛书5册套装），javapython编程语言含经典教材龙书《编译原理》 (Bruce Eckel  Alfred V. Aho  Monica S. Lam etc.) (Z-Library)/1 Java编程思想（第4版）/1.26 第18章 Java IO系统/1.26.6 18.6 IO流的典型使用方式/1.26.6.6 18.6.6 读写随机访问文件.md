### 18.6.6　读写随机访问文件

使用RandomAccessFile，类似于组合使用了DataInputStream和DataOutputStream（因为它实现了相同的接口：DataInput和DataOutput）。另外我们可以看到，利用seek()可以在文件中到处移动，并修改文件中的某个值。

在使用RandomAccessFile时，你必须知道文件排版，这样才能正确地操作它。RandomAccessFile拥有读取基本类型和UTF-8字符串的各种具体方法。下面是示例：

![577-1](../Images/image03490.jpeg)

![578-1](../Images/image03491.jpeg)

display()方法打开了一个文件，并以double值的形式显示了其中的七个元素。在main()中，首先创建了文件，然后打开并修改了它。因为double总是8字节长，所以为了用seek()查找第5个双精度值，你只需用5*8来产生查找位置。

正如先前所指，RandomAccessFile除了实现DataInput和DataOutput接口之外，有效地与I/O继承层次结构的其他部分实现了分离。因为它不支持装饰，所以不能将其与InputStream及OutputStream子类的任何部分组合起来。我们必须假定RandomAccessFile已经被正确缓冲，因为我们不能为它添加这样的功能。

可以自行选择的是第二个构造器参数：我们可指定以“只读”（r）方式或“读写”（rw）方式打开一个RandomAccessFile文件。

你可能会考虑使用“内存映射文件”来代替RandomAccessFile。

练习16：（4）在JDK文档中查找RandomAccessFile，以UsingRandomAccessFile.java为基础，创建一个程序，它可以存储然后获取RandomAccessFile类能够提供的所有不同的类型。验证它可以准确地存储和获取各个值。