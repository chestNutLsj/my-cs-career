### 18.6.4　基本的文件输出

FileWriter对象可以向文件写入数据。首先，创建一个与指定文件连接的FileWriter。实际上，我们通常会用BufferedWriter将其包装起来用以缓冲输出（尝试移除此包装来感受对性能的影响——缓冲往往能显著地增加I/O操作的性能）。在本例中，为了提供格式化机制，它被装饰成了PrintWriter。按照这种方式创建的数据文件可作为普通文本文件读取。

![575-1](../Images/image03487.jpeg)

当文本行被写入文件时，行号就会增加。注意并未用到LineNumberInputStream，因为这个类没有多大帮助，所以我们没必要用它。从本例中可以看出，记录自己的行号很容易。

一旦读完输入数据流，readLine()会返回null。我们可以看到要为out显式调用close()。如果我们不为所有的输出文件调用close()，就会发现缓冲区内容不会被刷新清空，那么它们也就不完整。

文本文件输出的快捷方式

Java SE5在PrintWriter中添加了一个辅助构造器，使得你不必在每次希望创建文本文件并向其中写入时，都去执行所有的装饰工作。下面是用这种快捷方式重写的BasicFileOutput.java：

![575-2](../Images/image03488.jpeg)

你仍旧是在进行缓存，只是不必自己去实现。遗憾的是，其他常见的写入任务都没有快捷方式，因此典型的I/O仍旧包含大量的冗余文本。但是，本书所使用的在本章稍后进行定义的TextFile工具简化了这些常见任务。

练习12：（3）修改练习8，同样也打开一个文本文件，以便将文本写入其中。将LinkedList中的各行随同行号一起写入文件（不要试图使用LineNumber类）。

练习13：（3）修改BasicFileOutput.java，以便可以使用LineNumberReader来记录行数。注意继续使用编程方式实现跟踪会更简单。

练习14：（2）从BasicFileOutput.java的第四部分开始，编写一个程序，用来比较有缓冲的和无缓冲的I/O方式在向文件写入时的性能差别。