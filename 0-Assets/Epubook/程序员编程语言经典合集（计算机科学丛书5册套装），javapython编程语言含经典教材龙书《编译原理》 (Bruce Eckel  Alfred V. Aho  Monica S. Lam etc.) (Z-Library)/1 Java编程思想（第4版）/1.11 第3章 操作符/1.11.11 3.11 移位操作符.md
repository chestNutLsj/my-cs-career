## 3.11　移位操作符

移位操作符操作的运算对象也是二进制的“位”。移位操作符只可用来处理整数类型（基本类型的一种）。左移位操作符（<<）能按照操作符右侧指定的位数将操作符左边的操作数向左移动（在低位补0）。“有符号”右移位操作符（>>）则按照操作符右侧指定的位数将操作符左边的操作数向右移动。“有符号”右移位操作符使用“符号扩展”：若符号为正，则在高位插入0；若符号为负，则在高位插入1。Java中增加了一种“无符号”右移位操作符（>>>），它使用“零扩展”：无论正负，都在高位插入0。这一操作符是C或C++中所没有的。

如果对char、byte或者short类型的数值进行移位处理，那么在移位进行之前，它们会被转换为int类型，并且得到的结果也是一个int类型的值。只有数值右端的低5位才有用。这样可防止我们移位超过int型值所具有的位数。（译注：因为2的5次方为32，而int型值只有32位。）若对一个long类型的数值进行处理，最后得到的结果也是long。此时只会用到数值右端的低6位，以防止移位超过long型数值具有的位数。

“移位”可与“等号”（<<=或>>=或>>>=）组合使用。此时，操作符左边的值会移动由右边的值指定的位数，再将得到的结果赋给左边的变量。但在进行“无符号”右移位结合赋值操作时，可能会遇到一个问题：如果对byte或short值进行这样的移位运算，得到的可能不是正确的结果。它们会先被转换成int类型，再进行右移操作，然后被截断，赋值给原来的类型，在这种情况下可能得到-1的结果。下面这个例子演示了这种情况：

![083-1](../Images/image02674.jpeg)

在最后一个移位运算中，结果没有赋给b，而是直接打印出来，所以其结果是正确的。

下面这个例子向大家展示了如何应用涉及“按位”操作的所有操作符：

![083-2](../Images/image02675.jpeg)

![084-1](../Images/image02676.jpeg)

![085-1](../Images/image02677.jpeg)

程序末尾调用了两个方法：printBinaryInt()和printBinaryLong()。它们分别接受int或long型的参数，并用二进制格式输出，同时附有简要的说明文字。上面的例子还展示了对int和long的所有按位操作符的作用，还展示了int和long的最小值、最大值、+1和-1值，以及它们的二进制形式，以使大家了解它们在机器中的具体形式。注意最高位表示符号：0为正，1为负。关于int部分的输出正如上面所示。

数字的二进制表示形式称为“有符号的二进制补码”。

练习11：（3）以一个最高有效位为1的二进制数字开始（提示：使用十六进制常量），用有符号右移操作符对其进行右移，直至所有的二进制位都被移出为止，每移一位都要使用Integer.toBinaryString()显示结果。

练习12：（3）以一个所有位都为1的二进制数字开始，先左移它，然后用无符号右移操作符对其进行右移，直至所有的二进制位都被移出为止，每移一位都要使用Integer.toBinaryString()显示结果。

练习13：（1）编写一个方法，它以二进制形式显示char类型的值。使用多个不同的字符来展示它。