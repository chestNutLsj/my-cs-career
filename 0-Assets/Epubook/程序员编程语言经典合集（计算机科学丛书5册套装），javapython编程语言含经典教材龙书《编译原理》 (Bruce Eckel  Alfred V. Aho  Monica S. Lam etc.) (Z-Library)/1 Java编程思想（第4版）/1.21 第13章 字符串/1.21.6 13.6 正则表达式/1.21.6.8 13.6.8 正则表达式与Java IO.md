### 13.6.8　正则表达式与Java I/O

到目前为止，我们看到的例子都是将正则表达式应用于静态的字符串。下面的例子将向你演示，如何应用正则表达式在一个文件中进行搜索匹配操作。JGrep.java的灵感源自于Unix上的grep。它有两个参数：文件名以及要匹配的正则表达式。输出的是有匹配的部分以及匹配部分在行中的位置。

![341-1](../Images/image03108.jpeg)

通过net.mindview.util.TextFile对象将文件打开（在第18章中有详细的介绍），读入所有的行后，并存储在一个ArrayList中。因此，可以用循环来迭代遍历TextFile对象中的所有行。虽然也可以在for循环内部创建新的Matcher对象，但是，在循环外创建一个空的Matcher对象，然后用reset()方法每次为Matcher加载一行输入，这种处理会有一定的性能优化。最后用find()搜索结果。这里读入的测试参数是JGrep.java文件，然后搜索以[Ssct]开头的单词。

如果想要更深入的学习正则表达式，你可以阅读Jeffrey E. F. Friedl的《精通正则表达式（第2版）》。网络上也有很多正则表达式的介绍，你还可以从Perl和Python等其他语言的文档中找到有用的信息。

练习15：（5）修改JGrep.java类，令其能够接受模式标志参数（例如Pattern.CASE_INSENSITIVE，Pattern.MULTILINE）。

练习16：（5）修改JGrep.java类，令其能够接受一个目录或文件为参数（如果传入的是目录，就搜索目录中的所有文件）。提示：可以用下面的方法获得所有文件的名字列表：

![342-1](../Images/image03109.jpeg)

练习17：（8）编写一个程序，读取一个Java源代码文件（可以通过控制台参数提供文件名），打印出所有注释。

练习18：（8）编写一个程序，读取一个Java源代码文件（可以通过控制台参数提供文件名），打印出代码中所有的普通字符串。

练习19：（8）在前两个练习的基础上，编写一个程序，输出Java源代码中用到的所有类的名字。