## 20.6　总结

注解是Java引入的一项非常受欢迎的补充。它提供了一种结构化的，并且具有类型检查能力的新途径，从而使得程序员能够为代码加入元数据，而不会导致代码杂乱且难以阅读。使用注解能够帮助我们避免编写累赘的部署描述文件，以及其他生成的文件。而Javadoc中的@deprecated被@Deprecated注解取代的事实也说明，与注释性文字相比，注解绝对更适合用于描述类相关的信息。

Java SE5仅提供了很少的内置注解。这意味着如果你在别处找不到可用的类库，那就只能自己创建新的注解以及相应的处理器。有了apt工具的帮助，程序员可以同时编译新产生的源文件，以及简化构建过程，不过就目前的情况看，mirror API只能给予你一些基本功能，帮助你找到Java类定义中的元素。正如你已经看到的，Javassist能够用来操作字节码，或者你也可以编写自己的字节码操作工具。

这个状况将来一定会改善，API提供方，以及各种framework一定会将注解包含在其提供的工具集内。通过@Unit系统，我们可以想像得到，注解很可能将引发Java编程体验的巨大改变。

所选习题的答案都可以在名为The Thinking in Java Annotated Solution Guide的电子文档中找到，读者可以从https://www.mindviewllc.com购买此文档。

---

[^1]: Jeremy Meyer来到Crested Butte花了两周的时间和我一起撰写本章，他的帮助弥足珍贵。

[^2]: 这无疑是受到C#中类似功能的启发。C#的这项功能源自一个关键字，而不是注解，并且是编译器强制要求的。也就是说，当C#程序员覆盖一个方法时，必须使用override关键字，而在Java中，@Override是可选择的。

[^3]: 作业，我建议读者将其作为课程大作业。解答指南中不包含此类作业的解决方案。

[^4]: 不过，使用非标准的选项-XclassesAsDecls，你可以在编译后的类中操作注解。

[^5]: Java设计师们卖弄地认为，镜子（mirror）就是起反射（reflection）的作用。

[^6]: 本书中文版、英文版以及双语版均已由机械工业出版社出版——编辑注。

[^7]: 我原本考虑过基于这里的设计来自己做一个Better JUnit。不过后来发现JUnit4已经具有很多我这里讲到的思想，因此直接升级为JUnit4可能更简单吧。

[^8]: 这个类库是本书附带的代码包的一部分，可以在www.MindView.net上找到。

[^9]: 方法会导致程序中止（没有异常抛出）。

[^10]: Jeremy Meyer与我在这个问题上花了一整天。

[^11]: 关于这个数字有许多传说，不过考虑到Java是由书呆子创造出来的，我们可以做一个合理的猜测，他可能正幻想着咖啡店中的某个女人。

[^12]: 感谢Shigeru Chiba博士创建了该工具，以及他对我开发AtUnitRemover.java的帮助。

[^13]: 加入了其中。