## 4.8　switch

switch有时也被划归为一种选择语句。根据整数表达式的值，switch语句可以从一系列代码中选出一段去执行。它的格式如下：

![107-1](../Images/image02715.jpeg)

其中，Integral-selector（整数选择因子）是一个能够产生整数值的表达式，switch能将这个表达式的结果与每个integral-value（整数值）相比较。若发现相符的，就执行对应的语句（单一语句或多条语句，其中并不需要括号）。若没有发现相符的，就执行default（默认）语句。

在上面的定义中，大家会注意到每个case均以一个break结尾，这样可使执行流程跳转至switch主体的末尾。这是构建switch语句的一种传统方式，但break是可选的。若省略break，会继续执行后面的case语句，直到遇到一个break为止。尽管通常不想出现这种情况，但对有经验的程序员来说，也许能够善加利用这种情况。注意最后的default语句没有break，因为执行流程已到了break的跳转目的地。当然，如果考虑到编程风格方面的原因，完全可以在default语句的末尾放置一个break，尽管它并没有任何实际的用处。

switch语句是实现多路选择（也就是说从一系列执行路径中挑选一个）的一种干净利落的方法。但它要求使用一个选择因子，并且必须是int或char那样的整数值。例如，假若将一个字符串或者浮点数作为选择因子使用，那么它们在switch语句里是不会工作的。对于非整数类型，则必须使用一系列if语句。在下一章的末尾，你将看到Java SE5的新特性enum，它可以帮助我们减弱这种限制，因为enum可以和switch协调工作。

下面这个例子可随机生成字母，并判断它们是元音还是辅音字母：

![107-2](../Images/image02716.jpeg)

![108-1](../Images/image02717.jpeg)

由于Random.nextInt（26）会产生0到26之间的一个值，所以在其上加上一个偏移量“a”，即可产生小写字母。在case语句中，使用单引号引起的字符也会产生用于比较的整数值。

请注意case语句能够堆叠在一起，为一段代码形成多重匹配，即只要符合多种条件中的一种，就执行那段特别的代码。这时也应注意将break语句置于特定case的末尾，否则控制流程会简单地下移，处理后面的case。

在下面的语句中：

![108-2](../Images/image02718.jpeg)

Random.nextInt()将产生0～25之间的一个随机int值，它将被加到“a”上。这表示“a”将自动被转换为int以执行加法。为了把c当作字符打印，必须将其转型为char；否则，将产生整型输出。

练习8：（2）写一个switch开关语句，为每个case打印一个消息。然后把这个switch放进for循环来测试每个case。先让每个case后面都有break，测试一下会怎样；然后把break删了，看看会怎样。

练习9：（4）一个斐波那契数列是由数字1、1、2、3、5、8、13、21、34等等组成的，其中每一个数字（从第三个数字起）都是前两个数字的和。创建一个方法，接受一个整数参数，并显示从第一个元素开始总共由该参数指定的个数所构成的所有斐波那契数字。例如，如果运行java Fibonacci 5（其中Fibonacci是类名），那么输出就应该是1、1、2、3、5。

练习10：（5）吸血鬼数字是指位数为偶数的数字，可以由一对数字相乘而得到，而这对数字各包含乘积的一半位数的数字，其中从最初的数字中选取的数字可以任意排序。以两个0结尾的数字是不允许的，例如，下列数字都是“吸血鬼”数字：

1260 = 21 * 60

1827 = 21 * 87

2187 = 27 * 81

写一个程序，找出4位数的所有吸血鬼数字（Dan Forhan推荐）。