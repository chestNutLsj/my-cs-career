### 22.7.2　跟踪多个事件

作为一个有趣的试验，也为了向读者证明这些事件确实可以被触发，编写一个程序，使其能够跟踪JButton除了“是否被按下”事件以外的行为，将会显得很有价值。这个例子还向读者演示如何从JButton中继承出自己的按钮对象[^6]。

在下面的代码中，MyButton是TrackEvent类的内部类，所以MyButton能访问父窗口，并操作其文本区域，这正是能够把状态信息写到父窗体的文本区域内所必需的。当然，这是一个受限的解决方案，因为MyButton被局限于只能与TrackEvent一起使用。这种情况有时称为“高耦合”代码：

![816-3](../Images/image03824.jpeg)

![817-1](../Images/image03825.jpeg)

![818-1](../Images/image03826.jpeg)

在MyButton的构造器中，调用SetBackground()方法设置按钮的颜色。所有的监听器都是通过简单的方法调用进行注册的。

TrackEvent类包含一个HashMap，它用来存放表示事件类型的字符串；以及一些JTextField，每个JTextField用来显示和相应事件有关的信息。当然，这种对应关系可以静态生成而不用放进HashMap，不过我认为你会同意这样做，因为如此一来使用和修改会容易得多。尤其是，如果要在TrackEvent中加入或删除新的事件类型，那么只要在event数组中加入或删除字符串即可，其他工作将自动完成。

调用report()的时候，将传给它事件的名称以及从事件中得到的参数字符串。它使用外部类中的HaspMap对象h来查找与事件名称相关联的JTextField，然后把第二个参数放进该文本域。

运行这个例子很有趣，由此可以观察到程序中事件发生时的实际情况。

练习10：（6）使用SwingConsole编写一个applet应用程序，添加一个JButton和一个JTextField。编写恰当的监听器：如果按钮获得了焦点，键入的字符将出现在JTextField里。

练习11：（4）从JButton继承编写一个新的按钮。每当按钮按下的时候，将为按钮随机选择一种颜色。随机生成颜色的方法，请参考（本章稍后的）ColorBoxes.java。

练习12：（4）通过加入处理新事件的代码，在TrackEvent.java中监听新的事件。需要自己决定监听的事件类型。