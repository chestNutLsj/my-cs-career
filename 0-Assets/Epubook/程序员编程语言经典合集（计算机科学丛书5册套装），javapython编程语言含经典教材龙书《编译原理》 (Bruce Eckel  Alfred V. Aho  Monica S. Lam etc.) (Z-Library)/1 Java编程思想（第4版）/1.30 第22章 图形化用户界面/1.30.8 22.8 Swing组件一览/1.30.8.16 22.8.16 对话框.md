### 22.8.16　对话框

对话框是从视窗弹出的另一个窗口。它的目的是处理一些具体问题，同时又不会使这些具体细节与原先窗口的内容混在一起。对话框通常应用于视窗编程环境中。

如果要编写一个对话框，就需要从JDialog继承，它只不过是另一种类型的Window，与JFrame类似。JDialog具有一个布局管理器（默认情况下为BorderLayout），并且要添加事件监听器来处理事件。下面是个简单的例子：

![838-1](../Images/image03853.jpeg)

一旦创建了JDialog以后，必须调用setVisible（true）方法来显示和激活它。当对话框被关闭时，你必须通过调用display()来释放该对话框使用的资源。

下面的例子更加复杂；对话框由一个网格构成（使用GridLayout），并且添加了一种特殊按钮，它由ToeButton类定义。按钮将先在自己周围画一个边框，然后根据状态的不同，在中央显示“空白”，“x”或者“o”。开始时的按钮状态为“空白”，然后根据每一轮单击，变成“x”或者“o”。而且，当你在非“空白”的按钮上单击的时候，它将在“x”和“o”之间翻转，以提供一种有趣的三值翻转（tic-tac-toe）概念的变体。此外，通过改变在主应用视窗中的数字，可以为对话框设置任意的行数和列数。

![839-2](../Images/image03854.jpeg)

![840-1](../Images/image03855.jpeg)

因为static关键字只能处于类的外层，所以内部类不能包含静态的数据或者嵌套类。

paintComponent()方法先在面板周围绘制正方形，然后在中间画“x”或“o”。这里充满了乏味的计算，但是却很直接明了。

MouseListener被用来捕获鼠标单击事件：首先，它检查面板上是否为空白，如果不是空白，就向父窗体查询现在是哪一轮，这样就得到了ToeButton的状态。通过内部类机制，ToeButton可以操作其外部类，更新当前的轮次；如果按钮已经显示为“x”或“o”，那么就翻转它。在这个计算中，读者可以看到第3章学习的if-else三元运算符的习惯用法。在状态改变之后，ToeButton将被重绘。

ToeDialog的构造器非常简单；它按你的要求向网格中添加数个按钮，然后调整窗体大小，使得每个按钮的长和宽均为50像素。

TicTacToe通过创建两个JTextField（用来输入按钮网格的行数和列数）和带有ActionListener的“go”按钮，完成整个程序的设置工作。当按钮被按下时，将获取JTextField里面的数据，因为它们是字符串，所以使用静态的Integer.parseInt()方法把它们转换成整数。