   

# 第22章　图形化用户界面

设计中要遵循的一条基本原则是：“让简单的事情变得容易，让困难的事情变得可行。”[^1]

Java 1.0版本中的图形用户界面（graphical user interface，GUI）库，其最初的设计目标是帮助程序员编写在所有平台上都能良好表现的GUI程序。遗憾的是，这个目标没有达到。事实是Java 1.0提供的“抽象窗口工具包”（Abstract Window Toolkit，AWT）在所有的系统上表现得都不太好，而且限制颇多；你只能使用四种字体，也不能访问存在于本地操作系统上的任何成熟的GUI组件。Java 1.0的AWT编程模型非常笨拙，并且不是面向对象的。在我课上的一个学生（在Java创建期间他曾经在Sun工作）解释了其原因：最初版本的AWT是在一个月内构思、设计和实现的。从生产率上看，这确实很惊人，不过这也是说明为什么精心设计如此重要的反面教材。

Java 1.1的AWT中引入了事件模型后（这是一种更清晰的、面向对象的方法），以及随着JavaBeans的加入（它最初是为了使可视化编程环境的创建变得更容易而引入的构件编程模型），情况有所好转。Java 2（JDK 1.2）最终完成了从旧式的Java 1.0 AWT到新标准的转换：“Java基础类库”（JFC）几乎替换了所有内容，其中有关GUI的部分被称为“Swing”。Swing是一组易于使用、易于理解的JavaBeans，它能通过拖放操作（也可以通过手工编写）来创建合理的GUI程序。软件工业界里的“三次修订”规则（产品在修订三次之后才会成熟）看起来对编程语言也同样适用。

本章介绍了流行的Java Swing库，并且合理地假定Swing就是Sun最终的Java GUI库[^2]。如果出于某些原因，你需要使用以前那个“老式”的AWT（比如你在为以前的代码做支持，或者由于浏览器的限制），那么你可以在本书第一版中（可以从www.BruceEckel.com下载，本书配套光盘中也有）找到相关介绍。注意，Java中仍然存在某些AWT构件，有时你必须使用它们。

请注意，本章没有完整地介绍Swing提供的构件，对于提到的类，也不会讨论其所有方法。这里的讨论只是一个简介。Swing库非常庞大，本章的目的仅仅是为你打一个坚实的基础，让读者熟悉其中的基本概念。如果你需要比这里介绍的更复杂的功能，只要深入研究，Swing几乎可以实现任何你想要的功能。

在这里，我假定你已经从http://java.sun.com下载并安装了HTML格式的JDK文档，可以浏览那个文档中的javax.swing类，可以看到完整的细节及Swing库中的所有方法。你还可以在Web上搜索，但是搜索的起点最好是http://java.sun.com/docs/books/tutorial/uiswing处Sun自己的教程。

在学习Swing的时候将会发现：

1）Swing与其他语言或开发环境相比，是一进已经改进了很多的编程模型（这里并不是说它就是完美的模型，只是说它向前迈进了一大步）。

2）“GUI构造工具”（可视化编程环境）对于完整的Java开发环境而言，是必不可少的一方面。JavaBeans和Swing使得GUI构造工具能够在你用图形工具向窗体上放置组件的同时帮助你编写代码。这不仅在编写GUI程序期间加快了开发速度，而且它使得你可以进行更多的试验，从而具备能够通过试验产生更多设计的能力，继而得到更好的设计。

3）Swing库设计上的简单性和合理性，使得你即使使用GUI构造工具而不是手工编写代码，得到的代码仍然是可读的；这就解决了以前使用GUI构造工具的一个大问题，就是很容易产生不可读的代码。

Swing包含了所有你希望在流行的用户界面中看到的组件：从带图片的按钮，到树形和表格组件。这个库虽然庞大，但它的设计理念是：使用组件的复杂程度与任务的难度相匹配；如果任务很简单，你不用写很多代码，但对于复杂的工作，就要写复杂的代码才行。

Swing中有一个非常令人称道的原则，称为“正交使用”（orthogonality of use）。意思是，一旦你理解了库中的某个通用概念，你就可以把这个概念应用到其他地方。比如标准的命名约定，我在编写例子的时候，常常在没有翻阅任何资料的情况下，仅仅通过方法的名称就能正确猜出其功能。从库的设计上来说，这是个相当好的特性。再比如，通常可以把一个组件“插”到另一个组件里面，而且能正常工作。

Swing自动支持键盘导航；可以不用鼠标运行Swing程序，而且这也不用额外编写代码。要支持滚动也不用费工夫；只要在把组件加入窗体之前，先把它包装进一个JScrollPane组件即可。像工具提示这样的功能，通常只需一行代码即可使用。

为了可移植性，Swing完全用Java编写。

Swing还支持一种非常先进的功能，称为“可插式外观”（pluggable look and feel），意思是用户界面的外观可以动态改变，以适应不同平台和操作系统下用户的习惯。你甚至可以（不过很难）自己发明一种外观。你可以在Web上找到一些外观[^3]。