### 22.11.5　把Bean打包

在把JavaBean加入到某个支持Bean的IDE之前，必须把它置于一个Bean容器中，Bean容器，也就是一个JAR文件，它里面包含了Bean的所有.class文件以及能表明“这是一个Bean”的“清单”（manifest）文件。清单文件是一个文本文件，它遵循特定的格式。对于BangBean，它的清单文件看起来像这样：

![867-1](../Images/image03891.jpeg)

第一行显示了清单文件格式的版本，目前Sun公司发布的是1.0。第二行（忽略空行）为BangBean.class文件命名，第三行表明“这是一个Bean”。没有第三行，程序构建工具将不能把类识别成Bean。

唯一需要技巧的部分是，要确保在“Name：”字段写上正确的路径。回过头看看前面的BangBean.java，就会发现它处于bangbean包中（也就是一个名为“bangbean”的子目录，它不包括在classpath中），清单文件的名称字段必须含有这个包信息。此外，必须把清单文件放在包的根目录的上层目录中，这里就是把清单文件放在“bangbean”目录的父目录中。然后需要在清单文件所在的目录下调用jar工具，如下所示：

![868-1](../Images/image03892.jpeg)

这里假定你要把生成的JAR文件命名为BangBean.jar，并且清单文件的名称为BangBean.mf。

你可能会奇怪：“当我编译完BangBean.java之后，生成的其他.class文件在哪呢？”其实，它们都在bangbean子目录下，上面jar命令行的最后一个参数就是bangbean目录名。当你把目录名传递给jar工具时，它将把整个目录打包进JAR文件（在本例中，包括了BangBean.java源文件，你也许不会选择在自己的Bean中包括源代码）。此外，如果你把刚才生成的JAR文件解包，就会发现里面并没有你指定的清单文件，jar工具创建了自己的清单文件（部分根据你提供的信息）MANIFEST.MF，这个文件放在“META-INF”（元信息）目录下。打开这个文件，就会看到jar为每个文件都添加了数字签名信息，如下所示：

![868-2](../Images/image03893.jpeg)

通常，你不必考虑这些，如果改变了程序，你只要修改原来的清单文件，然后重新调用jar工具来为Bean创建一个新的JAR文件即可。通过把相关信息加入清单文件，你还能把其他Bean也添加到这个JAR文件中。

要注意的一点是，你可能希望把每个Bean都放进专门的子目录中，因为在创建JAR文件的时候，你把子目录的名称传递给了jar工具，它将把子目录里面的所有文件都打包进JAR文件。可以看到Frog和BangBean都在它们各自的子目录中。

一旦把Bean正确地打包成JAR文件，就可以把它导入支持Bean的IDE中了。导入的方式根据不同的工具可能会有所不同，不过Sun公司在它们的“Bean Builder”里提供了一个免费使用的测试工具（可以从http://java.sun.com/beans下载）。只要把JAR文件复制到正确的目录下，就可以把你的Bean导入到Bean Builder中。

练习36：（4）把Frog.class加入本章所示的清单文件，执行jar工具创建包含Frog和BangBean的JAR文件。然后从Sun下载并安装Bean Builder，或者使用现有的支持Bean的程序构建工具，把JAR文件导入开发环境测试这两个Bean。

练习37：（5）自己编写一个JavaBean，取名为Valve。它有两个属性：一个布尔型的on，一个整型的level。写一个清单文件，使用jar为你的Bean打包，在Bean Builder或者支持Bean的程序构建工具里面导入这个Bean，然后进行测试。