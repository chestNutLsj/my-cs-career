### 22.13.2　编译MXML

启动使用Flex之旅的最简单方式就是使用免费试用版，这可以从www.macromedia.com/software/flex/trial处下载[^10]。Flex这个产品打包了大量的版本，从免费试用版到企业服务器版，并且Macromedia还为开发Flex应用程序提供了额外的工具。确切的打包机制在不断地变化，所以请检查Macromedia网站以了解具体信息。还应该注意的是，你可能需要修改在Flex安装的bin目录中jvm.config文件：

为了将MXML文件编译为Flash字节码，你有两个选择：

1）你可以将MXML文件放在Java Web应用程序中，与JSP和HTML同处一个WAR文件中，然后在游览器请求MXML文档的URL时，在运行时编译所请求的.mxml文件。

2）你可以用Flex命令行编译器mxmlc编译MXML文件。

第一个选择，即基于Web的运行时编译，除Flex之外，还需要一个Servlet容器（例如Apache Tomcat）。Servlet容器的WAR文件必须用Flex配置信息进行更新，例如添加到web.xml描述符中的Servlet映射，并且它还必须包括Flex的JAR文件——当你安装Flex时，这些步骤会自动得到处理。在WAR文件配置好之后，你就可以将MXML文件放到Web应用程序中，并且通过任何浏览器来请求这些文档的URL。Flex将在第一次被请求时编译该应用程序，这与JSP模型类似，其后将在HTML外壳中传递编译过且缓存的SWF。

第二种选择不需要服务器。当你在命令行中调用Flex的mxmlc编译器时，就会产生SWF文件，可以按照你的意愿部属它们。mxmlc可执行程序位于Flex安装的bin目录下，调用它时不提供任何参数可以将有效的命令行选项列出来。通常，你需要指定Flex客户端组件库的位置，来作为-flexlib命令行选项，但是在像前面看到的两个非常简单的示例中，Flex编译器将假设组件库的位置。因此可以像下面这样编译前面的两个示例：

![871-1](../Images/image03896.jpeg)

这将产生一个helloflex2.swf文件，它可以在Flash中运行，或者与HTML一起置于任何HTTP服务器之上（一旦Flash被加载到Web浏览器中，你通常只需在SWF文件上双击就可以在浏览器中启动它）。

对于helloflex2.swf，你可以看到下面这个运行在Flash Player中的用户界面：

![871-2](../Images/image03897.jpeg)

在更复杂的应用程序中，你可以通过引用在外部ActionScript文件中的函数，来将MXML和ActionScript分离开。在MXML中，可以使用下面用于Script控件的语法：

![871-3](../Images/image03898.jpeg)

这行代码使得MXML控件可以引用位于名为MyExternalScript.as的文件中的函数，就好像这些函数位于MXML文件中一样。