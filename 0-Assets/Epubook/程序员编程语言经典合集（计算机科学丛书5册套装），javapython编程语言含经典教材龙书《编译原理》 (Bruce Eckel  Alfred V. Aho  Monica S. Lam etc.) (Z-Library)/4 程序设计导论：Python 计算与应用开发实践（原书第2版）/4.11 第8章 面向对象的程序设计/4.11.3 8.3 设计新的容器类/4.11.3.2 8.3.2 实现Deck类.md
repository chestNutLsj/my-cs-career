   

### 8.3.2　实现Deck类

我们实现Deck类，从Deck构造函数开始。与上一节的两个例子（类Point和Card）不同，Deck构造函数不带任何参数。但还是需要实现，因为其任务是创建一副52张扑克牌并将其存储在某个位置。

要创建52张标准扑克牌的列表，我们可以使用一个嵌套循环，类似于二十一点扑克牌游戏应用程序中的函数shuffledDeck()。我们创建一个suits集和一个ranks集：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08841.jpeg)

然后使用一个嵌套for循环来创建每个rank和suit的组合：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08842.jpeg)

我们需要一个用于保存所生成的扑克牌的容器。因为一副扑克牌中的扑克牌的顺序有意义，而且应该允许修改，因此我们同样选择第6章二十一点扑克牌游戏应用程序使用的列表。

现在我们需要做出一些设计决策。首先，包含扑克牌的列表是实例变量还是类变量？由于每个Deck对象应该有自己的扑克牌列表，很显然列表必须是实例变量。

我们还有一个设计决策需要解决：suits集和ranks集应该定义在何处？它们既可以是__init__()函数的局部变量，也可以是类Deck的类变量，或者是实例变量。由于集合不会被修改，且被所有的Deck实例共享，因此我们决定使用类变量。

请读者重新阅读模块cards.py中的方法__init__()的实现。由于集suits和集ranks是类Deck的类变量，故它们定义在Deck名称空间。因此，为了在第12行和第13行访问它们，必须指定名称空间：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08843.jpeg)

现在我们把注意力转向类Deck的剩余两个方法的实现。方法shuffle()只需要针对实例变量self.deck调用random模块函数shuffle()。

对于方法dealCard()，我们需要确定一副牌的顶部位于何处。是self.deck列表的头部还是尾部？我们决定使用尾部。类Deck的完整实现代码如下：

模块：cards.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08844.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08845.jpeg)

练习题8.5　修改类Deck的构造函数，使得该类可以用于非标准52张扑克牌的扑克牌游戏。对于此类游戏，我们需要在构造函数中显式指定扑克牌列表。下面是一些模拟实例。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08846.jpeg)