   

### 8.3.4　实现Queue类

接着我们讨论Queue类的实现。我们需要回答的最重要的问题是如何将项存储在队列中。队列可以是空的，也可以包含无限数量的项。它还必须维护项的顺序，因为这对于一个（公平的）队列是必不可少的。那么，什么样的内置类型可以用来存储任意数量的项，而且允许一端插入，并从另一端移除呢？

列表类型肯定满足这些约束，所以我们选择列表。下一个问题是：应该在Queue类的实现中何时何地创建此列表？在我们的示例中，很明显我们期望默认Queue构造函数为我们创建一个空队列。这意味着一旦Queue对象被创建后就创建列表，即在__init__()方法中创建：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08854.jpeg)

接下来我们讨论三个Queue方法的实现。方法isEmpty()实现十分简单，只要检查列表self.q的长度即可：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08855.jpeg)

方法enqueue()应该把项添加到队列self.q的尾部，而方法dequeue()则应该从队列self.q的头部移除项。我们需要确定什么是队列self.q的头部。我们可以选择最左侧列表元素（即索引0）或最右侧元素（索引-1）作为列表的头部。两者都可以，其优缺点取决于内置类list的底层实现（这超出了本章讨论的范围）。

在图8-6中，队列的第一个元素显示在左侧，我们关联为索引0，因此我们的实现采用了同样的方法。一旦做出了决策，Queue类可以实现如下：

模块：ch8.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08856.jpeg)