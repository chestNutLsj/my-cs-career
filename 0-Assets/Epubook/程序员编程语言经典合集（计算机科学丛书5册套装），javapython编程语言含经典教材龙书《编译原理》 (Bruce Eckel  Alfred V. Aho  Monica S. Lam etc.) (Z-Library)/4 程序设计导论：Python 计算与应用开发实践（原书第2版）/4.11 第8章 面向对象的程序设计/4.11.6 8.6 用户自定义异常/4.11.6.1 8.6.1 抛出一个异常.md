   

### 8.6.1　抛出一个异常

根据我们目前为止的经验，当程序执行过程中出现异常时，它会被Python解释器抛出，因为出现了错误情况。我们已经看到了一种不是因为错误而造成的异常：它是KeyboardInterrupt异常，通常由用户引发。用户通过同时按键【Ctrl+C】终止一个无限循环时，会引发KeyboardInterrupt异常。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08933.jpeg)

（无限循环被KeyboardInterrupt异常中断。）

事实上，用户可以引发任何类型的异常，而不仅仅是KeyboardInterrupt异常。Python语句raise强制引发一个给定类型的异常。下面是如何在解释器命令行中引发一个ValueError异常的例子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08934.jpeg)

请回顾ValueError只是一个碰巧为异常类的类。raise语句包含一个关键字raise，紧跟一个异常构造函数（例如ValueError()）。执行该语句引发一个异常。如果异常没有被try/except语句处理，则程序中断运行，默认的异常处理程序在命令行输出错误信息。

异常构造函数可以带输入参数，用于提供有关错误原因的信息：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08935.jpeg)

可选的参数是与异常对象相关联的字符串信息：事实上，它是异常对象的非正式字符串表示形式，即__str__()方法返回的内容，调用print()函数输出的内容。

在我们的两个例子中，我们证明了一个异常可以被引发，不管它是否有意义。我们在下一个练习题中再次强调了这一点。

练习题8.9　重新实现类Queue的方法dequeue()，当尝试从一个空队列中出队时，引发一个KeyboardInterrupt异常（这种情况下该异常并不合适），错误信息为'dequeue from empty queue'（实际上，这才是合适的错误信息）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08936.jpeg)