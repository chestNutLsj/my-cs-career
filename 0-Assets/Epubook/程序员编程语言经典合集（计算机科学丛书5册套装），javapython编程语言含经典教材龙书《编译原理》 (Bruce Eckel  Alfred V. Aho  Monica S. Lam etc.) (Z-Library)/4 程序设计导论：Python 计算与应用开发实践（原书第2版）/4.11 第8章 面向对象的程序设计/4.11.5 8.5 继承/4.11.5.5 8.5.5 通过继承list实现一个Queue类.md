   

### 8.5.5　通过继承list实现一个Queue类

我们在第8.3和8.4节开发的类Queue仅仅是设计和实现一个队列类的方法之一。现在我们认识到每个Queue对象仅仅是一个队列对象的“轻封装”，另一种实现方法就显而易见了。为什么不设计Queue类使得每个Queue对象是一个list对象呢？换言之，为什么不设计Queue类作为list的一个子类呢？让我们马上来实现吧。

模块：ch8.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08927.jpeg)

注意，因为变量self指向一个Queue2对象（list的一个子类），随之self同样是一个list对象。因此在self上可以直接调用list方法（如pop()和append()）。同样请注意，方法__repr__()和__len__()不需要实现，因为它们从list父类继承。

开发类Queue2的工作量比开发原始的Queue类少很多。感觉是不是更棒？

注意事项：过度继承

虽然在现实生活中，继承大量财富是无比美妙的事情，但在OOP（面向对象的程序设计）中过度继承会成为麻烦。虽然Queue2的实现简单直接，类Queue2继承了list所有的属性（包括违背队列精神的方法），这是一个问题。为了说明这一点，让我们考虑下列Queue2对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08928.jpeg)

Queue2的实现允许我们从队列中间移除一个项：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08929.jpeg)

它同样允许我们在队列中间插入一个项：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08930.jpeg)

因此7在5之前获得服务，而11在队列中插入到9之前，从而违背了队列精神。由于继承了所有的list方法，我们不能宣称类Queue2严格遵循一个队列的精神。