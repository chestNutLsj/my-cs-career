   

## 8.11　思考题

8.20　开发一个BankAccount类，支持下列方法：

·__init__()：将银行账户余额初始化为输入参数的值，如果没有给定输入参数，则为0

·withdraw()：带一个amount输入参数，并从账户余额中提取amount指定的款额

·deposit()：带一个amount输入参数，并将amount指定的款额存储到银行账户

·balance()：返回账户余额

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08961.jpeg)

8.21　实现一个类Polygon，对正多边形进行抽象，并支持下列方法：

·__init__()：构造函数，带两个参数：一个正n边形对象的边数和边长

·perimeter()：返回正n边形的周长

·area()：返回正n边形的面积

注意，边长为s的正n边形的面积为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08962.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08963.jpeg)

8.22　实现类Worker，支持下列方法：

·__init__()：构造函数，带两个输入参数：工人的姓名（字符串）和小时工资（数值）

·changeRate()：带一个新的小时工资作为输入参数，修改工人的小时工资

·pay()：带一个工作时长输入参数，输出：'Not Implemented'

接下来开发Worker的子类：HourlyWorker和SalariedWorker。两个子类都重写继承的方法pay()来计算工人的周薪。计时工按实际工时支付每小时工资，超过40小时的加班费为双倍工资。计薪工人的工资是40小时的工资，不管工作时间是多少。因为与工作时长无关，故SalariedWorker的方法pay()可以不带参数调用。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08964.jpeg)

8.23　创建一个类Segment，表示平面上的一个线段，支持下列方法：

·__init__()：构造函数，带两个输入参数：一对表示线段端点的Point对象

·length()：返回线段的长度

·slope()：返回线段的斜率，如果斜率无穷大，则返回None

运行效果如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08965.jpeg)

8.24　实现一个类Person，支持下列方法：

·__init__()：构造函数，带两个输入参数：姓名（字符串）和出生年份（整数）

·age()：返回年龄

·name()：返回姓名

使用标准库模块time中的localtime()函数计算年龄。

8.25　开发一个类Textfile，提供分析文本文件的方法。类Textfile支持一个构造函数，带一个输入参数：一个文件名（字符串），初始化Textfile对象与对应的文本文件关联。要求Textfile类支持如下方法：nchars()、nwords()和nlines()，分别返回关联文本文件的字符数、单词数和行数。要求类还支持方法read()和readlines()，分别返回文本文件的内容（字符串）和内容行列表，类似于文件对象对应的功能。

最后，要求类支持方法grep()，带一个输入参数：目标字符串，在文本文件中查找包含目标字符串的行。该方法返回文件中包含目标字符串的行。另外，要求输出行号，行号从0开始。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08966.jpeg)

8.26　在思考题8.25的类Textfile中，添加方法words()，不带输入参数，返回文件中的不重复单词的列表。

8.27　在思考题8.25的类Textfile中，添加方法occurrences()，不带输入参数，返回一个字典，映射文件中的每个单词（键）到单词在文件中出现的次数（值）。

8.28　在思考题8.25的类Textfile中，添加方法average()，不带输入参数，返回一个包含以下内容的元组（tuple）对象：（1）文件中每行平均的单词个数；（2）单词数最多的句子包含的单词个数；（3）单词数最少的句子包含的单词个数。可以假定句子中单词的分隔符为：'!?.'。

8.29　实现类Hand，表示一手扑克牌。要求类包含一个构造函数：带一个玩家ID（字符串）作为输入参数。要求类支持方法addCard()，带一张扑克牌作为输入参数，把它加入到一手扑克牌中。要求支持方法showHand()，按下列格式显示玩家手中的扑克牌。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08967.jpeg)

8.30　使用本章开发的Card类和Deck类以及思考题8.29的Hand类，重新实现案例研究CS.6中的二十一点扑克牌游戏应用程序。

8.31　实现类Date，支持下列方法：

·__init__()：构造函数，不带输入参数，初始化Date对象为当前日期

·display()：带一个格式参数，按要求格式显示日期

·使用标准库模块time中的函数localtime()来获取当前时间。格式参数是一个字符串：

·'MDY'：MM/DD/YY(e.g.,02/18/09)

·'MDYY'：MM/DD/YYYY(e.g.,02/18/2009)

·'DMY'：DD/MM/YY(e.g.,18/02/09)

·'DMYY'：DD/MM/YYYY(e.g.,18/02/2009)

·'MODY'：Mon DD,YYYY(e.g.,Feb 18,2009)

要求使用标准库模块time中的函数localtime()和strftime()。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08968.jpeg)

8.32　开发一个类Craps，允许用户在计算机上玩骰子游戏。（骰子游戏规则在思考题6.31中描述。）要求类Craps支持下列方法：

·__init__()：首先滚动一对骰子。如果滚动的结果值（即两个骰子的和）为7或者11，则输出赢的提示信息。如果滚动的结果值为2、3或者12，则输出输的提示信息。对于所有其他滚动的结果值，输出一个通知用户重新掷骰子的信息。

·forPoint()：生成一对骰子的滚动的结果值，根据滚动的结果值，输出对应的三种信息之一（如下所示）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08969.jpeg)

8.33　实现类Pseudorandom，使用线性同余发生器（linear congruential generator）生成一系列的伪随机整数。线性同余法从一个给定的种子数x开始产生一个数字序列。序列中的每个数将通过在前一个序列数x上应用（数学）函数f(x)而求得。精确函数f(x)由三个数定义：a（乘子）、c（增量）和m（模数）：

f(x)=(ax+c)mod m

例如，如果m=31、a=17和c=7，则从种子x=12开始，线性同余方法将生成下列数值序列：

12，25，29，4，13，11，8，19，20，…

因为f(12)=25、f(25)=29、f(29)=4，等等。要求类Pseudorandom支持下列方法：

·__init__()：构造函数，带四个输入参数：a、x、c和m，并初始化Pseudorandom对象

·next()：产生并返回伪随机序列中的下一个值

8.34　实现一个容器类Stat，存储一系列值并提供关于这些数值的统计信息。它支持重载构造函数，用于初始化容器，还支持下列方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08970.jpeg)

8.35　像队列一样，堆栈是一种序列容器类型，支持非常受限的访问方法：所有插入和清除都来自堆栈的一端（通常称为堆栈的顶部）。实现一个容器类Stack，用于实现一个堆栈。要求它是object的一个子类，支持len()重载运算符，并支持下列方法：

·push()：带一个项作为输入参数，把该项压入到堆栈的顶部

·pop()：从堆栈顶部返回并移除一个项

·isEmpty()：如果堆栈为空则返回True，否则返回False

还应该确保堆栈可以按如下显示输出。堆栈是通常被称为后进先出（LIFO）的容器，因为最后插入的项最先被移除。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08971.jpeg)

8.36　编写一个名为PriorityQueue的容器类。要求PriorityQueue类支持下列方法：

·insert()：带一个数值参数，把该数值添加到容器中

·min()：返回容器中的最小值

·removeMin()：移除容器中的最小值

·isEmpty()：如果容器为空则返回True；否则返回False

要求还支持重载运算符len()。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08972.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08973.jpeg)

8.37　实现类Square和Triangle，作为思考题8.21的类Polygon的子类。要求Square类和Triangle类都重载构造函数__init__，只带一个参数l（表示边长）。重写方法area()，使用更简单的方法计算面积。要求方法__init__使用父类的__init__方法，使得子类中不用定义实例变量（l和n）。注意：边长为s的等边三角形的面积为![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08974.jpeg)。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08975.jpeg)

8.38　实现思考题8.24中的类Person的两个子类。子类Instructor支持下列方法：

·__init__()：构造函数，参数除了姓名和出生年份外，还包括学历

·degree()：返回教师的学历

类Student也是Person的子类，支持下列方法：

·__init__()：构造函数，参数除了姓名和出生年份外，还包括主修专业

·major()：返回学生的主修专业

要求所实现的三个类的运行结果如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08976.jpeg)

8.39　考虑下列类树层次结构：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08977.jpeg)

实现六个类，使用Python继承关系来建模这个分类法。在类Animal中，实现方法speak()，该方法被Animal的子类继承。完成六个类的实现，使它们表现下列行为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08978.jpeg)

8.40　在思考题8.20中，类BankAccount的实现存在一些问题，描述如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08979.jpeg)

问题是：（1）可以创建一个余额为负数的银行账户；（2）取款额可以大于账户余额；（3）存款额可以为负数。修改BankAccount的代码，如果出现了以上违规操作，则引发ValueError异常，并输出相应的信息'Illegal balance'、'Overdraft'或者'Negative deposit'。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08980.jpeg)

8.41　在思考题8.40中，当发生了三种违规操作时将引发一个通用的ValueError异常。如果引发更具体的用户自定义异常，则会更具可用性。定义可能会引发的新的异常类Negative-BalanceError、OverdraftError和DepositError。此外，要求异常对象的非正式的字符串表示应该可以体现诸如此类的余额：创建负数余额银行账户、透支或者负存款。

例如，当试图创建具有负数余额的银行账户时，要求错误消息包括假如允许银行账户创建时所产生的余额：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08981.jpeg)

当透支导致负数账户余额时，也要求错误信息包括假如允许透支导致的账户余额：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08982.jpeg)

如果尝试负数存款，负存款金额应包含在错误信息中：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08983.jpeg)

最后，使用这三个新建的异常类代替ValueError，重新实现类BankAccount。