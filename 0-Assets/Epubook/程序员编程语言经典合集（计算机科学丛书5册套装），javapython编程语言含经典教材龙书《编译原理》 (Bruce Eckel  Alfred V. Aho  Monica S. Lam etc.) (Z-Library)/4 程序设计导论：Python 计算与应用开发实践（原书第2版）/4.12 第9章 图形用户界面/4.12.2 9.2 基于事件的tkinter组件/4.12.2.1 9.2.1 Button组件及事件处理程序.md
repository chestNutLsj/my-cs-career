   

### 9.2.1　Button组件及事件处理程序

我们首先从经典的按钮组件开始讨论。模块tkinter中的类Button表示GUI按钮。为了描述其用法，我们开发了一个简单的仅包含一个按钮的GUI应用程序，如图9-6所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09007.jpeg)

图9-6　包含一个Button组件的GUI。按钮上显示文本“Click it”。当单击该按钮时，输出日期和时间信息

该应用程序的工作方式为：当用户单击按钮“Click it”时，在解释器命令行中输出单击按钮时的日期和时间信息：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09008.jpeg)

如果你愿意，你可以不断重复单击该按钮：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09009.jpeg)

让我们来实现这个GUI。要构建一个按钮组件，我们使用Button构造函数。和Label构造函数一样，Button构造函数的第一个参数必须指向按钮的父组件。要指定按钮上显示的文本，可以使用text参数，这也和Label组件一样。事实上，表9-1中显示的所有定制组件的选项同样也可以用于Button组件。

按钮组件和标签组件的一个区别在于，按钮是交互式组件。每次单击一个按钮时，会执行某个操作。事实上，“操作”实现为一个函数，每次单击按钮时会被执行。我们可以通过Button构造函数中的command选项指定该函数的名称。下面是为上述GUI创建按钮组件的方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09010.jpeg)

当单击按钮时，将执行函数clicked()。接下来需要实现该函数。当调用该函数时，要求函数输出当前日期和时间信息。我们使用4.2节中的模块time来获取和输出当前本地时间。因此完整的GUI程序代码如下：

模块：clickit.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09011.jpeg)

函数clicked()被称为事件处理程序，它处理单击按钮“Click it”时产生的事件。

在clicked()的第一个版本实现中，日期和时间信息输出到命令行。假设我们希望输出信息到一个小的GUI窗口中，如图9-7所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09012.jpeg)

图9-7　showinfo()窗口。模块tkinter.messagebox中的showinfo()函数在一个独立的窗口中显示消息。单击“OK”按钮，可以关闭该窗口

在模块tkinter.messagebox中，包含一个函数showinfo()，可以在一个独立的窗口中显示一个字符串。因此，我们只需要把原始的函数clicked()替换为：

模块：clickit.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09013.jpeg)

练习题9.3　实现一个GUI，要求包含两个标有文字“Local time”和“Greenwich time”的按钮。单击第一个按钮时，在命令行输出本地时间。单击第二个按钮时，要求输出格林尼治时间。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09014.jpeg)

使用模块time中的gmtime()函数可以获得当前格林尼治标准时间。