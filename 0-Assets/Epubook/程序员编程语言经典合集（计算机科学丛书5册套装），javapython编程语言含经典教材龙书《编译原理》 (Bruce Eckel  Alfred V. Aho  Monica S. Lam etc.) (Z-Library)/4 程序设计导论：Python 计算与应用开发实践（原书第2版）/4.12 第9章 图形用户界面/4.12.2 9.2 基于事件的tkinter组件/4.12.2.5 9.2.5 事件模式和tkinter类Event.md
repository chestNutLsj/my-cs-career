   

### 9.2.5　事件模式和tkinter类Event

一般而言，bind()方法的第一个参数是我们要绑定的事件的类型。事件的类型是由一个字符串表示的，该字符串是一个或多个事件模式的级联。事件模式具有下列格式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09029.jpeg)

表9-6显示了modifier、type和detail的一些取值。对于我们的按键记录器，事件模式将仅包括一个类型：KeyPress。事件模式及其关联目标事件的示例如下所示：

·<Control-Button-1>：同时按Ctrl键和鼠标左键

·<Button-1><Button-3>：按鼠标左键，然后按鼠标右键

·<KeyPress-D><Return>：按键盘D键，然后按键盘上的【Enter/Return】键

·<Buttons1-Motion>：按下鼠标左键并移动鼠标

表9-6　一些事件模块modifiers、types和details。一个事件模式是一个字符串，由符号<和>分隔，依次可以包含至多两个modifiers、一个types和一个detail

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09030.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09031.jpeg)

方法bind()的第二个参数为事件处理函数。该事件处理函数由开发人员定义，正好带一个参数：一个类型Event的对象。类Event定义在tkinter中。当发生了一个事件（例如按键），Python解释器将创建一个与事件相关联的类型Event的对象，并调用事件处理函数，把Event对象作为唯一的参数传递。

一个Event对象包含许多属性，用于存储导致该对象实例化的事件的相关信息。例如，对于一个按键事件，Python解释器将创建一个Event对象，并把按下的键的符号和（Unicode）编码赋值给属性keysym和keysym_num。

因此，在我们的keyLogger应用程序中，事件处理函数record()应该带一个输入参数：Event对象，读取存储在Event对象中的键符号和编码，并把它们显示在命令行中。结果将达到预期的行为：持续显示GUI用户键入的按键信息。

模块：keyLogger.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09032.jpeg)

根据事件类型，解释器会设置其他Event对象属性。表9-7显示了其中一些属性。表中还显示了导致每个属性被定义的事件类型。例如，一个ButtonPress事件将定义num属性，但一个KeyPress或者KeyRelease事件则不会。

表9-7　一些事件模块modifiers、types和details。其中显示了类Event的少数一些属性。同时也显示了产生该属性的事件。例如，所有的事件都会设置time属性

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09033.jpeg)

练习题9.5　在原始的day.py程序中，在输入框中键入日期后，用户必须单击按钮“Enter”。要求用户使用键盘键入内容后再使用鼠标不是太方便。请修改程序day.py，允许用户仅通过按键盘上【回车】键来代替鼠标单击按钮“Enter”。

注意事项：事件处理函数

tkinter中包含两种不同类型的事件处理函数。例如，函数buttonHandler()就是一个按钮Button组件单击事件的处理函数：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09034.jpeg)

定义函数buttonhandler()不能带任何输入参数。

函数eventHandler()可以按如下方式处理一个事件类型：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09035.jpeg)

函数eventHandler()的定义中必须带唯一一个输入参数，其类型为Event。