   

### 9.2.3　Entry组件

在下一个GUI示例中，我们引入了Entry组件类。它表示表单中常见的典型的单行文本框。我们要构建的GUI应用程序要求用户输入一个日期，然后计算与之对应的星期。要求GUI界面如图9-8所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09016.jpeg)

图9-8　星期应用程序。应用程序要求用户输入一个日期，格式为MMM DD,YYYY（例如，Jan 21,1967）

当用户在输入框中键入：Jan 21,1967，并单击【Enter】按钮后，弹出一个新窗口，如图9-9所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09017.jpeg)

图9-9　星期应用程序的弹出窗口。当用户输入日期并单击【Enter】按钮后，在弹出窗口中显示该日期对应的星期

很显然，GUI包含一个Label和一个Button组件。文本输入框则需要使用定义在tkinter中的Entry组件。Entry组件适合于输入（并显示）单行文本。用户可以在该组件中使用键盘键入文本。接下来我们开始实现该GUI：

模块：day.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09018.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09019.jpeg)

在第13行，我们创建了一个Entry组件。注意我们使用了方法grid()布局三个组件。剩余的工作是实现事件处理函数compute()。让我们先描述该函数的功能：

1.从输入框dateEnt中读取日期；

2.计算对应该日期的星期；

3.在弹出窗口中显示星期信息；

4.清空输入框dateEnt中的内容。

最后一步是一个不错的选择：我们清空刚刚键入的内容，以方便继续输入新的日期。

为了读取一个Entry组件中的字符串内容，可以使用Entry方法get()。它返回输入框中的文本。要清空一个Entry组件中的字符串，我们需要使用Entry方法delete()。一般而言，delete()方法用于删除Entry组件中的子字符串。因此delete()带两个参数：索引first和索引last，删除从索引first开始到索引last之前的子字符串。索引0和END（tkinter中定义的常量）可以用于删除一个输入框中的所有字符串。表9-4显示了其他Entry方法的用法。

表9-4　一些Entry方法。其中列举了类Entry的三个核心方法。常量END定义在tkinter中，指向输入框中最后一个文本之后的索引位置

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09020.jpeg)

基于Entry组件类的方法，我们现在可以实现事件处理函数compute()：

模块：day.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09021.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09022.jpeg)

在第9行，我们指定dateEnt是一个全局变量。虽然不是严格必须（在函数compute()中，我们没有赋值给dateEnt），但它是一个警告，维护代码的程序员会意识到dateEnt不是一个局部变量。

在第15行，我们使用模块time中的两个函数来计算对应一个日期的星期。函数strptime()带两个参数：一个包含日期（date）的字符串、一个格式化字符串（'%b %d,%Y'，使用表4-3中的指令）。函数strptime()返回一个类型为time.struct_time的日期对象。请回顾4.2节中的函数strftime()，带该类型的日期对象参数和一个格式化字符串参数（'%A'），并返回基于格式化字符串的日期。由于格式化字符串仅仅包括指令%A（指定星期），因此仅返回星期。

练习题9.4　实现GUI程序的一个修改版本：day2.py。替代在单独的弹出窗口显示星期信息，在输入框的前面插入星期信息，如图所示。另外，添加一个标有【Clear】文字的按钮，用于删除输入框中的内容。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09023.jpeg)