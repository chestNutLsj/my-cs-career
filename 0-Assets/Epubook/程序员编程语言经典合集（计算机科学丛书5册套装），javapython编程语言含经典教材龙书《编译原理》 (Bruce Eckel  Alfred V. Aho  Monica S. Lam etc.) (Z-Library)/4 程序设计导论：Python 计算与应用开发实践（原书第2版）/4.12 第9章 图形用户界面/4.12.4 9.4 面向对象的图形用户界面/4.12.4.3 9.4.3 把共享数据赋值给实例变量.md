   

### 9.4.3　把共享数据赋值给实例变量

为了进一步演示将一个GUI作为一个用户自定义组件类实现的封装优点，我们重新实现GUI应用程序draw.py。回顾发现此应用程序提供一个画布，用户可以使用鼠标在上面画图。原始的实现如下：

模块：draw.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09056.jpeg)

在最初的实现draw.py中，我们需要使用全局变量oldx和oldy来跟踪鼠标移动。这是因为事件处理函数begin()和draw()会引用它们。在作为一个新的组件类的重新实现中，作为替代，我们可以把鼠标坐标存储在实例变量中。

同样，因为canvas被事件处理函数draw()引用，我们同样需要把它作为实例变量：

模块：ch9.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09057.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09058.jpeg)

练习题9.9　重新实现绘图仪程序，将其作为一个用户自定义组件类，以封装绘图仪的状态（即画笔位置）。请仔细斟酌哪些组件需要赋值给实例变量。