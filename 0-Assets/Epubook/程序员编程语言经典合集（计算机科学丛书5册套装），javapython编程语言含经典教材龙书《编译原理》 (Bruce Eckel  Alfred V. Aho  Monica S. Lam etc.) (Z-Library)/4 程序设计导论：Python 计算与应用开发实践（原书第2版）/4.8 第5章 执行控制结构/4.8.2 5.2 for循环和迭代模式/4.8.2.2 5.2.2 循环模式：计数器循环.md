   

### 5.2.2　循环模式：计数器循环

我们可以使用的另一个循环模式是迭代通过函数range()指定的一个整数序列：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08371.jpeg)

我们把这种模式称为计数器循环模式。计数器循环模式用于需要针对某个整数范围的每个整数执行代码块的情况。例如，查找（并且输出）从0到整数n的所有偶数：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08372.jpeg)

练习题5.2　编写一个名为powers()的函数，带一个正整数n作为输入参数。在屏幕上输出从21到2n的所有2的乘幂。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08373.jpeg)

迭代一个连续整数序列的一个很常见的原因是生成序列的索引，不管序列是一个列表、字符串还是其他序列。下面使用一个新的宠物列表（pets）来说明：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08374.jpeg)

可以使用迭代循环模式来输出列表中的动物：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08375.jpeg)

作为迭代列表pets中项的替代方法，还可以通过迭代列表pets的索引来获得相同的结果：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08376.jpeg)

注意函数range()和函数len()协同工作，生成列表pets的索引0、1、2和3。循环的执行描述如图5-2所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08377.jpeg)

图5-2　计数器模式。在for循环中，变量i依次被赋值为0、1、2和3。对于每一个值i，输出列表对象pets[i]：当i为0时，输出'cat'，当i为1时，输出'dog'，以此类推

第二种方法（使用迭代列表索引）相对于遍历列表项的方法更复杂并且不直观。那么为什么要使用它呢？

的确存在必须按索引而不是按值迭代序列的情况。例如，考虑检查一个数值列表lst是否按递增顺序排序的问题。要做到这一点，必须检查列表中的每一个数值是否比下一个数值（如果存在下一个数值的话）要小。让我们通过遍历列表中的项来实现这个方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08378.jpeg)

我们被卡住了。应该如何将列表项与其后面的项比较呢？问题是我们无法获取列表lst中对象item之后的对象。

如果通过列表索引而不是列表项迭代列表，则有如下解决方法：索引i位置的项之后的项位于索引位置i+1：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08379.jpeg)

下一个要解决的问题是如何比较lst[i]和lst[i+1]。如果条件lst[i]<lst[i+1]为真，我们无需做任何处理，直接可以检查循环中的下一对相邻数据。如果条件为假（即lst[i]>lst[i+1]），则我们知道lst不可能为升序排列，因此可以直接返回False。所以，我们只需要在for循环中增加一条单分支if语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08380.jpeg)

在上述循环中，变量i被赋值为列表lst的索引。对于i的每一个值，我们检查位置i的对象是否大于或等于位置i+1的对象。如果满足条件，则返回False。如果for循环终止，则意味着列表lst中所有相邻的两个对象都按升序排列，因此整个列表按升序排列。

事实证明我们在这个代码中犯了一个错误。注意，我们依次比较在索引0和1、1和2、2和3，直到索引len(lst)-1和len(lst)位置的项。但是在索引len(lst)位置不存在项。换言之，我们无需把最后一个列表项与列表中的“下一个项”进行比较。我们需要做的是把for循环迭代的范围缩小1。

下面是最终的函数形式的解决方案。函数带一个列表作为输入参数。如果列表不是升序排列，则返回True；否则返回False。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08381.jpeg)

模块：ch5.py

练习题5.3　编写函数arithmetic()，带一个整数列表作为输入参数。如果这些整数构成一个等差数列（如果一个整数列表中连续两个项目的差相同，则这个整数系列称为等差数列），则返回True；否则返回False。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08382.jpeg)