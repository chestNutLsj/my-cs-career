   

### 5.5.3　循环模式：循环和折半

当程序必须重复处理一些输入值直到一个标志到达时，应该使用while循环。（标志是用于指示输入结束的任意值）。

更具体地说，考虑开发一个函数cities()，重复地请求用户输入城市名称（即字符串），并存储在一个列表中。用户通过输入空字符串指示输入的结束，此时函数返回用户输入的所有城市的列表。期望的运行结果如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08446.jpeg)

如果用户没有输入任何城市，则返回一个空的列表：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08447.jpeg)

显然，函数cities()应该使用循环来实现，在每次迭代中以交互方式请求用户输入一个城市。由于事先不知道迭代次数，我们需要使用while循环。while循环的条件应该检查用户是否输入空字符串。这意味着在进入while循环之前，用户应该被要求输入第一个城市。当然，在while循环的每一次迭代中也会要求用户输入一个城市：

模块：ch5.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08448.jpeg)

请注意，该函数使用累加器循环模式将城市累积到列表中。

在函数cities()中，有两次input()函数的调用：一次在while循环语句之前，一次在while循环中的代码块中。消除这些“冗余”语句并使代码更直观的一种方法是使用无限循环，在while循环的主体内使用一个if语句。if语句将测试用户是否输入了标志值：

模块：ch5.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08449.jpeg)

执行函数cities2()时，while循环的最后一次迭代是当用户输入了空字符串。在这次迭代中，只执行for循环的“一半”：跳过语句lst.append(city)。因此，cities2()中的循环模式通常被称为循环和折半（loop-and-a-half）模式。