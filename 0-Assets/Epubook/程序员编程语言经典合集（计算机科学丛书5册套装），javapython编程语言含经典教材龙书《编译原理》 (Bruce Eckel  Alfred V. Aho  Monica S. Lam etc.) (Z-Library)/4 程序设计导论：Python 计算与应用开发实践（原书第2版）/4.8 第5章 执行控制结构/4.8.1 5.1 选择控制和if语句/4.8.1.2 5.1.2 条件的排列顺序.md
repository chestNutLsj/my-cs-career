   

### 5.1.2　条件的排列顺序

多路分支结构存在一个单分支或双分支if语句不存在的问题：在多路if语句中条件的排列顺序十分重要。为了说明这一点，请读者尝试分析下列temperature()函数实现中条件的排列顺序有什么错误。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08362.jpeg)

该实现的问题在于：对于所有t大于或等于32的情况，都将输出'It is cool.'。因此，如果t等于104，结果输出'It is cool.'。事实上，不管t的值多大，永远都不会输出'It is hot!'。问题的根源在于条件t>32和t>86并不是互斥的，而双分支结构中对应语句块的条件则是互斥的。

修正错误实现的一种方法是显式保证条件互斥：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08363.jpeg)

然而，显式指定互斥条件会让程序变得非常复杂臃肿。另一种修正这种错误实现的方法是隐式保证条件互斥，正如我们最初的函数temperature()的实现方式。解释如下：

temperature()函数包括三个不同的代码片段，每个对应于一个特定的温度范围：t>86[^1]、32°F<t<=86°F和t<=32°F。其中一个范围必须作为三路分支if语句的第一个条件，例如：t>86。

在三路分支if语句中，仅当第一个条件不满足时（即：t的值不大于86），才会继续测试后续条件。因此，任何后续条件隐式包括t<=86。所以，显式指定的第二个条件实际上等同于32<t<=86。同样地，else语句的隐式条件是t<=32，因为仅当t最多为32时才会被执行。

练习题5.1　编写函数myBMI()，带两个输入参数：身高（单位：英寸）和体重（单位：磅），计算人体体重指数（BMI）。BMI的计算公式为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08364.jpeg)

要求函数体中：当bmi<18.5时，输出“体重过轻”；当18.5<=bmi<25时，输出“正常”；当bmi>=25时，输出“体重过重”。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08365.jpeg)

[^1]: /9。