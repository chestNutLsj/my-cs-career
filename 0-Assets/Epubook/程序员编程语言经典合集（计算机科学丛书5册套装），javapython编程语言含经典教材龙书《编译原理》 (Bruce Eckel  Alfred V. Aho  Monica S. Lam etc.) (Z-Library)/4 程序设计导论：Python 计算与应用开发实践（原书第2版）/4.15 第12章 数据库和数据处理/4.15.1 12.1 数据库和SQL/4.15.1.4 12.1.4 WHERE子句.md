   

### 12.1.4　WHERE子句

为了回答类似如“单词X出现在哪一页？”的问题，我们需要执行一个数据库查询，只选择表中的一些记录（即那些满足某个条件的记录）。SQL WHERE子句可以添加到SELECT语句中，用于按条件选择记录。例如，要选择包含“Paris”的Web页面的URL，可以使用下列SQL语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09311.jpeg)

返回的结果集如图12-4a所示。注意，SQL中的字符串值同样适用引号作为分隔符（和Python一样）。一般地，带WHERE子句的SELECT语句的语法格式如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09312.jpeg)

条件column operator value限制SELECT语句仅仅应用于满足该条件的行。条件中允许的运算符如表12-1所示。条件可以包含在括号中，可以使用逻辑运算符AND和OR结合两个或者多个条件。注意：使用BETWEEN运算符时，WHERE子句稍微有些不同，其语法格式如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09313.jpeg)

图12-4　两个查询的结果表。a显示了在表Keywords中包含单词“Paris”的页面的超链接。b根据单词的出现频率按降序显示包含单词“Paris”的网页排名

假设我们希望图12-4a中的结果集按单词“Paris”在Web网页中的出现频率排序。换言之，假设问题是：“根据网页中字符串X出现的次数，包含单词X的网页的排名是什么？”要在结果集中按特定列的值排序，可以使用关键字ORDER BY：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09314.jpeg)

上述语句返回如图12-4b所示的结果集。关键字ORDER BY后跟一个列名；选择的记录将根据该列中的值排序。默认情况下是升序。在上述语句中，我们用关键字DESC（表示“降序”）获得一个排序，将出现“Paris”最多次数的网页排在最前面。

表12-1　SQL条件运算符。条件可以包含在括号中，可以使用逻辑运算符AND和OR结合两个或者多个条件

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09315.jpeg)

练习题10.1　编写返回下列结果的SQL查询语句：

（a）包含指向Web页面four.html的所有网页的URL。

（b）包含从网页four.html导入链接的所有网页的URL。

（c）单词在网页中出现正好三次的网页的URL和单词。

（d）单词在与URL相关联的网页中出现正好三次到五次的网页的URL、单词和出现频率。