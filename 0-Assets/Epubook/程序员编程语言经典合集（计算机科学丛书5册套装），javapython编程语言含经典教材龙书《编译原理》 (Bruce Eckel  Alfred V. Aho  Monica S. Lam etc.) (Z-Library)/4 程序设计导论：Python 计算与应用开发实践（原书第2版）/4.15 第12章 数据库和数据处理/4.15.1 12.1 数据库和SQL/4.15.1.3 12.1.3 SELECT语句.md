   

### 12.1.3　SELECT语句

SQL的SELECT语句用于查询数据库。在其最简单的形式中，该语句用于检索数据库表的列。例如，要从表Hyperlinks中检索列Link，其SQL语句如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09302.jpeg)

上述语句的执行结果将存储在一个结果表（又称之为一个结果集），如图12-3a所示。

我们使用大写字符来突出显示SQL语句中的关键字。其实SQL语句是不区分大小写的，所以我们也可以使用小写字符。通常，SQL的SELECT语句从表中检索列的子集，其语法格式如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09303.jpeg)

例如，要选取表Keywords的列Url和Word，可以使用下列SQL语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09304.jpeg)

获得的结果表如图12-3b所示。要抽取表Keywords的所有列，可以使用通配符*：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09305.jpeg)

结果表从图12-2a所示的原始表Hyperlinks中获取数据。

当执行下列查询时：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09306.jpeg)

我们所获得的结果集包含同一个链接的多个副本。如果需要抽取列Link中的不重复链接，则可以使用SQL的DISTINCT关键字：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09307.jpeg)

其结果表如图12-3c所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09308.jpeg)

图12-3　三个查询的结果表。每个表都是其下面查询语句的结果。a包含表Hyperlinks中的所有Link值。b包含表Keywords中的所有Url和Word值。c包含表Hyperlinks中的所有不重复的Link值

知识拓展：开始学习SQL语言

在下一节中，我们将介绍Python标准库模块sqlite3。它提供了一个应用程序编程接口（API），使Python程序能够访问数据库文件并在其上执行SQL命令。

如果你迫不及待想尝试运行我们刚才描述的SQL查询，你可以使用SQLite命令行。它是一个独立的程序，允许交互式地对数据库文件执行SQL语句。不过，首先需要从下列网址下载预编译的二进制程序：

[www.sqlite.org/download.html](XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX)  

将二进制可执行文件保存在包含要使用的数据库文件的那个目录中。接下来我们基于数据库文件links.db（图12-2显示了其中包含的两张表），说明SQLite命令行的使用方法，所以我们把可执行文件保存在包含该文件的目录中。

为了运行SQLite命令行，首先需要打开系统中的命令行程序。然后切换到包含sqlite3可执行文件的目录，并运行下列代码以访问数据库文件links.db：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09309.jpeg)

（此代码适用于Unix/Linux/Mac OS X系统；在MS Windows系统中，应该使用命令sqlite3.exe links.db。）

在SQLite>提示符下，接下来可以针对数据库文件links.db执行SQL语句。唯一的附加要求是SQL语句必须紧跟一个分号（;）。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09310.jpeg)

（省略了几行输出。）你可以使用SQLite命令行执行本节描述的每一个SQL语句。