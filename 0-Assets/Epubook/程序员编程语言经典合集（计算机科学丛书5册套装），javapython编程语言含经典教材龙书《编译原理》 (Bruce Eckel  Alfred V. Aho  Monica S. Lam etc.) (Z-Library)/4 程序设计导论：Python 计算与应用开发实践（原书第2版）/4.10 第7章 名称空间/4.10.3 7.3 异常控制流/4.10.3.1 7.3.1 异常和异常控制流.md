   

### 7.3.1　异常和异常控制流

错误对象被称为异常，因为当创建错误对象时，程序的正常执行流（例如，程序流程图描述的流程）被中断，执行切换到所谓的异常控制流（流程图通常不会描述，因为它不是正常程序执行过程的一部分）。默认的异常控制流是终止程序，并输出包含在异常对象中的错误信息。

我们使用7.1节中定义的函数f()、g()和h()来说明。在图7-2中，我们描述了函数调用f(4)的正常执行流。在图7-10中，我们描述了从命令行中执行函数调用f(2)时发生的情况。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08693.jpeg)

图7-10　f(2)的执行过程。在命令行中，函数调用f(2)的正常执行控制流显示为实线箭头：f(2)调用g(1)，然后g(1)调用h(0)。当尝试对表达式1/n=1/0求值时，将抛出一个ZeroDivisionError异常。正常执行控制流被终止：函数调用h(0)不会继续运行完成，g(1)和f(2)也不会继续运行完成。异常控制流显示为虚线箭头。不会执行的语句显示为灰色。由于调用f(2)被终止，因此在命令行输出错误信息

程序执行一直正常，直到函数调用h(0)。在h(0)的执行过程中，n的值为0。因此，当对表达式1/n求值时，产生了错误状态。解释器抛出ZeroDivisionError异常，并创建一个包含该错误信息的ZeroDivisionError异常对象。

当抛出异常时，默认的行为是终止发生错误的函数调用。因为错误发生在执行h(0)时，因此h(0)的执行被中断。然而，错误同样发生在函数调用g(1)和f(2)的执行过程中，因此这两个函数也同样被中断。因此，图7-10中显示为灰色的语句永远不会被执行。

当执行返回到命令行时，在命令中输出异常对象中包含的信息：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08694.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08695.jpeg)

除了错误类型和友好的错误消息之外，输出还包括一个回溯（traceback），它包括因错误而中断的所有函数调用。