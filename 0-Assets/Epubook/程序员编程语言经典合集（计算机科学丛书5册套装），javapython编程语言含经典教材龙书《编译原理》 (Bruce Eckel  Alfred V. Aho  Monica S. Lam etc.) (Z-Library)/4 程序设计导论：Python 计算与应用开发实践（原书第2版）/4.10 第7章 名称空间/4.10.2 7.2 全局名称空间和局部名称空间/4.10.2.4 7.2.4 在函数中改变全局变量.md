   

### 7.2.4　在函数中改变全局变量

在最后一个例子中，我们考虑如下情况：假设在模块scope1中的函数f()中，语句a=0的目的是修改全局变量。正如前面所述，在模块scope1中，函数f()中的语句其实会创建一个新的同名局部变量。如果我们的目的是让函数修改一个全局变量，则必须使用保留关键字global来指明一个名称是全局名称。我们使用下面模块来解释关键字global：

模块：scope3.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08689.jpeg)

在第三行中，赋值语句a=6把全局变量a修改为6，因为语句global a指定名称a是全局变量而不是局部变量。上述概念描述如图7-9所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08690.jpeg)

图7-9　关键字global。在f(3)的执行过程中，执行了赋值语句a=6。因为名称a被定义为指向全局名称a，因此全局变量a被赋值。在函数调用的局部名称空间中没有创建名称a

当运行该模块时，修改后的全局变量a被用于计算f(3)：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08691.jpeg)

练习题7.2　请指出如下模块中的每个名称的作用范围，是全局名称还是f(x)或g(x)的局部名称。

模块：fandg.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08692.jpeg)