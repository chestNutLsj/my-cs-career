   

### 4.1.3　字符串方法

字符串类中提供了数量众多的方法，这些方法为开发人员提供了文本处理的工具集，可以简化文本应用程序的开发过程。接下来我们将讨论其中一些常用的字符串方法。

方法find()。在字符串s上使用一个输入参数target调用find()方法时，该方法将检查target是否是s的子字符串。如果是，则返回字符串target第一次出现的位置索引（第一个字符位置）；否则返回-1。例如，在字符串message中使用目标字符串'top secret'调用方法find()的方式如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08209.jpeg)

方法find()的输出结果为16，因为'top secret'在字符串message中出现的位置从索引16开始。

方法count()。当使用输入参数target在字符串s上调用count()方法时，结果返回target作为子字符串在字符串s中出现的次数。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08210.jpeg)

结果返回2，因为字符串'top secret'在message中出现了2次。

方法replace()。在字符串s上调用replace()时带old和new两个输入参数，输出结果为s字符串的一个副本，其中所有的子字符串old都被替换为字符串new。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08211.jpeg)

上述操作是否修改了字符串message？让我们验证一下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08212.jpeg)

因此字符串message并没有被replace()方法修改。结果返回的是相应子字符串被替代后的message的副本。返回的字符串随后即无法访问，这是因为没有为其赋予一个变量名。通常，replace()方法一般按下列方式在赋值语句中使用：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08213.jpeg)

请回忆一下，字符串是不可变类型（即不能被更改）。这就是调用字符串方法replace()返回一个更改后的字符串副本，而不是直接更改原字符串的原因。在下一个例子中，我们将展示其他一些返回更改后的字符串的方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08214.jpeg)

方法capitalize()和方法upper()。在字符串s上调用capitalize()时，该方法把字符串s的第一个字符大写；而方法upper()则把所有的字符大写。

方法split()。该方法非常有用，在字符串上调用时可以获取字符串的单词列表：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08215.jpeg)

在上述语句中，方法split()使用字符串'this is the text'中的空格创建子字符串并构成一个列表返回。方法split()还可以带一个分隔符字符串作为输入参数来调用：分隔符字符串用于代替空格来拆分字符串。例如，要把下列字符串拆分成数值列表：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08216.jpeg)

可以使用';'作为分隔符：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08217.jpeg)

方法translate()。该方法用于基于字符到字符的映射表把一个字符串中的某些字符替换为另一些字符。映射表使用一种特殊的字符串方法来构造，其调用不是通过字符串对象，而是直接使用str类本身：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08218.jpeg)

变量table表示字符a、b、c、d、e、f到字符u、v、w、x、y、z的“映射”关系。我们将在第6章深入讨论这种映射关系。目前，读者只需要理解其用作方法translate()的一个参数：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08219.jpeg)

方法translate()返回的字符串是根据table描述的映射关系替换对应字符后的字符串副本。在最后一个例子中，d和e分别被替换为x和y，其他的字符则保持不变，因为在映射表table中没有包括其他字符。

表4-1列举了部分字符串方法。还有更多的方法，可以使用help()工具查看全部方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08220.jpeg)

表4-1　字符串方法。注意，表中仅列举了一些常用的字符串方法。由于字符串是不可变类型，所以这些方法都不会改变字符串s的值。方法count()和find()返回一个整数，方法split()返回一个列表，其他方法则（通常）返回字符串s的一个修改后副本

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08221.jpeg)

练习题4.2　假设变量forecast被赋值为如下字符串：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08222.jpeg)

请根据如下赋值语句描述，编写Python语句：

（a）把变量count赋值为字符串'day'在字符串forecast中出现的次数。

（b）把变量weather赋值为子字符串'sunny'在字符串forecast中出现的索引位置。

（c）把变量change赋值为字符串forecast的一个副本，其中所有的子字符串'sunny'都被替换为'cloudy'。