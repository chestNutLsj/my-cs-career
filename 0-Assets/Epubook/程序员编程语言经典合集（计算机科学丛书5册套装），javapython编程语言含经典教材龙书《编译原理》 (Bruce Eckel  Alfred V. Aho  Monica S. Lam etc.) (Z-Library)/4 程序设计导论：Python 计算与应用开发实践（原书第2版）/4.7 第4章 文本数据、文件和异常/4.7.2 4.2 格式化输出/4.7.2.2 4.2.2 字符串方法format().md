   

### 4.2.2　字符串方法format()

print()函数调用中增加sep参数可以在输出值之间插入相同的分隔符。但是，插入相同的分隔符有时候不能满足实际需求。考虑如下情况，给定各个日期和时间变量，如果希望按照日期时间格式输出：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08234.jpeg)

如果希望使用上述变量作为输入参数调用函数print()，并输出如下格式内容：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08235.jpeg)

很显然，我们使用分隔符无法获取这种输出。实现这种输出的一种方式是使用字符串拼接构造正确的格式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08236.jpeg)

啊，出错了。在str(second)之前遗漏了一个+号。尽管补充+号就可以修复（请时刻检查输入内容，确保无误！），但我们并不满意。犯错的主要原因在于所采用的方法十分枯燥且容易出错。还有一个更加简单更加灵活的格式化输出方法。字符串（str）类提供了一个强大的类方法format()用于此目的。

format()方法在一个表示输出的格式的字符串上调用。format()函数的参数是要输出的对象。为了说明format()函数的用法，我们使用一个简化的日期和时间格式的例子（仅仅输出时间）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08237.jpeg)

要输出的对象（hour、minute和second）是format()方法的参数。调用format()函数的字符串（即'{0}:{1}:{2}'）是格式化字符串，用来描述输出格式。花括号外面的所有字符（即两个冒号（':'））将直接被输出。花括号{0}、{1}和{2}是占位符，对应于要输出的对象。数值0、1和2显式指定这些占位符分别对应format()函数调用的第一个、第二个和第三个参数。示意图请参见4-2。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08238.jpeg)

图4-2　输出格式化。format()函数的参数值在由花括号占位符指定的位置输出

图4-3描述了改变上例中索引0、1和2后会发生什么情况：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08239.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08240.jpeg)

图4-3　显式占位符映射

默认情况下，如果在花括号中没有显式指定数值，则从左到右第一个占位符对应于format()函数的第一个参数，第二个占位符对应于第二个参数，以此类推，如图4-4所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08241.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08242.jpeg)

图4-4　默认占位符映射

让我们回到最初输出日期和时间的目标上。我们需要的格式化字符串为：'{},{}{},{}at{}:{}:{}'，假设调用format()函数依次传入的变量为weekday、month、day、year、hours、minutes和seconds。

测试检验如下（有关变量和占位符的映射关系描述，请参见图4-5）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08243.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08244.jpeg)

图4-5　日期和时间变量到占位符的映射关系

练习题4.5　假设变量first、last、street、number、city、state和zipcode均已经被赋值。编写一个打印语句，生成一个邮件标签：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08245.jpeg)

假设：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08246.jpeg)