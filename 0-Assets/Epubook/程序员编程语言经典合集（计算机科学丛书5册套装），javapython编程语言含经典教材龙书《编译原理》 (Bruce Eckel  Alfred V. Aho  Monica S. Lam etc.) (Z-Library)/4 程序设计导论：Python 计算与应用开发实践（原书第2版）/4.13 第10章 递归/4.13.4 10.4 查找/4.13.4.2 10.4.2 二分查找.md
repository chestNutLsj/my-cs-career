   

### 10.4.2　二分查找

如果列表中的数据是可比较的，我们可以首先对列表进行排序，从而提高查找运行时间。为了说明这一点，我们使用线性查找中使用的同一列表lst，但已经排好了序：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09172.jpeg)

假设我们在列表lst中查找值target。线性查找把target与lst中的索引0的项比较，然后与索引1、2、3的项比较，以此类推。假设我们首先将target与索引i的项比较（lst的任意索引i）。有三种可能的结果：

·lst[i]==target为true，很幸运，查找到目标

·target< li="">

·target>lst[i]为true

让我们做一个实验。假设target的值为45，我们将它与索引5中的项（即24）进行比较。显然，在这种情况下出现第3个结果“target>lst[i]”。因为列表lst是排好序的，这告诉我们target不可能位于24的左侧（即子列表lst[0:5]）。因此，我们应该继续在24的右侧（即子列表lst[6:17]）中查找target，如图10-13所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09173.jpeg)

图10-13　二分查找。通过把target的值45与lst的索引5的项进行比较，我们把搜索空间缩减到子列表lst[6:]

我们得出主要见解如下：只需把target和list[5]进行一次比较，我们就把搜索空间从17个列表项缩减到11个。（在线性查找中，一次比较缩减搜索空间一个列表项。）现在我们应该问问自己不同的比较是否会进一步缩减搜索空间。

在某种意义上，target>lst[5]的结果并不理想：因为target位于lst[0:5]（包含5个项）和lst[6:17]（包含11个项）中的较大的一侧。为了减少运气的作用，我们可以确保子列表大小基本相同。我们可以通过把target和42（即列表中间的项目（也称为中位数））比较来实现这一目标。

我们刚刚得到的见解是一种叫作二分查找的搜索技术的基础。给定一个列表和一个目标，二分查找返回列表中目标的索引，如果目标不在列表中，则返回-1。

二分查找很容易采用递归实现。基本情况是当列表lst为空时，target不可能在其中，因此返回-1。否则，我们将目标与列表中位数进行比较。根据比较的结果，我们要么完成查找，要么继续在lst的子列表上递归查找。

我们把二分查找实现为一个递归函数search()。因为递归函数在原始列表lst的子列表lst[i:j]上调用，因此函数search()带四个输入参数，除了lst和target，还包含索引i和j：

模块：ch10.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09174.jpeg)

一开始在lst中查找target时，应该使用索引0和len(lst)：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09175.jpeg)

图10-14描述了二分查找的执行流程。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09176.jpeg)

图10-14　二分查找。查找45从列表lst[0:17]开始。把45与中位数（42）比较后，继续在子列表lst[9:17]中查找。把45与子列表的中位数（72）比较后，继续在子列表lst[9:12]中查找。由于45是lst[9:12]的中位数，查找结束