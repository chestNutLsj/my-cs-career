   

### 10.2.2　分形图形

在下一个递归示例中，我们同样将输出一个模式，但这一次将是一个由Turtle图形对象绘制的图形模式。对于每一个非负整数n，输出的模式将是一条被称为科赫曲线（Koch curve）的曲线Kn。例如，图10-4显示了科赫曲线K5。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09115.jpeg)

图10-4　科赫曲线K5。科赫曲线是一种分形曲线，类似于雪花图案

我们将使用递归来绘制科赫曲线（例如，K5）。为了开发用来绘制这一曲线和其他科赫曲线的函数，我们先观察几条科赫曲线。科赫曲线K0、K1、K2、K3显示在图10-5的左侧。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09116.jpeg)

图10-5　带绘图指令的科赫曲线。在左侧，从上到下是科赫曲线K0、K1、K2、K3。图中还显示了科赫曲线K0、K1和K2的绘图指令。指令是用字母F、L和R来编码的，分别对应于“向前移动”“向左旋转60度”和“向右旋转120度”

如果仔细查看这些模式，你可能会注意到每条科赫曲线Ki（对于i>0）都包含了科赫曲线Ki-1的几个副本。例如，曲线K2包含曲线K1的四个（较小版本的）副本。

更确切地说，绘制科赫曲线K2，Turtle图形对象应该遵循如下指令：

1.绘制科赫曲线K1；

2.向左旋转60度；

3.绘制科赫曲线K1；

4.向右旋转120度；

5.绘制科赫曲线K1；

6.向左旋转60度；

7.绘制科赫曲线K1。

注意，这些指令是递归描述的。这表明我们需要做的是开发一个递归函数koch(n)，带一个非负整数n作为输入参数，并返回一系列指令，Turtle对象使用这些指令绘制科赫曲线。指令可以被编码为包含字母F、L和R的字符串，分别对应于“向前移动”“向左旋转60度”和“向右旋转120度”的指令。例如，绘制科赫曲线K0、曲线K1和K2的指令如图10-5所示。函数koch()的运行结果如下所示：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09117.jpeg)

基于上述观察结果，接下来将通过开发使用绘制曲线K1来绘制曲线K2领悟的思想，理解绘制曲线K2的指令（调用函数koch(2)的计算结果）如何使用绘制曲线K1的指令（调用函数koch(1)的计算结果）来获得。如图10-6所示，绘制曲线K1的指令在绘制曲线K2的指令中出现了四次：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09118.jpeg)

图10-6　koch(2)的输出结果。koch(1)可以用来构造Koch(2)的输出

同样，绘制曲线K1的指令（koch(1)的输出）包含绘制曲线K0的指令（koch(0)的输出），如图10-7所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09119.jpeg)

图10-7　koch(1)的输出结果。koch(0)可以用来构造koch(1)的输出

接下来我们可以使用递归方法实现函数koch()。基本情况对应于输入0，此时函数仅输出指令'F'：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09120.jpeg)

对于输入n>0，我们总结如图10-6和图10-7的观察结果，koch(n)的输出应该为如下字符串拼接结果：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09121.jpeg)

于是函数koch()定义如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09122.jpeg)

如果测试这个函数，你会发现结果正确。然而，这种实现存在效率问题。在最后一行，我们针对同一个输入调用了四次函数koch()。当然，每次返回的值（指令）是相同的。这种实现方法非常浪费资源。

注意事项：避免重复相同的递归调用

通常，一个递归的解决方案最自然的描述方法是使用几个相同的递归调用，正如我们刚刚在递归函数koch()中所示。作为在同一个输入上重复调用相同的函数的替代，我们可以调用一次，然后多次重复使用它的输出结果。

函数koch()的更好实现代码如下：

模块：ch10.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09123.jpeg)

我们最后要做的工作是开发一个函数，基于函数koch()返回的指令，使用海龟图形对象绘制相应的科赫曲线。代码如下：

模块：ch10.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09124.jpeg)

我们进一步解释第11行代码。值300/3**n是海龟向前移动的长度。它取决于n的值，因此，不管n的值是什么，科赫曲线的宽度为300像素，并适应屏幕。请检查n等于0和1的情况。

知识拓展：科赫曲线和其他分形图形

科赫曲线Kn在1904年由瑞典数学家海里格·冯·科赫（Helge von Koch）发表的论文中首先提出。他对当n趋向于∞时得到的曲线K∞特别感兴趣。

科赫曲线是分形图形的一个例子。分形图形（fractal）一词由法国数学家本华·曼德布洛特（Benoît Mandelbrot）于1975年发明，指代具有下列特征的曲线：

·形状“分段”而不是平滑；

·自我相似（即在不同的放大倍数下它们看起来是一样的）；

·可以自然地使用递归来描述。

物理的分形（通过递归的物理过程而形成）出现在自然界中，例如雪花、冷玻璃上的冰晶体、闪电、云、海岸线和河流系统、菜花和西兰花、树和蕨类植物、血液和肺血管。

练习题10.5　实现函数snowflake()，带一个非负整数n作为输入参数，按下列方式组合三条科赫曲线Kn以输出一个雪花模式：当海龟图形对象完成绘制第一条科赫曲线后，海龟旋转120度后绘制第二条科赫曲线，海龟向右旋转120度绘制第三条科赫曲线。下图显示了snowflake(4)的输出结果：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09125.jpeg)