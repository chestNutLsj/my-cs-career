   

### 10.1.5　递归函数调用和程序栈

在使用递归练习解决问题之前，我们继续仔细研究递归函数执行时会发生什么。这样做可以帮助我们认识到递归确实起作用了。

我们讨论当输入n=3124时执行函数vertical()时发生了什么。在第7章中，我们讨论了名称空间和程序栈如何支持函数调用以及程序的正常控制流程。图10-1显示了执行vertical(3124)时，递归函数的执行顺序、关联的名称空间和程序栈的状态。

模块：ch10.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09101.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09102.jpeg)

图10-1　递归函数执行。vertical(3124)在一个名称空间中执行，其中n为3124。在调用vertical(312)之前，名称空间中的值3124和要执行的下一行代码（第7行）存储在程序栈。然后在一个新的名称空间中执行vertical(312)，其中n为312。在递归调用vertical(31)和vertical(3)之前，同样会增加栈帧。调用vertical(3)在一个新的名称空间中执行，其中n为3，输出3。当vertical(3)终止后，恢复vertical(31)的名称空间：n为31，第7行的语句print(n%10)输出1。同样，恢复vertical(312)和vertical(3124)的名称空间

图10-1和第7章的图7-5的执行流程的区别在于：在图10-1中，调用同一个函数——函数vertical()调用vertical()，再递归调用vertical()，再递归调用vertical()。在图7-5中，函数f()调用g()，而g()调用h()。因此，图10-1强调名称空间与每个函数调用相关联，而不是与函数本身相关联。