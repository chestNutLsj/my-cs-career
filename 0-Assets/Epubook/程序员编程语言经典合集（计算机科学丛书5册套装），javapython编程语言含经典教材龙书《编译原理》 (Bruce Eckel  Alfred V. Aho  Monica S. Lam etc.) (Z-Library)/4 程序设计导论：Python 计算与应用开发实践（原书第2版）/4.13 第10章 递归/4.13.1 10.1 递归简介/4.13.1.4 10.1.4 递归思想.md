   

### 10.1.4　递归思想

我们使用递归的思想开发递归函数vertical()，带一个非负的整数作为输入参数，从高位到低位依次输出其各位数字，垂直排列。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09092.jpeg)

为了将vertical()开发为递归函数，我们需要做的第一件事是决定递归的基本情况。这通常是通过回答一个问题来实现的：何时垂直输出数会比较容易？对于什么样的非负数？

如果输入的n只有一个个位数问题最容易解决。在这种情况下，我们只需要输出n本身：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09093.jpeg)

因此我们确定了基本情况为n<10。我们开始实现函数vertical()：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09094.jpeg)

当n小于10（即n只有一位）时，函数vertical()输出n。

确定了基本情况之后，我们考虑输入n为两位数或多位数的情况。在这种情况下，我们将把垂直输出数字n的问题分解为“更简单的”子问题，包括垂直输出比n“更小”的数。在这个问题中，“更小”应该更接近于基本情况（一位数字）。这就意味着递归调用必须在比n位数更少的数上进行。

分析结果可以引出以下算法：由于n至少有两位数字，所以我们分解问题：

a.移除n的最后一位数后垂直输出。这个数“更小”，因为其位数少一位。对于n=3124，这意味着在312上调用函数vertical()。

b.输出最后一位数。对于n=3124，这意味着输出4。

最后要确定的是计算用的数学公式：（1）求n的最后一位数字；（2）求去掉最后一位数字的数。求最后一位数可以使用余数运算符（%）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09095.jpeg)

“移除”n的最后一位数可以使用整数除法运算符（//）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09096.jpeg)

基于上述思考的所有片断，我们可以编写如下完整的递归函数：

模块：ch10.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09097.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09098.jpeg)

练习题10.1　实现递归函数reverse()，带一个非负整数作为输入参数，垂直输出其数字，从低位到高位依次输出其各位数字。

我们总结递归解决该问题的过程：

1.首先确定问题的基本情况（或者无须递归就可以直接解决的情况）。

2.确定如何把问题分解为一个或多个更接近基本情况的子问题，子问题通过递归的方法解决。利用子问题的求解方案构造原始问题的求解方案。

练习题10.2　使用递归思想实现递归函数cheers()，带一个整数n作为输入参数，输出n个字符串'Hip '，后跟'Hurray!!!'。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09099.jpeg)

递归的基本情况应该是n=0，此时函数输出'Hurray!!!'。当n>1时，函数应该输出'Hip '，然后在输入参数n-1上递归调用自身。

练习题10.3　在第5章，我们使用迭代的方法实现了函数factorial()。很显然，阶乘函数n!的递归定义如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09100.jpeg)

使用递归重新实现函数factorial()。同时，对于某个输入值n>0，请估计调用了多少次函数factorial()。