   

### 2.5.2　fractions模块

fractions模块引入了一种新的数值类型：分数类型。分数类型用于表示分数，执行有理数算术运算，例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08004.jpeg)

要使用fractions模块，必须先导入该模块：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08005.jpeg)

要创建一个分数对象，可以使用Fraction()构造函数并带两个参数：分子和分母。定义分数3/4和1/2的方法如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08006.jpeg)

注意，必须指定类Fraction的位置（位于fractions模块）。表达式a的计算结果如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08007.jpeg)

注意，a的计算结果不是0.75。

和其他数值一样，Fraction对象可以相加，结果是一个Fraction对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08008.jpeg)

那么，float类型和fractions.Fraction有什么区别呢？前面我们提到，float值使用有限的位数（通常为64位）存储在计算机中。这意味着float对象可以存储的值的范围有限制。例如，0.51075无法存储为一个float值，因此其运算结果为0：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08009.jpeg)

然而，fractions.Fraction对象可以表示的值的范围则非常大（仅受限于内存大小，和int类型一样）。所以可以使用如下方式很容易地计算(1/2)1075：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08010.jpeg)

那为什么不一直使用fractions.Fraction类型呢？这是因为包括float值的表达式的计算速度要远远高于包含fractions.Fraction值的表达式的计算速度。