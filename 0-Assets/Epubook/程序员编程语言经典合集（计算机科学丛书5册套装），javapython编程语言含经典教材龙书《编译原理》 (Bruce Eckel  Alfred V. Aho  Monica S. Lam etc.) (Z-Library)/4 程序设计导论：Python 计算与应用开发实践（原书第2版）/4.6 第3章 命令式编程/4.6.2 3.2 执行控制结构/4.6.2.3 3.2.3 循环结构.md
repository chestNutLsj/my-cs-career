   

### 3.2.3　循环结构

在第2章中，我们介绍了字符串和列表。两者都是对象序列。字符串可以被视为字符的序列；列表是任何类型（字符串、数值甚至其他列表）的对象的序列。所有序列的一个共同任务是对序列中的每个对象执行同一操作。例如，通过联系人列表，可以向附近的联系人发送聚会邀请；或者，通过一个购物清单列表来检查你购买的东西；再或者，读入一串表示姓名的字符并按单个字母来拼写姓名。

我们使用上述最后一个例子作为程序示例。假设我们想实现一个简短的程序，逐个输出用户输入的字符串中所包含的每个字符：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08061.jpeg)

程序首先要求用户输入一个字符串。然后输出“The word spelled out:”，随后逐行输出用户输入的字符串中包含的每个字符。程序的实现可以从如下两行语句开始：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08062.jpeg)

为了实现该程序，我们需要一种方法，允许针对字符串变量name中包含的每一个字符执行一次print()语句。Python语言的for循环语句可以用来完成这个任务。实现该功能的程序如下所示：

模块：spelling.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08063.jpeg)

for循环语句包含程序的第四行和第五行。在第四行中，char是一个变量名。for循环语句将把字符串变量name中包含的每个字符依次赋值给变量char。假如name是字符串'Lena'，则char首先被赋值为'L'，然后是'e'、'n'，最后为'a'。针对char的每个值，将执行缩进的print语句“print(char)”。图3-5描述了该循环的工作原理。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08064.jpeg)

图3-5　一个字符串的迭代过程。在第一次迭代中，变量char被赋值为'L'；第二次迭代中，变量char被赋值为'e'；第三次迭代中，变量char被赋值为'n'；第四次迭代中，变量char被赋值为'a'。每次迭代过程中，输出变量char的当前值。因此，当char为'L'时输出'L'，当char为'e'时输出'e'，以此类推

for循环语句还可以用来迭代一个列表中的项目。在下一个示例中，我们在交互式命令行中，使用一个for循环语句迭代表示宠物的字符串对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08065.jpeg)

for循环语句执行缩进代码“print(animal)”三次，即针对animal的每一个值执行一次。animal的值首先为'fish'，然后是'cat'，最后是'dog'。其示意如图3-6所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08066.jpeg)

图3-6　一个列表的迭代过程。在第一次迭代中，变量animal被赋值为'fish'；第二次迭代赋值为'cat'；第三次迭代赋值为'dog'。每次迭代过程中，输出animal的值

注意事项：for循环语句的变量

假设有如下两个for循环语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08067.jpeg)

上述两个for循环语句中的变量name和animal均为变量名称（建议变量选用有意义的命名方式，以增加程序的可读性）。当然，我们也可以简单使用变量x来书写for循环语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08068.jpeg)

注意：如果更改了for循环语句的变量名，则for循环语句体中所有使用该变量的地方也应该修改。

一般来说，for语句的语法形式如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08069.jpeg)

for循环语句依次按照从左到右的顺序把<序列>中的对象赋值给<变量>。<缩进代码块>通常被称为for循环语句体，将针对<变量>的每一个值执行一次。也就是说，for循环语句迭代序列中的对象。依次执行完<缩进代码块>后，程序继续执行for循环语句后的<非缩进代码块>。<非缩进代码块>位于for循环语句之后，且与for循环语句的第一行代码缩进相同。