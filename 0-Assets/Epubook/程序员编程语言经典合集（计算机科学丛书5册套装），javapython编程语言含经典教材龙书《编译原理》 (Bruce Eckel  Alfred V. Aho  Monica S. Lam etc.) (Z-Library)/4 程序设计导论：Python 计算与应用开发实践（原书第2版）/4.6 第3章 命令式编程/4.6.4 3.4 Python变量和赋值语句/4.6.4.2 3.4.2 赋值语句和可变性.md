   

### 3.4.2　赋值语句和可变性

常常存在多个变量指向同一个对象的情况（特别是，一个值作为输入参数传递给一个函数的情况）。有必要理解当一个变量被赋予另一个对象时会发生什么。例如，假设执行如下语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08120.jpeg)

第一条语句创建了一个值为3的整型对象，并赋值给变量a。第二条赋值语句中，表达式a的求值结果为整型对象3，并被赋值给另一个变量b。示意图如图3-10所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08121.jpeg)

图3-10　指向同一个对象的多个引用。赋值语句b=a中，运算符=右侧的表达式a求值结果为对象3，并被赋值给变量b

变量a和b同时指向同一个整型对象3。此时，如果我们给变量a赋予其他值，结果会如何？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08122.jpeg)

赋值语句a=6并没有把对象的值从3更改为6，因为int类型为不可变类型。因此，变量a将指向一个新的值为6的对象。那么变量b呢？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08123.jpeg)

变量b依旧指向值为3的对象，示意如图3-11所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08124.jpeg)

图3-11　多重赋值和可变性。如果变量a和b指向同一个对象3，随后对象6被赋值给变量a，则变量b依旧指向对象3

关键点在于：如果两个变量指向同一个不可变对象，则修改一个变量不会影响另一个变量。

接下来我们讨论列表的情况。一开始把一个列表赋值给变量a，然后把变量a赋值给变量b。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08125.jpeg)

我们期望变量a和b指向同一个列表，事实上确实如此。示意图如图3-12所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08126.jpeg)

图3-12　可变对象的多重赋值。两个变量a和b指向同一个列表。赋值语句b[1]=8和赋值语句a[-1]=16将更改同一个列表，因此任何对变量b指向的列表的更改，也将更改变量a所指向的列表，反之亦然

现在我们讨论将一个新对象赋值给b[1]：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08127.jpeg)

正如第2章所述，列表可以被修改。列表b通过赋值语句b[1]=8被修改。但是，因为变量a也绑定到同一个列表，所以变量a同时被修改。同样，修改列表a也会更改列表b：赋值语句a[-1]=16将列表a和b的最后一个对象改变为一个新的对象16。

练习题3.14　绘制表示执行如下语句后的变量和对象状态的示意图：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08128.jpeg)