   

### 3.5.1　不可变类型参数传递

我们采用如下函数g()来讨论在函数调用中传递指向一个不可变对象的引用的效果。

模块：ch3.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08137.jpeg)

首先我们把整数3赋给变量名a：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08138.jpeg)

在上述赋值语句中，整型对象3被创建并赋给变量名a，如图3-14所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08139.jpeg)

图3-14　主程序中的赋值语句。在主程序（交互式命令行）中，整型对象3被赋给变量名a

图3-14表明，变量名a已经在交互式命令上下文中定义。变量名a指向一个值为3的整型对象。接下来，我们使用变量名a作为输入参数调用函数g()：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08140.jpeg)

当执行该函数调用时，首先参数a被求值。其求值结果为整型对象3。请回顾函数g()的定义：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08141.jpeg)

然后，“def g(x):”中的变量x被赋值为指向输入整型对象3。其效果等同于执行了赋值语句x=a。

因此，开始执行g(a)时，两个变量指向同一个对象3：变量a在交互式命令行中定义，而变量x在函数g()中定义（请参见示意图3-15）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08142.jpeg)

图3-15　参数传递。函数调用g(a)把引用a作为输入参数传递。开始执行g()时定义的变量x将被赋值为该引用。a和x将同时指向同一个对象

在g(a)的执行过程中，变量x被赋值为5。由于整型对象是不可变类型，因此x不再指向3，而是指向一个新的整型对象5，如图3-16所示。但是，变量a依然指向对象3。

这就是上述例子的关键点所在。函数g()不会也不能改变交互式命令行中的变量a的值。一般而言，调用和执行一个函数时，函数不会修改任何作为函数参数传递的指向不可变对象的变量。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08143.jpeg)

图3-16　不可变类型参数传递。当执行语句x=5时，x将指向一个新的值为5的整型对象。值为3的整型对象保持不变。主程序（交互式命令行）中的变量a依然指向该对象

那么，如果传递一个可变对象引用，结果会怎样？