   

### 6.1.6　字典作为计数器集合

字典类型的一个重要应用是计算较大集合中“事物”出现的次数。例如，搜索引擎可能需要计算Web页面中每个单词的出现频率，以便计算其对于搜索引擎查询的相关性。

在较小的范围内，假设我们希望在学生姓名列表中计算每个名字出现的频率，例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08556.jpeg)

更准确地说，我们将实现一个函数frequency()，带一个列表（例如students）作为输入参数，计算列表中每个不同项的出现次数。

像往常一样，实现函数frequency()有多种不同方法。然而，最佳方法是为每个不同的项设置一个计数器，然后迭代列表中的项：对于每一个迭代的项，对应的计数器递增。为了完成任务，我们需要解决三个问题：

1.如何确定需要多少个计数器？

2.如何保存这些计数器？

3.如何把计数器与列表项关联起来？

第一个问题的解决方案是按需动态创建计数器，而不管究竟需要多少个计数器。换言之，当迭代列表过程中，仅当第一次遇见一个项时，为该项创建一个计数器。图6-3描述了访问列表students中的第一个、第二个和第三个名字后的计数器的状态。

练习题6.3　绘制访问列表students中接下来三个名字后的计数器状态。使用图6-3作为模型，绘制访问'Adam'后的状态图、访问'Adam'后的状态图和访问'Jimmy'后的状态图。

图6-3让我们知道如何回答第二个问题：我们可以使用字典存储计数器。每个项计数器将是字典中的一个值，该项本身将是与该值相对应的键。例如，字符串'Cindy'是键，对应的值是计数器。字典是键到键值的映射也回答了第三个问题。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08557.jpeg)

图6-3　动态创建计数器。在迭代列表students过程中，动态创建计数器。当迭代第一个项（'Cindy'）时，创建一个字符串'Cindy'计数器。当迭代第二个项（'John'）时，创建一个'John'计数器。当迭代第三个项（'Cindy'）时，和'Cindy'关联的计数器递增

现在我们也可以确定函数frequency()的返回值：一个映射列表中不同的项到其在列表中出现的次数的映射的字典。函数的使用示例如下所示：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08558.jpeg)

在函数调用frequency(students)返回的字典中（如图6-4所示），键是列表students中的不同的名字，值是对应于这些名字的出现频率：因此'John'出现1次，'Joan'出现2次，等等。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08559.jpeg)

图6-4　字典作为计数器容器在列表students上运行函数frequency()输出的列表

所有的拼图都就位了，我们现在可以实现这个函数：

模块：ch6.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08560.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08561.jpeg)

在第三行counters字典被初始化为空。for循环迭代列表itemList的项，针对每个项item：

·要么项目item对应的计数器加1；

·或者，如果项目item对应的计数器不存在，则创建一个项目item对应的计数器并初始化为1。

注意累加器模式用于累积频率计数。

练习题6.4　实现函数wordcount()，带一个文本（字符串）作为输入参数，输出文本中各单词的频率。假设文本中没有标点符号，单词直接用空格分隔。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08562.jpeg)