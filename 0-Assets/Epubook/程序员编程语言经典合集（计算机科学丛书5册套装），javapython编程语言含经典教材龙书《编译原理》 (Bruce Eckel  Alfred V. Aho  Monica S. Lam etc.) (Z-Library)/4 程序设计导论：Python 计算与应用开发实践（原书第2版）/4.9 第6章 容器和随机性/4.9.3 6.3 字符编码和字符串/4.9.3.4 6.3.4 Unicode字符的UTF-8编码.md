   

### 6.3.4　Unicode字符的UTF-8编码

一个Unicode字符串是一个代码序列，代码范围是从0到0x10ffff的数字。然而，与ASCII码不同的是，Unicode代码并不是存储在内存中的代码。将Unicode字符或代码转换成字节序列的规则称为编码。

存在不止一个而是若干个Unicode编码：UTF-8、UTF-16和UTF-32。UTF代表Unicode Transformation Format（Unicode转换格式），每个UTF-x定义了一种不同的方式来映射一段Unicode代码到字节序列。UTF-8编码已成为那些字符存储或在网络中发送字符的电子邮件、网页和其他应用程序的首选编码。事实上，当你编写Python 3程序时，默认编码是UTF-8。UTF-8的一个特点是：每一个ASCII字符（即表6-4中每个字符）都有一个UTF-8编码，正好与8位（一个字节）的ASCII编码相同。这意味着一个ASCII文本是用UTF-8编码的Unicode文本。

在某些情况下，你的Python程序将接收没有指定编码的文本。例如，当程序从万维网（我们将在11章中讨论）下载文本文档的情况。在这种情况下，Python别无选择，只能将“文本”视为存储在bytes类型对象中的原始字节序列。这是因为从网络下载的文件可能是图像、视频、音频，而不仅仅是文本。

考虑如下从Web下载的文本文件的内容：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08609.jpeg)

变量content指向类型bytes的一个对象。读者可以验证，“字符串”前面的字母b表示：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08610.jpeg)

要使用UTF-8的Unicode编码把它解码为字符串，我们需要使用bytes类的decode()方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08611.jpeg)

如果调用方法decode()时没有带参数，则默认情况下，使用与平台相关的编码：Python 3的编码是UTF-8（Python 2的编码是ASCII码）。

知识拓展：文件和编码

用于打开一个文件open()函数的第三个可选参数是读取或写入文本文件的编码。如果未指定，将使用与平台相关的默认编码。此参数仅在文本模式下使用。如果用于二进制文件，则会出现错误。让我们通过显式指定UTF-8编码打开文件chinese.txt：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08612.jpeg)