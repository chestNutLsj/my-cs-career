   

### 6.3.3　Unicode

ASCII编码是美国的标准。因此，它没有提供美国英语之外的字符编码。ASCII编码中不包括法语的“é”、希腊语的“Δ”或中文的“世”字。除ASCII编码以外，还开发了许多编码，用于处理不同的语言或一组语言。但是，这导致了一个问题：随着不同编码的存在，一台计算机上可能没有安装某些编码。在一个全球互联的世界里，一台计算机上创建的文本文档常常需要在另一台计算机上读取。如果读取文档所在的计算机中没有正确的编码，该怎么办呢？

Unicode编码被开发成为通用字符编码方案。它涵盖了所有书面语言的所有字符（无论是现代的还是古代的），包括科学、工程学、数学的技术符号、标点符号等。在Unicode编码中，每个字符都用整数编码表示。编码不一定是字符的实际字节表示，它只是特定字符的标识符。

例如，小写字母“k”的编码为十六进制值0x006B，对应于十进制值107的整数。在表6-4可以发现，107也是字母“k”的ASCII码。Unicode合乎时宜地使用与ASCII编码相同的编码表示ASCII字符。

如何将Unicode字符合并到字符串中？例如，如果要包括字符“k”，可以使用Python的转义序列\u006B：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08601.jpeg)

在下面的例子中，转义字符\u0020用来表示编码为0x0020（十六进制，对应于十进制的32）的Unicode字符。很显然，这是空白字符（见表6-4）：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08602.jpeg)

现在我们尝试使用几个不同语言的例子。让我们从西里尔语中我的名字开始：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08603.jpeg)

下面是希腊语中的“Hello World!”：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08604.jpeg)

最后，让我们输出中文中的“Hello World!”：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08605.jpeg)

让我们验证基本字符串运算符在字符串上的运行结果：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08606.jpeg)

字符串运算符与字符使用的字符集合无关。让我们验证ord()和chr()函数是否能从ASCII编码拓展到Unicode编码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08607.jpeg)

函数照样起作用！注意19990是十六进制值0x4e16的十进制值，当然它是字符“世”的Unicode编码。因此，内置函数ord()实际上带一个Unicode字符作为输入参数，输出其Unicode编码的十进制值；chr()则相反。两个函数同样适用于ASCII字符的原因在于，ASCII字符的Unicode编码被设计为和ASCII码相同。

知识拓展：字符串比较（深入研究）

既然我们知道字符串是如何表示的，我们就可以理解字符串比较是如何工作的。首先，Unicode编码是整数，因此所有Unicode编码可以表示的字符具有自然序。例如，空格“ ”排序在西里尔字符?之前，因为“ ”的Unicode编码（0x0020）整数值比“?的Unicode编码（0x0409）要小”：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image08608.jpeg)

Unicode编码的设计使得同一个字母表中任意一对字符对满足：在字母表中一个字符比另一个字符出现得早，则其Unicode编码也更小。例如，字母表中的“a”在“d”之前，“a”的编码比“d”的编码要小。通过这种方式，Unicode字符形成一个有序的字符集合，它与Unicode编码覆盖的所有字母表保持一致。

当比较两个字符串时，我们已经说明比较是用字典顺序完成的。字典顺序（dictionary order）的另一个名字是词典序（Lexicographic order）。这个顺序可以精确地定义，现在我们知道字符来自有序集合（Unicode）。单词：

a1a2a3…ak

在词典序中排在单词：

b1b2b3…bl

之前，必须满足下列条件之一：

a1=b1，a2=b2，…，ak=bk并且k＜l

满足ai和bi不同的最小索引i，ai的Unicode编码小于bi的Unicode编码。