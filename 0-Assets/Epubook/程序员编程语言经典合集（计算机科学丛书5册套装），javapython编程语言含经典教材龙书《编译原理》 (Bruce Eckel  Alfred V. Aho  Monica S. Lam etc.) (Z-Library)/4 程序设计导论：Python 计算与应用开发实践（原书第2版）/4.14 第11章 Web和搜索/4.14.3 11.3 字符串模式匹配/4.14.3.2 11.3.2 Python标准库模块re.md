   

### 11.3.2　Python标准库模块re

标准库中的模块re是用于正则表达式处理的Python工具。模块中定义的一个函数是findall()，带两个输入参数：一个正则表达式和一个字符串，返回输入字符串中匹配正则表达式的所有子字符串的列表。一些示例如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09278.jpeg)

如果正则表达式匹配两个子字符串，其中一个包含在另一个中，则函数findall()仅匹配长的子字符串。例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09279.jpeg)

返回列表中没有包含子字符串'ee'和'eee'。如果正则表达式匹配两个重叠的子字符串，则函数findall()返回左边的一个。事实上，函数findall()从左到右扫描输入字符串并按查找到的顺序收集匹配结果到一个列表。验证如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09280.jpeg)

下面是另一个例子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09281.jpeg)

注意事项：空字符串无处不在

把上一个例子和本例进行比较：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09282.jpeg)

因为正则表达式[bt]*匹配空字符串''，因此函数findall()在输入字符串'beetbtbelt?bet,best'（不包含长的匹配子字符串）中查找空字符串。结果发现许多空字符串，每个非b或t的字符前面都发现一个空字符串。包括第一个b和第一个e之间的空字符串，第一个e和第二个e之间的空字符串等。

练习题11.6　开发函数frequency()，带一个字符串作为输入参数，计算每个单词在字符串中出现的频率，返回一个字典，把字符串中的单词映射到其频率。要求使用一个正则表达式来获得字符串中所有的单词列表。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09283.jpeg)

另一个定义在模块re中有用的函数是search()。它同样带两个参数：一个正则表达式和一个字符串。它返回匹配正则表达式的第一个子字符串。可以认为它是字符串方法find()的更强大版本。示例如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09284.jpeg)

函数search()返回一个指向类型为SRE_Match的对象的引用，非正式地称之为匹配对象。例如，该类型支持查找匹配子字符串在输入字符串中的开始索引和结束索引的方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09285.jpeg)

'beetbtbelt?bet'的匹配子字符串从索引1开始到索引3之前结束。匹配对象还有一个被称为string的属性变量，用于存储被查找的字符串：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09286.jpeg)

要查找匹配的子字符串，我们需要获取match.string从索引match.start()到索引match.end()的切片：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09287.jpeg)