   

### 11.2.3　重载HTMLParser处理程序

让我们开发一个解析器，输出传递给解释器的HTML文件中的每个锚点开始标记的href属性的URL值。要实现此行为，需要被重写的HTMLParser处理方法是handle_starttag()方法。请记住，该方法处理每个开始标记符号。现在我们希望该方法需要检查输入标记是否是一个锚点标记。如果是锚点标记，则从属性列表中查找href属性，并输出其值。我们的LinkParser类的实现代码如下所示：

模块：ch11.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09255.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09256.jpeg)

注意，在第12行到第14行，我们从属性列表中查找属性href。让我们基于下面HTML文件测试我们的解析器：

文件：links.html

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09257.jpeg)

HTML文件links.html中包含三个锚点标记：第一个包含指向Google超链接的URL，第二个包含指向本地文件w3c.html链接的URL，第三个包含实际上启动邮件客户端的URL。在下面代码中，我们把该文件传递给我们的解析器并获得这三个URL：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09258.jpeg)

练习题11.2　开发类MyHTMLParser，作为HTMLParser的子类，当传递一个HTML文件给它时，按照文档中出现的顺序打印开始标记和结束标记的名称，并且缩进与文档树结构中的元素深度成比例。忽略不需要结束标记的HTML元素，如p和b

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09259.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09260.jpeg)