   

### 2.3.2　键盘输入

正如本章之前提到的，可以使用Scanner类来处理键盘输入。这个标准类位于java.util包中。为了在程序中使用Scanner，我们需要在包含程序的文件中靠近开头的地方编写下面的代码行：

![](../Images/image09653.gif)

我们是使用Scanner类的对象来执行键盘输入的，可以编写下面形式的语句来创建这种对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09654.jpeg)

其中，Scanner_Object_Name可以是任何Java变量名。例如，在程序清单2.3中，我们使用标识符keyboard来表示Scanner_Object_Name，就像下面这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09655.jpeg)

我们经常使用标识符keyboard来表示Scanner对象，因为它可以表明是键盘输入。但是，你可以使用其他的名字。例如，可以在使用keyboard的所有地方使用变量名scannerObject。

在定义了Scanner对象之后，就可以使用Scanner的方法来读入在键盘上键入的数据了。例如，下面的方法调用

![](../Images/image09656.gif)

会读取一个在键盘上键入的int值，并返回该int值。我们可以将这个值赋值给int类型的变量，就像下面这样：

![](../Images/image09657.gif)

如果想要读取int之外的其他类型的数字，该怎么办呢？nextDouble方法的工作方式与nextInt的完全一致，只是它读取的是一个double类型的值。Scanner还有类似的方法读取其他数字类型的值。

next方法会读取一个词，就像下面的语句所展示的：

![](../Images/image09658.gif)

如果输入行如下：

![](../Images/image09659.gif)

字符串"plastic"会赋值给s1，而字符串"spoons"会赋值给s2。注意，从键盘上键入的任何两个输入值之间都必须用空白字符分隔开，例如一个或多个空格，或者一个或多个换行，或者空格和换行的组合。在这种上下文中，这些分隔符称为界定符。对于next方法，词就是由空白字符界定的任何由非空白字符构成的字符串。界定符是输入数据中的分隔符。缺省情况下，界定符就是空白字符。

如果想要读取一整行，那么可以使用nextLine方法。例如：

![](../Images/image09660.gif)

会读取输入中的一行，并将读取的字符串放置到变量sentence中。输入行的结尾由转义字符'\n'表示。当我们在键盘上按下回车（Enter）时，就输入了'\n'字符。但是，在屏幕上，我们看到的只是一行结束了，另一行开始了。当nextLine读取一行文本后，它会读到这个'\n'字符，但是'\n'不会成为返回的字符串值的一部分。因此，在前面的示例中，由变量sentence命名的字符串不会以'\n'字符结尾。

程序清单2.5展示了用于演示我们刚刚介绍过的Scanner方法的程序。

程序清单2.5　键盘输入的演示程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09661.jpeg)

回顾：使用Scanner类的键盘输入

我们可以使用Scanner类的对象从键盘读取输入。为了可以使用它，需要将下面的语句放置到程序文件的开头：

![](../Images/image09662.gif)

还需要在包含键盘输入的第一条语句之前编写下面形式的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09663.jpeg)

其中Scanner_Object_Name可以是除关键词之外的任何Java标识符。例如，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09664.jpeg)

方法nextInt、nextDouble和next会分别读取并返回int类型的值、double类型的值以及作为String对象的词。nextLine方法会将当前行的剩余部分作为字符串读取并返回，其中也会读取结尾的'\n'，但是不会包含在返回的字符串值中。

语法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09665.jpeg)

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09666.jpeg)

表2.5列出了Scanner类的一些方法。

表2.5　Scanner类的一些方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09667.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09668.jpeg)

牢记：输入提示

当程序需要用户键入一些数据作为输入时，它应该总是显示一条提示信息，就像下面这样：

![](../Images/image09669.gif)

疑难杂症：next和nextLine方法的问题

Scanner类的next和nextLine方法会读取上一次键盘读取操作之后剩余的文本。例如，假设我们按照如下方式创建了Scanner类的对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09670.jpeg)

并且假设我们继续编写了如下的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09671.jpeg)

最后，假设相关的输入是由键盘键入的，内容如下：

![](../Images/image09672.gif)

这样，变量n的值会被设置为42，变量s1被设置为"is the answer"，而变量s2被设置为"and don't you"。

到目前为止，看起来好像不会有任何潜在的问题，但是假设输入变成下面的内容：

![](../Images/image09673.gif)

在这种情况下，你可能会期望n被设置为42，s1被设置为"and don't you"，s2被设置为"forget it."。但是实际情况并非如此。

实际上，变量n的值被设置成了42，变量s1的值被设置成了空字符串，而变量s2被设置成了"and don't you"。nextInt方法会读取42，但是不会读取行结束符'\n'。因此，第一个nextLine调用会读取包含42的这一行中剩下的部分，而这一行除了'\n'，什么都不剩了。因此，nextLine会读取并丢弃行结束符'\n'，然后返回空字符串，并将其赋给s1。下一个nextLine调用会从下一行开始，并读取"and don't you"。

在将从键盘读取数字的方法与从键盘读取字符串的方法组合起来时，有时就必须包含一个额外的nextLine调用来处理掉行结束符'\n'。这个问题在程序清单2.5的程序中临近末尾的地方展示。

牢记：空字符串

回忆一下，空字符串包含0个字符，写作""。如果执行nextLine方法时用户只是按下了Enter（Return）键，那么nextLine方法返回的就是空字符串。