   

### 2.1.9　赋值兼容性

俗话说“风马牛不相及”，我们无法将3.5这样的double值放到int类型的变量中，甚至我们无法将double值3.0放到int类型的变量中。我们无法将一种类型的值放到另一种类型的变量中，除非这个值可以转换为与该变量类型相匹配的值。但是，当处理数字时，这种转换有时（但并非总是）会自动执行。当我们将整数类型的值赋值给浮点类型的变量时，这种转换就总是会执行，例如：

![](../Images/image09541.gif)

有些更不易察觉的赋值也会自动执行转换，就像下面的赋值：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09542.jpeg)

更普遍的情况是，可以将下面列表中的任何一种类型的值赋值给出现在列表更靠末端的任何类型的变量：

![](../Images/image09543.gif)

例如，可以将long类型的值赋值给float类型或double类型的变量（当然也可以赋值给long类型的变量），但是不能将long类型的值赋值给byte、short或int类型的变量。注意，这不是对各种类型的随意排序。在这个列表中从左向右移动时，类型变得越来越精确，这是因为要么它们存储的值更大了，要么它们允许数字中有小数部分。因此，对于一个值来说，如果某个变量的类型所支持的精度比这个值的类型所支持的精度更高，那么就可以将这个值存储到这个变量中。

此外，可以将char类型的值赋值给int类型的变量或者任何在上述类型列表中跟在int之后的数字类型的变量。这种特殊的赋值兼容性在讨论键盘输入时非常重要。但是，我们不建议将char类型的值赋值给int类型的变量，除非是在某些特殊情况中[^1]。

如果想要将double类型的值赋值给int类型的变量，那么就必须使用类型强制转换改变这个值的类型，就像下一节中解释的那样。

回顾：赋值兼容性

可以将下面列表中的任何一种类型的值赋值给出现在列表更靠末端的任何类型的变量：

![](../Images/image09544.gif)

特别要注意的是，可以将任何整数类型的值赋值给任何浮点类型的变量。

将char类型的值赋值给int类型的变量或任何在我们给出的类型列表中跟在int之后的数字类型的变量都是合法的。

[^1]:  使用过像C或C++等其他语言的读者可能会感到惊讶，为什么char类型的值不能赋值给byte类型的数组呢？这是因为Java为每个char类型的值都分配了两个字节的内存，但是为byte类型的值很自然地只会分配一个字节。