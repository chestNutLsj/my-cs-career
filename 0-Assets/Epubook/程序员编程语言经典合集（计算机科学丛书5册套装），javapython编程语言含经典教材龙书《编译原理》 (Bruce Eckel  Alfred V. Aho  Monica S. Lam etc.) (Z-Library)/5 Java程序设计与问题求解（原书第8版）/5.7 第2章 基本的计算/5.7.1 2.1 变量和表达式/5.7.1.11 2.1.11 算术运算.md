   

### 2.1.11　算术运算

在Java中，可以通过使用算术操作符+、-、*和/来分别执行加法、减法、乘法和除法。可以按照普通的算术和代数的方式来表示算术运算。可以将变量和数字（也就是称为操作数的东西）与操作符和括号组合起来，形成算术表达式。Java还有第5个算术操作符%，稍后将给出它的定义。

算术表达式的含义基本上也就是你看到的含义，但是对于结果的类型（有时甚至是结果的值）有些细微的差别。5个算术操作符都可以与任意整数类型和任意浮点类型的操作数一起使用，甚至可以和属于这些类型中的不同类型的操作数一起使用。所产生的值取决于所使用的操作数的类型。

我们从只组合了两个操作数的简单表达式（即组合了两个变量、两个数字或一个变量和一个数字的表达式）入手。如果两个操作数的类型相同，那么表达式的结果就是这种类型。如果一个操作数是浮点类型，另一个是整数类型，那么结果就是浮点类型。

例如，考虑下面的表达式：

![](../Images/image09558.gif)

如果变量amount和adjustment都是int类型，那么其结果（也就是该操作返回的值）类型为int。如果amount或adjustment中任意一个或者两个都是double类型，那么结果就是double类型。如果将加法操作符+替换为-、*、/或%中的任意一个，那么确定结果类型的方式是相同的。

使用超过两个操作数以上的更大的表达式总是可以看作一系列的步骤，其中每一步都只涉及两个操作数。例如，要计算下面的表达式：

![](../Images/image09559.gif)

我们（或计算机）会先计算balance*rate，得到一个数字，然后计算这个数字与balance的和。这意味着我们用来确定只包含两个操作数的表达式类型的规则同样适用于更复杂的表达式：如果所有包含的项都具有相同的类型，那么结果就是该类型。如果有些项是整数类型而另一些是浮点类型，那么结果就是浮点类型。

典型情况下，确定所产生的值到底是整数类型还是浮点类型就是你需要了解的所有信息了。但是，如果需要知晓一个算术表达式所产生的值的确切类型，可以按照如下的方式来确定：所产生的类型是表达式中用到的类型之一，即在表达式中用到的所有类型中，按照下面的列表出现在最右边的类型：

![](../Images/image09560.gif)

注意，这个列表与用来确定自动类型转换的列表的顺序相同。

除法操作符（/）需要特别关注一下，因为结果的类型可能会以意想不到的方式影响所产生的值。如果用除法操作符将两个操作数组合起来，并且至少一个操作数是double类型或者某种其他的浮点类型，那么结果就如同算术上的除法运算的结果。例如，9.0/2有一个操作数是double类型，即9.0。因此，结果就是double类型的数字4.5。但是，如果两个操作数都是整数类型，那么结果就会出人意料。例如，9/2有两个int类型的操作数，因此产生的结果是int类型的4，而不是4.5，会直接丢失小数点后的小数部分。一定要注意，在做两个整数的除法时，结果不是四舍五入的，会将小数点后面的小数部分丢弃，也就是截尾，而不管小数部分有多大。因此，11/3是3，而不是3.6666…。即使小数点后面的小数部分为0，也丢弃小数点和0。令人惊讶的是，这种看起来很微小的差异可能会产生重要的影响。例如，8.0/2的计算结果是double类型的值4.0，这只是个近似值。但是，8/2的计算结果是int值4，这是个精确值。4.0的近似属性可能会影响到后续使用这个结果来执行的计算的准确性。

Java的第5个算术操作符是取余操作符，或者称为模操作符，用%来表示。在用一个数字除以另一个数字时，我们会得到结果（也称为商）和余数（即除剩的量），而%操作符会给出余数。典型情况下，%操作符会与整数类型的操作数一起使用，以获得与小数点后小数部分等价的内容。例如，14除以4得到商为3、余数为2，即会丢弃2。%操作可以在除法执行之后给出余数。因此，14/4等于3，而14%4等于2，因为14除以4得到商为3、余数为2。

%操作符的应用场景比你想象的还要多。我们可以用它来编程对2、3或其他任何数字出现的次数计数。例如，如果只想在偶数上执行某个动作，那么就需要知道给定的数字是奇数还是偶数。如果n%2等于0，那么n就是偶数；如果n%2等于1，那么n就是奇数。类似地，如果想要让程序每隔两个数执行某个动作，可以迭代所有的整数，并在每次迭代时都使用int类型变量n来存储整数，然后让程序只有在n%3等于0时才执行该动作。

常见问题：%操作符是如何操作浮点数的？

取余操作符通常只用于整数操作数，但是Java允许我们用它来处理浮点数。如果n和d是浮点数，那么n%d等于n-（d*q），其中q是n/d的整数部分。注意，q的符号与n/d的符号相同。例如，6.5%2.0等于0.5，-6.5%2.0等于-0.5，6.5%-2.0等于0.5。

最后，要注意，有时我们使用+和-来表示数字的符号，有时使用+和-来表示加法和减法。事实上，Java总是将+和-当作操作符处理。一元操作符就是只有一个操作数的操作符，例如下面的赋值语句中的操作符-：

![](../Images/image09561.gif)

二元操作符有两个操作数，例如下面语句中的+和*：

![](../Images/image09562.gif)

注意，同一个操作符有时既可以用作一元操作符，又可以用作二元操作符。例如，-和+符号就既可以用作一元操作符又可以用作二元操作符。

常见问题：算术表达式中的空格重要吗？

空格在任何Java语句中几乎都不会有什么问题。唯一的例外是空格出现在一对双引号或一对单引号内。但是，在其他情况下添加空格可以使Java语句更易于阅读。例如，应该在所有二元操作符的前后各添加一个空格，就像我们在之前的示例中所做的。