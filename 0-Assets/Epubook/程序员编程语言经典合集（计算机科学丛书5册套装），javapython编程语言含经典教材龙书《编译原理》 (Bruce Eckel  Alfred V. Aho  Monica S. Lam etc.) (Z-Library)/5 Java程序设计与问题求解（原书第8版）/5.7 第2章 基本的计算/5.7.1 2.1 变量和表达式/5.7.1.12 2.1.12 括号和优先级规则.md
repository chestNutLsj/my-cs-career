   

### 2.1.12　括号和优先级规则

括号可以用来将算术表达式中的项群组起来，其方式与代数和算术中使用括号的方式一样。有了括号的辅助，我们就可以告诉计算机应该先执行哪个操作，再执行哪个操作，等等。例如，考虑下面的两个表达式，它们只有括号的位置不同：

![](../Images/image09563.gif)

为了计算第一个表达式，计算机会先将cost的值与tax的值相加，然后将结果乘以discount。为了计算第二个表达式，计算机会先将tax和discount相乘，然后将结果与cost相加。如果用一些数字来表示这些变量的值，然后计算这两个表达式，你就可以看到它们会产生不同的结果。

如果删除括号，计算机仍旧会计算表达式。例如，下面的赋值语句

![](../Images/image09564.gif)

等价于

![](../Images/image09565.gif)

当删除括号后，计算机会在执行加法之前执行乘法。更普遍的情况是，当操作的顺序不是由括号来确定时，计算机会按照图2.1中所示的优先级规则指定的顺序来执行操作[^1]。在这个优先级列表中，位置越靠上的操作符具有越高的优先级。当计算机在决定两个操作中哪一个应该先执行并且执行顺序没有用括号来指明时，就会先从具有高优先级的操作入手，然后再执行低优先级的操作。有些操作具有相等的优先级，在这种情况下，操作的顺序是由操作符在表达式中的位置确定的。优先级相等的二元操作符会按照自左向右的顺序执行，而优先级相等的一元操作符会按照自右向左的顺序执行。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09566.jpeg)

图2.1　优先级顺序

这些优先级规则与代数中使用的优先级规则类似。除非是非常标准的情况，否则最好使用括号，即便希望的操作顺序与优先级规则表示的顺序相同，也应该如此，因为对阅读程序代码的人来说，括号可以使表达式变得更清晰。但是，不必要的括号使用过多也会适得其反。在加法内部的乘法属于通常应删除括号的标准情况之一。因此，

![](../Images/image09567.gif)

通常写作

![](../Images/image09568.gif)

这两种形式都是可接受的，并且它们具有相同的含义。

表2.2展示了一些在Java中如何编写算术表达式的示例。

表2.2　Java中的一些算术表达式

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09569.jpeg)

[^1]:  图2.1展示了在本章中用到的所有操作符，更多的优先级顺序将在第3章中给出。