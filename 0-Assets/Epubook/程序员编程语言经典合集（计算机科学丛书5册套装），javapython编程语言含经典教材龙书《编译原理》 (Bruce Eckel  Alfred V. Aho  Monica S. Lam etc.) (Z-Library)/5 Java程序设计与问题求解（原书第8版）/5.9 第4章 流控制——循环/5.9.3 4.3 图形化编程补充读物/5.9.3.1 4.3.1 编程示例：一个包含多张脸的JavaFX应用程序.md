   

### 4.3.1　编程示例：一个包含多张脸的JavaFX应用程序

在程序清单4.9中包含了一个JavaFX应用程序，它显示了一个由7张脸构成的序列。前5张脸在颜色上灰白交替，而且每一张脸都比前一张脸笑得更开心一些。第6张脸向用户抛出了一个吻，第7张脸涨得通红（可能是因为它对亲吻感到害羞）。你可以将这7张脸想象成一个动画或者是随时间流逝抓拍的一组快照。（这些脸灰白相间只是为了让程序变得更有趣，没有其他原因。）

前5张脸除了微小的变化外，几乎是相同的，所以它们可以用一个for循环来绘制，其循环变量为i。for循环体会根据i的变化来绘制脸，对于i的每个取值，脸都会绘制在点（X_FACE0+50*i，Y_FACE0+30*i）处。因此，当i为0时，第一张脸会绘制在（X_FACE0，Y_FACE0）处。对于后续的每个i的值，会在屏幕向右50个像素、向下30个像素的位置上绘制另一张脸。X_FACE0和Y_FACE0是具名常量。我们并非在一次次地重复计算50*i和30*i，而是只计算一次，将它们分别存储在变量xOffset和yOffset中。

程序清单4.9　一个包含多张脸的JavaFX应用程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10055.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10056.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10057.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10058.jpeg)

下面的代码会在i为偶数时将亮灰色添加到脸上：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10059.jpeg)

此后，圆形的黑色轮廓是用下面的语句绘制的：

![](../Images/image10060.gif)

每张亮灰色的脸在绘制其圆形黑色轮廓之前，都会先绘制其内部区域，这样黑色轮廓就会显示在填充内容的圆圈的上面。

循环体中下面的几行绘制了眼睛和鼻子，它们在每张脸中都一样。嘴是用下面几条在循环体结尾处的语句绘制的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10061.jpeg)

每张嘴都是以相同的方式绘制的，但是针对i的每个值都有一点变化。当i递增1时，其嘴巴的高度递增3个像素。第一张嘴的高度（即i为0时）是MOUTH_HEIGHT0，这是一个被设置为0的具名常量。因此，第一张嘴是直线，没有曲率。第二张嘴（即i为1时）高度为3，因此其曲率看起来就像是微笑。前5张脸的笑容会越来越明显。

最后两张脸是由循环体后面的代码产生的。但是，这两张脸的代码都是循环体代码的微小变体。特别是，最后两张脸都是根据i定位的，就像for循环中产生的脸一样。就在for循环结束之前，i的值递增了1，所以下一张脸会在这一系列脸中被正确定位。然后，在绘制最后一张脸之前，i再次递增，因此最后一张脸也会在这一系列脸中被正确定位。

倒数第二张脸的嘴绘制成了一个黑色实心圆，使其看起来就像是亲吻的样子。最后一张脸是灰色的，有一张笑开的脸。笑开的脸的嘴与当i为4时绘制的第5张脸一样。因为i现在为6，所以对最后一张脸，使用的嘴的高度为i-2。

通过调用setFont和fillText方法，我们在最后两张脸上用文本进行了标记，我们将在下一节解释这两个方法。