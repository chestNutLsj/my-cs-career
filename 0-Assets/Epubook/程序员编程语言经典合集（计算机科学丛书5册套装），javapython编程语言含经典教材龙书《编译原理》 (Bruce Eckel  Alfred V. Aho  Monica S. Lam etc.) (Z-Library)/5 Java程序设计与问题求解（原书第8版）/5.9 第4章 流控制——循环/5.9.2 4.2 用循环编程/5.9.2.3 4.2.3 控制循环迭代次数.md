   

### 4.2.3　控制循环迭代次数

现在让我们来讨论用来终止循环的一些技术。如果幸运的话，我们能够在循环开始之前精确指定循环体必须执行的次数。例如，假设我们想要知道某门课程某次考试的平均分。我们需要知道班级中学生的数量，因此将该数字读取到整数变量numberOfStudents中。在这个简单的示例中，我们可以使用for循环来重复执行循环体numberOfStudents次。下面的代码可以很好地完成此任务：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10016.jpeg)

注意，for循环机制使用变量count来控制循环体的重复执行，count会从1计数到numberOfStudents。像这样在循环开始之前就知道循环迭代次数的循环称为计数控制循环。在这个特定示例中，count在循环体中并没有用到，但是在其他情况下，计数器可能会在循环体中用到。计数控制循环并非只能用for循环来实现，但是for循环是最容易的实现方式。注意，如果班里没有任何学生，循环体就会迭代0次，而if-else语句可以防止除零的问题。

提前知道循环迭代的次数并非总是可行的。终止循环的一种直接的方式是询问用户是否需要终止循环。这种技术称为迭代前询问。例如，下面的代码可以帮助顾客计算多次购买多项商品的花费：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10017.jpeg)

如果知道每位用户至少购买一次，那么do-while循环可以工作得很好。在其他情况下，while循环是最佳选择。

如果每位顾客购物次数较少，那么这段代码就可以工作得很好。但是，如果循环迭代的总次数不是很小，那么这项技术对于用户来说就会变得很冗长。对于很长的输入列表，有时可以使用哨兵值来表示输入的结束。哨兵值必须有别于所有可能的实际数据值。例如，假设我们需要某种编码来计算某次考试中的最高分和最低分。如果我们知道至少有一个人完成了考试，并且没人会得到负的分数，那么就可以让用户在输出最后一个分数之后，输入一个负数。这个负数就是哨兵值，它不是一个正常的考试分数，而只是一个结束标识。

计算最高分和最低分的代码如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10018.jpeg)

如果用户输入下列分数：

![](../Images/image10019.gif)

那么输出就是

![](../Images/image10020.gif)

这里的哨兵值是-1，它在计算中并没有用到。也就是说，最低分数是10，而不是-1。-1只是结束标识。

前面的三项技术（使用计数器、向用户询问和探测哨兵值）可以覆盖你可能会碰到的大多数情况。下一个案例研究将涉及哨兵值和使用布尔变量来终止循环的迭代。