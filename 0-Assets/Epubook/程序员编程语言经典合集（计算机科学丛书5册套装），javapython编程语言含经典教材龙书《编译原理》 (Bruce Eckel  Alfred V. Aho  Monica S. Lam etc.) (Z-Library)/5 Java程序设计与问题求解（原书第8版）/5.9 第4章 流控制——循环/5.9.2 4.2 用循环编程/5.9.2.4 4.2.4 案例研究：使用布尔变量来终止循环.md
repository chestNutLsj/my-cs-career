   

### 4.2.4　案例研究：使用布尔变量来终止循环

在这个案例研究中，我们解决的不是完整的问题，而是为一个常见的子任务设计一个循环，并将其置于演示程序中。通过这个案例，你将会熟悉布尔变量最常见的用法之一。

我们的循环将读取一组数字，并计算这组数字的总和。这些数字都是非负值。例如，它们可能是编程团队中每个人的工时数。因为没有人的工时数为负，所以我们知道这些数字都是非负值，因此，我们可以使用负数作为哨兵值来标识这组数字的结束。对于这项任务，我们假设所有数字都是整数，但是相同的技术也适用于其他类型的数字，甚至包括非数字型数据。

如果先用伪代码设计该循环，我们就能够更好地理解该问题和可能的解决方案。让我们从下面的伪代码开始：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10021.jpeg)

因为我们知道非负数字标识这组数字的结束，所以可以将伪代码精化为如下的形式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10022.jpeg)

我们可以用多种不同的方式将这段伪代码转换为Java代码。一种方式是使用布尔变量。使用布尔变量的优点之一就是它使得代码读取来更像英语的句子。例如，让我们使用名为thereAreMoreNumbersToRead的布尔变量。直接声明该变量并在伪代码中用它替换短语“还有更多的数字需要读取时”，就可以产生下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10023.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10024.jpeg)

将这个循环转换成可工作的Java代码非常简单。通过观察，我们可以发现布尔变量thereAreMoreNumbersToRead为假时循环终止，于是，我们可以按照观察到的现象对短语“这就是该循环的最后一次迭代”进行转译。因此，终止循环的方式就是将there-AreMoreNumbersToRead设置为false。这样，“这就是该循环的最后一次迭代”就能转译为：

![](../Images/image10025.gif)

余下的工作就只剩确定thereAreMoreNumbersToRead的初值了。我们知道，即使这组数字为空，我们至少也要读取哨兵值。因此，我们知道循环体至少会执行一次。由此，在循环开始时，thereAreMoreNumbersToRead必须为true，即必须将其初始化为true。因此，我们得到了下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10026.jpeg)

当循环终止时，变量sum包含的就是输入列表中不包括哨兵值在内的所有数字的总和。

该循环可以用于程序中了。因为变量名thereAreMoreNumbersToRead有点太长了，所以我们将其缩短为areMore，并由此产生了程序清单4.6中所示的程序。

程序清单4.6　使用布尔变量来终止循环

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10027.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10028.jpeg)