   

### 4.2.8　跟踪变量

如果程序行为有误，但是你无法看到问题所在，那么最好的做法是跟踪某些关键变量。跟踪变量表示在程序运行时观察变量值的变化。通常，程序不会在每次修改某个变量时都显示它的值，但是观察变量值的变化有助于调试程序。

许多系统都有内置的功能，使我们可以在不对程序作出任何修改的情况下更容易地跟踪变量。这些调试系统因所使用工具的不同而不同。如果你有这种调试工具，那么值得花时间去学习如何使用它。如果你没有这种调试工具，那么可以通过直接在程序中临时性地插入一些额外的println语句来跟踪变量。

例如，假设你想要跟踪下面包含错误的代码中的变量：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10044.jpeg)

可以像下面这样通过添加println语句来跟踪变量：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10045.jpeg)

在发现并修正了代码中的缺陷后，就可以移除这些跟踪语句了。在这些语句上标注特有的注释，就像我们所做的那样，会有助于定位这些语句。

在前面的示例中插入所有跟踪语句看起来好像挺麻烦，但实际上并不会很费事。如果你愿意，可以先尝试跟踪某些变量，观察其是否可以提供足够的信息以发现问题。但是，通常从一开始就跟踪所有变量或者跟踪大部分变量是最快的方式。

编程窍门：在跟踪变量时使用DEBUG标志

有时，在调试程序时，你可能想临时性地跳过一些之前添加的用来跟踪某些变量值的语句。通过定义布尔常量DEBUG就可以很方便地实现此功能，就像下面这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10046.jpeg)

在本例中，if语句体中的语句将会执行。随后，如果想要跳过它们，只需将DEBUG的值改为false。