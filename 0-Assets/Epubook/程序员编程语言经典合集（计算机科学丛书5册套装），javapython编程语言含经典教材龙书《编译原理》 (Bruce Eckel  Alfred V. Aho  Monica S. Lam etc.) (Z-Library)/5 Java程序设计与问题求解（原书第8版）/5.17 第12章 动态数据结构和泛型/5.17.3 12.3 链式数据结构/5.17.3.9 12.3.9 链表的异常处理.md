   

### 12.3.9　链表的异常处理

正如你所猜想的，你需要在阅读本节之前先阅读有关异常处理的第9章内容。

考虑程序清单12.9中的StringLinkedListWithIterator类，我们为这个类定义了各种方法，使得无论何时，只要发生错误，这些方法就会发送一条错误消息到屏幕上，并终止程序运行。但是，当有些异常事件发生时，并非一定要终止程序。为了让程序员可以为这些异常情况提供相应的动作，抛出异常并让程序员来决定如何处理异常情况就会显得更具意义。程序员仍旧可以决定终止程序，但是也可以决定执行其他操作。例如，我们可以按照如下形式重新编写方法goToNext：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11393.jpeg)

程序清单12.10　LinkedListException类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11394.jpeg)

在这个版本中，我们将每个终止程序运行的分支都替换成了抛出异常的分支。异常类LinkedListException可以是一个常规异常类，如程序清单12.10所示。

我们可以将在迭代过程中抛出的异常用作许多不同的目的。一种可能是用来检查是否到达了链表末尾。例如，假设会抛出异常的StringLinkedListWithIterator版本名为StringLinkedListWithIterator2。下面的代码移除了链表中所有包含给定字符串（badString）的节点，如果试图越过链表末尾读取数据，就会抛出异常：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11395.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11396.jpeg)

这种用异常来测试是否到达列表末尾的用法乍一看可能显得有点奇怪，但是在Java编程中类似的用法时有发生。例如，Java在检查是否到达二进制文件末尾时，也要求像这样的操作。当然，LinkedListException类还有许多其他的用法。

下面的自测问题会让你在StringLinkedListWithIterator类中重写更多的方法，使得它们在异常或错误情况下抛出异常。

自测问题

25.重新定义StringLinkedListWithIterator（程序清单12.9）中的getDataAtCurrent方法，使得它在发生异常事件时会抛出异常而不是终止程序。

26.按照自测问题25的要求重写setDataAtCurrent。

27.按照自测问题25的要求重写insertNodeAfterCurrent。

28.按照自测问题25的要求重写deleteCurrentNode。