   

### 12.1.3　使用ArrayList的方法

ArrayList的对象可以像数组一样使用，但是我们必须使用方法而不是数组的方括号标记法。让我们定义一个数组和一个ArrayList对象，并赋予它们相同的容量：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11333.jpeg)

ArrayList对象的索引方式与数组相同：第一项的索引为0。因此，如果对数组anArray使用下面的语句：

![](../Images/image11334.gif)

那么对于对象aList而言，类似的语句是

![](../Images/image11335.gif)

如果用下面的语句从数组anArray中获取一个元素：

![](../Images/image11336.gif)

那么对于aList而言，类似的语句是

![](../Images/image11337.gif)

set和get两个方法赋予ArrayList对象的功能与方括号赋予数组的功能类似。但是，我们需要意识到很重要的一点：下面的方法调用：

![](../Images/image11338.gif)

并非总是可以完全类比

![](../Images/image11339.gif)

set方法可以替换任何已有的元素，但是我们不能用set将一个元素放到任意的索引处，而在数组中我们可以这样做。set方法可用来修改已有的元素，而不是首次设置它们。

要想首次设置元素，可以使用add方法。这个方法会将元素按照索引位置0、1、2等等的顺序添加到这些位置上，ArrayList对象必须总是按照这个顺序填充。add方法有两种形式，即它被重载了。在给定一个引元时，add会紧靠当前最后一个有元素占据的位置的后面添加一个元素。如果给定两个引元，该方法会在指定的位置添加元素，其中指定的位置不能是某个无元素占据的位置之后的位置。例如，如果aList包含5个元素，那么

![](../Images/image11340.gif)

或者

![](../Images/image11341.gif)

都会将"Caboose"添加为第6个元素，也是最后一个元素。但是请注意，对于有5个项的列表，下面的语句：

![](../Images/image11342.gif)

会引发IndexOutOfBoundsException异常。因为该列表中只包含5个元素，最后一项的索引是4。在索引5处添加一项之前，试图在索引6处添加一项是非法的。

在将元素添加到aList中之后，我们还可以使用add将元素插入到已有元素之前，或者插入到已有元素之间。下面的语句：

![](../Images/image11343.gif)

会在aList中所有其他元素之前添加（插入）一个字符串，已有元素会移位以腾出空间给新元素。因此，在原来在索引0处的字符串不是被替换，而是被移位到了索引位置1处。类似地，

![](../Images/image11344.gif)

会将"BoxCar"插入到索引4处。在位于索引4之前的所有元素都保持原位不动，而原来在索引4之后的元素都会向下一个更高的索引位置移动。当使用add方法在某个索引位置上插入元素时，在该索引位置以及更高索引位置上的所有元素都会将它们的索引递增1，使得在不丢失任何已有元素的情况下，有足够的空间插入新元素。与向数组中插入元素的过程不同，这个过程会自动发生，我们无须编写任何额外的代码来移动元素。很明显，使用ArrayList比使用数组要容易得多。

通过使用size方法，我们就可以知道已经有多少元素被添加到了aList中，表达式aList.size（）会返回存储在aList中的元素数量，这些元素的索引范围是从0到aList.size（）-1。

图12.1描述了ArrayList类中挑选出来的一些方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11345.jpeg)

图12.1　ArrayList类中的一些方法

常见问题：为什么有些参数是Base_Type类型的而其他参数是Object类型的？

看一看图12.1中的方法。在有些情况下，当参数顺理成章地是基类型的对象时，参数类型就是基类型。但是在其他情况中，参数类型却是Object类型。例如，方法add有一个基类型的参数，但是方法contains却有一个Object类型的参数。为什么在参数类型上会有差异？对于ArrayList而言，只添加基类型的元素是合理的，所以add不会接纳其他类型的对象。但是，contains更通用。因为其参数类型是Object，所以它可以检查任何类型的对象是否在列表中。类型不是基类型的对象不可能在列表中，所以如果将其传递给contains，该方法会返回false。

回顾：数组与ArrayList类的对象

在使用数组时，方括号和实例变量length是向程序员自动提供的唯一工具。如果想要将数组用于其他目的，就必须编写代码来操作数组。另一方面，ArrayList有一大堆功能强大的方法，它们能够提供很多我们在使用数组时必须自己编码实现的功能。例如，ArrayList类有一个方法add，它会在两个已有元素之间插入一个新元素。

自测问题

1.假设aList是ArrayList<String>类的对象。你如何才能将字符串“Hello”添加到aList的末尾呢？

2.假设instruction是一个ArrayList<String>类的对象，其中在索引位置5处包含字符串“Stop”。你要怎样才能将索引位置5处的字符串改为“Go”？

3.你是否可以用set方法将一个元素放入列表中任何你想要放置的索引处？

4.你是否可以用add方法将一个元素放入列表中任何你想要放置的索引处？

5.你是否可以用add方法将一个元素放入你无法用set放入的索引处？

6.如果aList是包含7个元素的ArrayList<String>类的对象，那么为什么aList.add（7，"Red truck"）会将这个新字符串作为aList的第8个元素放入。

7.假设aList是包含下列4个字符串的ArrayList<String>类的对象："red"、"blue"、"green"和"yellow"。在执行aList.add（2，"orange"）后，列表中包含哪些字符串？

8.如果使用下面的语句创建一个列表：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11346.jpeg)

这个列表包含的元素可以超过20个吗？

9.假设aList是ArrayList<String>类的对象。编写Java语句，在屏幕上显示aList中所有的元素。