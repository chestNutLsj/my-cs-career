   

### 12.1.4　编程示例：待办事项列表

程序清单12.1包含了一个使用ArrayList来维护每日任务列表的例子。用户可以键入任意多的任务，然后该程序会显示这个列表。

程序清单12.1　使用ArrayList维护列表

![](../Images/image11347.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11348.jpeg)

编程窍门：用for-each循环访问ArrayList实例中的所有元素

程序清单12.1中最后一个循环（即显示ArrayList实例中所有元素的循环）可以替换为下面的for-each循环：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11349.jpeg)

这个循环与原来那个用来访问像ArrayList对象这样的集合中所有元素的循环相比，编写起来要简单得多。

编程窍门：用trimToSize来节省内存

ArrayList对象会在程序需要它们拥有更大容量时将它们的容量自动翻倍。但是，新的容量可能比程序需要的容量大。在这种情况下，容量不会自动缩小。如果扩展后的列表的容量比需要的容量大了许多，那么我们可以通过使用trimToSize方法来节省内存。例如，如果aList是一个ArrayList的实例，那么调用aList.trimToSize（）就会将aList的容量缩小到其实际尺寸，使其不包含任何未使用的容量。正常情况下，如果我们知道不会很快用到额外的容量，那么就应该使用trimToSize。

旁白：ArrayList的早期版本  

在Java 5.0之前的版本中，有一个名为ArrayList但不是参数化的类，它的用法与其他类一样。例如，  

![](../Images/image11350.gif)

这个陈旧的类在Java最近的版本中仍旧可以使用，并且近似等于ArrayList <Object>类。因此，前面这行代码近似等价于：  

![](../Images/image11351.gif)

ArrayList<Object>类和陈旧的ArrayList类并不完全等价，但是对于简单的应用而言，它们可以被认为是等价的。这两个类之间的区别只有在处理与强制类型转换或子类型化相关的问题时才会凸显。这个陈旧的类与较新的参数化的ArrayList类一样位于java.util包中。如果你的程序是用Java之前的版本编写的，那么了解这个陈旧的类就会很有意义。  

疑难杂症：用赋值语句来赋值列表

就像其他类的对象一样，对于数组而言，我们不能通过使用赋值语句来获取ArrayList实例的副本。例如，考虑下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11352.jpeg)

这段代码直接将anotherName作为了aList的另一个名字，使得我们只有一个列表却有两个名字。如果想要得到一个与aList相同的副本，从而得到两个分离的副本，那么就需要使用clone方法。因此，我们不应该写出上面的赋值语句，而是应该编写下面的语句：

![](../Images/image11353.gif)

对于不是字符串的其他对象的列表，使用clone方法可能会更复杂，并且可能会有不少坑。附录J更详细地解释了这个方法。