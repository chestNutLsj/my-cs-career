   

## 练习

1.编写一个程序，将葛底斯堡演说写入一个文本文件。将每句话都放置在文件中单独的行中。

2.修改上一个练习的程序，让其从键盘读取文件的名字。

3.编写一些代码，让用户输入append或new。根据用户的响应，打开数据可以追加到其中的已有文本文件，或者新建数据可以写入其中的空文本文件。在这两种情况下，文件名都是由变量fileName给定的字符串。

4.编写一个程序，记录商店的购物记录。对于每一笔购买记录，都要从键盘读取商品的名字、单价和购买的数量。计算每一笔购买记录的总价（购买数量乘以单价），并将所有数据写出到一个文本文件中，同时，在屏幕上显示这些信息。在输入所有商品之后，将总价同时写出到屏幕上和文件中。因为我们希望记住所有的购买记录，所以你应该在文件的末尾追加新数据。

5.修改第9章练习13中描述的LapTimer类，具体如下：

·给文件流添加一个属性，表示我们可以写入的次数。

·添加一个构造器

![](../Images/image11188.gif)

用于有n圈的径赛。将用于记录时间的人名和文件名当作字符串传递给了该构造器。文件要能打开，而人名要能写入该文件。如果该文件无法打开，则抛出异常。

6.编写一个TelephoneNumber类，用来持有电话号码。这个类的对象拥有下列属性：

·areaCode：3位整数。

·exchangeCode：3位整数。

·number：4位整数。

以及下列方法：

·TelephoneNumber（aString）：创建并返回该类新实例的构造器，假设字符串的形式为xxx-xxx-xxxx，或者为在缺少区号时的xxx-xxxx。如果格式无效，则抛出异常。（提示：为了简化该构造器，我们可以将电话号码中的每个连字符都替换为空白符。为了接受包含连字符的电话号码，你可以以每次处理一个字符的方式来处理该字符串，或者学习一下如何使用Scanner类来读取由除空白字符之外的某个字符分隔的多个单词，例如连字符。）

·toString：按照上面所示的构造器的两种格式之一返回一个字符串。

使用文本编辑器创建一个包含若干个电话号码的文本文件，格式为上面描述的两种格式之一。编写一个程序，读取该文件的数据，将它们显示在屏幕上，并且创建一个基类型为TelephoneNumber的数组，允许用户在其中添加或删除电话号码。将修改过的数据写入文本文件，替换原来的内容。然后，读取并显示修改后的文件中的号码。

7.编写一个ContactInfo类，用来存储每个人的联系方式。它应该具有的属性包括人名、工作电话、家庭电话、手机、e-mail地址和家庭地址。它应该具有一个toString方法，以字符串的方式返回这些数据，其中对并无对应取值的所有属性都做了适当的处理。它应该具有一个ContactInfo（aString）构造器，它用字符串aString中的数据来创建并返回该类新的实例。该构造器应该与toString方法产生的格式保持一致。

使用文本编辑器来创建包含若干个人的联系信息的文本文件，数据格式就像上一段话所描述的那样。编写一个程序，读取该文件的数据，将它们显示在屏幕上，并且创建一个基类型为ContactInfo的数组。允许用户执行下列操作：修改联系人的数据、添加联系人或者删除联系人。最终，用修改后的联系人数据覆盖该文件。

8.编写一个程序，读取文本文件中的每一行，移除每一行的第一个单词，然后将所产生的行写入新的文本文件。

9.重写上一个练习，但是将新的行写入新的二进制文件而不是文本文件。

10.编写一个程序，通过逐行复制，创建一个文本文件的副本。从键盘上读取现有文件的名字和新文件（副本）的名字。使用File类的方法来测试源文件是否存在，并且是否可读。如果不存在，就显示一条错误消息，并终止程序。类似地，还要检查新的文件名是否已经存在。如果存在，则显示一条警告信息，并允许用户要么终止程序，覆写已有文件，要么输入新的文件名。

11.假设给定一个包含人名的文本文件，文件中每个名字都包含姓和名。遗憾的是，创建这个包含人名的文件的程序员有些脑洞大开，并没有将每个名字都写在文件中单独的行中。读取这个文件中的名字，将它们写入新的文本文件中，每个名字一行。例如，如果输入文件包含：

![](../Images/image11189.gif)

输出文件应该是：

![](../Images/image11190.gif)

12.假设你有一个二进制文件，其中包含类型为int或double的数字。你不知道这些数字在文件中的顺序，但是它们的顺序记录在文件开头处的一个字符串中。这个字符串由若干个字母i（表示int）和d（表示double）构成，它们按照后续数字所属的类型排序。这个字符串是用writeUTF方法写入的。

例如，字符串"iddiiddd"表示文件中包含如下8个值：1个整数，后面跟着2个浮点数，然后又是2个整数，最后又是3个浮点数。读取这个二进制文件，并创建一个由这些值构成的新的文本文件，其中每个值一行。

13.假设我们想要将数字化音频信息存储到二进制文件中。在典型情况下，音频信号中一个采样值与下一个采样值之间不会有太多的变化。在这种情况下，如果只记录数据值中的变化而不是实际的数据值，那么就可以使用更少的内存。我们将在下面的程序中运用这种想法。

编写一个程序StoreSignal，它将从键盘（或从文本文件，如果你喜欢的话）读取若干正整数，这些整数每一个与前一个整数的差都必须在127以内。将第一个整数写入一个二进制文件中，对于后续每个整数，计算它与前一个整数的差，将差强制类型转换为byte类型，并将结果写入二进制文件中。当遇到负整数时，停止向文件写入。

14.编写一个程序RecoverSingal，它将从由上一个练习所描述的StoreSignal写入的二进制文件中读取数据。将这些数据所表示的整数值显示在屏幕上。

15.尽管二进制文件不是文本文件，但是它可以包含嵌入的文本。为了验证是否属于这种情况，请编写一个程序，它将打开一个二进制文件，并每次读取一个字节。显示每个字节的整数值，如果一个字节是用ASCII表示的字符，则同时还显示出该字符。

技术细节：为了将字节转换为字符，可以使用下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11191.jpeg)

toChars方法的byteValue引元是int类型，它的值等于从文件中读取的字节，由该字节表示的字符为charArray[0]。因为一个整数有4个字节，所以byteValue可以表示4个ASCII字符。toChars方法会尝试将4个字节每个都转换为一个字符，并将它们置于一个char数组中。我们只对索引为0的字符感兴趣。如果文件中的一个字节并不对应于某个字符，那么该方法就会抛出一个IllegalArgumentException异常。如果抛出了该异常，则只显示字节值，并继续处理下一个字节。