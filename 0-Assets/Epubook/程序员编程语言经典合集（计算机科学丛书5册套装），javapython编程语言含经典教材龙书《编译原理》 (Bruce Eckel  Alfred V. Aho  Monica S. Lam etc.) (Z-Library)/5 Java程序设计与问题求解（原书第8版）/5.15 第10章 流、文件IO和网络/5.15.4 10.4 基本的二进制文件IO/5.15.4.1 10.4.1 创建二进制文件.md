   

### 10.4.1　创建二进制文件

如果我们想要创建二进制文件来存储基本类型值、字符串或其他对象，那么可以使用流类ObjectOutputStream。程序清单10.5展示了一个将整数值写到二进制文件中的程序。我们来看看这个程序所展示出来的细节。

程序清单10.5　使用ObjectOutputStream向二进制文件写入数据

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11139.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11140.jpeg)

注意，这个程序本质上就是一个try块。任何按照我们所描述的方式操作二进制文件I/O的代码都可以抛出IOException。我们的程序可以捕获所有抛出的IOException，使得我们可以获得错误消息并使程序正常终止。

我们可以像下面这样为二进制文件numbers.dat创建一个输出流：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11141.jpeg)

与使用文本文件一样，这种处理称为打开（二进制）文件。如果文件numbers.dat不存在，那么这条语句将创建一个名为number.dat的空文件。如果文件numbers.dat已经存在，那么这条语句将会擦除该文件中的内容，使得该文件以清空状态开始操作。这种情况基本上与打开文本文件时相同，只是在此我们使用的是不同的类。

注意，ObjectOutputStream的构造器不能接受字符串引元，但是FileOutputStream的构造器可以。而且，ObjectOutputStream有一个接受一个FileOutputStream对象作为引元的构造器。因此，与从文本文件中读取数据时将一个File对象传递给Scanner的构造器的做法很类似，我们将一个FileOutputStream对象传递给了ObjectOutputStream的构造器。注意，ObjectOutputStream的构造器可能会抛出IOException，而FileOutput-Stream的构造器可能会抛出的是FileNotFoundException。