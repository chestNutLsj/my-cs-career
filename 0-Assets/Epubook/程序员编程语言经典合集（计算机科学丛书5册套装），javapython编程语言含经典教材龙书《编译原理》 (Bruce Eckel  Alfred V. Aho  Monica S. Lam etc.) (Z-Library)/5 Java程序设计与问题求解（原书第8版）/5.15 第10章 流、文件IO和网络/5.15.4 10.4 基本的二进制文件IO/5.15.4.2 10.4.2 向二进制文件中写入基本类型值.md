   

### 10.4.2　向二进制文件中写入基本类型值

ObjectOutputStream类的对象没有名为println的方法，而在写入文本文件或写到屏幕上时，所使用的流对象是有这个方法的。但是，它有一个名为writeInt的方法，可以将单个int值写入二进制文件，同时还包含其他一些我们马上就会讨论的输出方法。因此，一旦我们将ObjectOutputStream类的流对象outputStream与某个文件连接起来，就可以向该文件写入整数了，就像下面这条在程序清单10.5中的语句一样：

![](../Images/image11142.gif)

writeInt方法可能会抛出IOException。

程序清单10.5展示了文件numbers.dat中的数字，就像它们是以人类可读的形式写入文件的一样。但是，这种形式并非它们实际被写入的形式。二进制文件在数据项之间没有任何线段或其他分隔符。实际上，这些数据项是以二进制的形式（即作为字节序列）写入文件的，这些数据项在文件中是一个接一个紧凑排列的。这些经过编码的值在典型情况下是不能使用编辑器来阅读的。实际上，它们只对其他的Java程序具有意义。

我们可以使用ObjectOutputStream类的流来写入任何基本类型的值。在ObjectOutputStream类中，针对每种基本数据类型都有一个对应的写方法，例如writeLong、writeDouble、writeFloat和writeChar。

writeChar方法可以用来写入单个字符。例如，下面的语句将会把字符'A'写到与名为outputStream的流相连接的文件中：

![](../Images/image11143.gif)

writeChar方法有一个可能会令人惊讶的属性：它期望其引元是int类型的。因此，如果我们的引元是char类型的，那么这个char值在传递给writeChar方法之前需要先被类型强制转换为int。因此，上面的调用等价于下面的调用：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11144.jpeg)

在完成向二进制文件的写入工作后，我们可以按照关闭文本文件的方式来关闭它。下面的语句将关闭该二进制文件：

![](../Images/image11145.gif)

图10.5对ObjectOutputStream类中的一些方法进行了总结，包括我们尚未讨论过的方法。这些方法中许多都可能会抛出IOException。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11146.jpeg)

图10.5　ObjectOutputStream类中的一些方法

回顾：创建二进制文件

语法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11147.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11148.jpeg)

示例

请查看程序清单10.5。

自测问题

12.编写一些Java代码，创建一个ObjectOutputStream类型的输出流，将其命名为toFile，并将其与名为stuff.data的二进制文件连接。

13.给出3条语句，它们会将3个double类型的变量x1、x2和x3的值写到文件stuff.data中。请使用你在上一个自测问题中创建的toFile流。

14.给出一条语句，关闭在前两个自测问题中创建的toFile流。

15.在创建二进制文件时，需要用到哪些import语句？