   

### 10.3.5　定义方法来打开流

设想一下，我们想要编写一个方法来打开文件。这里，我们将使用文本文件，将其打开用于输出，但是这种想法可以应用于任何种类的文件。我们的方法具有一个表示文件名的String参数，它可以是一个字面常量，也可以是从用户处读取的字符串，就像之前展示的那样。下面的方法创建了一个输出流，将其连接到具名的文本文件上，然后返回该流：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11130.jpeg)

我们可以像下面这样调用该方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11131.jpeg)

然后继续用outputStream向文件中写入数据。文件OpenFileDemo.java中的简单程序展示了这项技术，该文件包含在本书网站上的源代码中。

如果我们已经把这个方法编写成了一个具有流类型参数的void方法，而不是返回一个输出流，该怎么办呢？下面的方法看起来很合理，但是却存在问题：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11132.jpeg)

例如，让我们考虑下面调用这个方法的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11133.jpeg)

在这段代码执行之后，toFile的值仍旧为null。这个文件是在openFile方法中打开的，在该方法结束时这个文件就无法访问了。这里的问题与Java处理类类型引元的方式有关，这些引元是作为不可修改的内存地址传递给方法的。在该内存地址处的对象的状态在正常情况下是可以修改的，但是该内存地址本身无法修改。因此，我们无法修改toFile的值。

这种机制只适用于方法的引元。如果流变量是实例变量或者是在方法体中作为局部变量声明的，那么我们就可以打开一个文件，并将其连接到该流变量上，上述问题也就不会发生了。一旦流与文件连接，我们就可以将该流变量当作引元传递给某个方法，而该方法也可以修改该文件。