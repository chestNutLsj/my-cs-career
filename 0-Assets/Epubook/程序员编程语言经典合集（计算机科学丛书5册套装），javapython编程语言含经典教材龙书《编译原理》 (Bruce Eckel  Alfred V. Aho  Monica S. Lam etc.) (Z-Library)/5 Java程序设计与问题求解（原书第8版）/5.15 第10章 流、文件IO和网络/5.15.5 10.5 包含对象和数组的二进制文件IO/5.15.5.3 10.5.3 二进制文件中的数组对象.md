   

### 10.5.3　二进制文件中的数组对象

因为Java会将数组当作对象处理，我们可以使用writeObject将整个数组写入二进制文件，并且可以使用readObject从文件中将其读出。在执行这样的操作时，如果数组的基类型是类类型，那么这个类应该是可序列化的。这意味着，如果我们将一个可序列化类的所有对象都存储到单个数组中，就可以只用一个对writeObject的调用将所有数据写出到二进制文件中。

例如，假设group是一个Species对象的数组。如果toFile是一个与二进制文件相关联的ObjectOutputStream的实例，那么我们就可以通过执行下面的语句将该数组写入到这个文件中：

![](../Images/image11173.gif)

在创建该文件之后，可以使用下面的语句来读取该数组：

![](../Images/image11174.gif)

其中fromFile是与我们刚刚创建的文件相关联的ObjectInputStream的实例。

注意，上面的数组的基类型Species是可序列化的。还要注意，在从文件中读取该数组时，使用了类型强制转换。因为readObject会将它的值当作Object类型的对象返回，所以它必须被强制类型转换为正确的数组类型，即本例中的Species[]。

程序清单10.11包含了一个用二进制文件来读写数组的样例程序。注意，我们是在try块之外声明数组oneArray和anotherArray的，这样可以让它们在这些块的外部和内部都能被访问到。还要注意，anotherArray被初始化成了null，而不是new Species[2]。

如果我们在这里分配新数组，它也会被后续对readObject的调用所替代。即，readObject会创建新数组，而不会对现有的数组进行填充。

程序清单10.11　数组对象的文件I/O

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11175.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11176.jpeg)

自测问题

30.如何让一个类成为可序列化的？

31.ObjectInputStream类的readObject方法的返回类型是什么？

32.ObjectOutputStream类的writeObject方法可能会抛出哪些异常？（请查询Java类库的文档。）

33.ObjectOutputStream类的readObject方法可能会抛出哪些异常？（请查询Java类库的文档。）