   

### 10.2.2　在文本文件中追加内容

在程序清单10.1中，我们打开文本文件用于输出的方式可以确保我们总是以空文件开始。如果所命名的文件已经存在，那么它原有的内容就会丢失。但是，有时，这种处理方式并不是我们想要的。我们可能只是想在文件的末尾添加或者说追加数据。为了在由String变量fileName命名的文本文件中追加程序输出，我们需要像下面这样将该文件与outputStream流连接：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11101.jpeg)

因为PrintWriter没有适合这项任务的构造器，所以我们需要FileOutputStream类的帮助，这个类需要从java.io包中导入。FileOutputStream的构造器的第二个引元（true）表示如果该文件已经存在的话，我们想要在文件中添加数据。因此，如果该文件已经存在，那么它的原有内容将保留，程序的输出将会置于这些内容之后。但是，如果文件并不存在，那么Java就会创建一个具有该名字的空文件，并将输出追加到这个空文件的末尾。在这种情况下，其效果与程序清单10.1中的效果相同。

在以这种方式向文本文件中追加内容时，我们使用的仍旧是与程序清单10.1相同的try和catch块。程序清单10.1中的向out.txt文件中追加内容的程序版本就是Append-TextFile.java文件中的程序，其可在本书网站上下载。

回顾：打开文本文件用于追加数据

我们可以创建PrintWriter类的流，用来在已有文本文件的末尾追加数据。

语法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11102.jpeg)

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11103.jpeg)

在这条语句之后，我们可以使用println和print方法向文件中写数据，新的文本将被写到文件中原有文本的后面。（在实践中，我们可能希望将流对象的声明与对构造器的调用分离，就像程序清单10.1中所做的那样，因此，我们可以在打开文件时处理可能会抛出的FileNotFoundException异常。）

自测问题

4.编写一段代码，创建名为outStream的流，它是PrintWriter类的对象，然后将该对象与名为sam.txt的文本文件连接起来，使得你的程序可以将输出发送到该文件中。如果文件sam.txt不存在，那么就创建一个新文件。但是，如果名为sam.txt的文件已经存在，那么删除其原有内容，使得该程序可以从具有该名字的空文件开始处理。

5.重写问题4，但是如果sam.txt文件已经存在，那么将新数据写到文件中原有内容的后面。

6.重写问题4，但是从用户处读取文件名。

7.下面的语句可能会抛出哪种异常？如果抛出这种异常，意味着什么？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11104.jpeg)