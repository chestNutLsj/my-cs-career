   

### 10.2.3　从文本文件中读取内容

程序清单10.2包含一个简单的程序，它会从文本文件中读取数据并写到屏幕上。文件out.txt可以是某个用户用文本编辑器创建的，也可以是由某个Java程序使用Print-Writer类创建的，例如程序清单10.1中的程序。注意，我们使用的是Scanner类，与我们用来从键盘读入数据的类是同一个类。回忆一下，我们将System.in当作引元传递给了Scanner的构造器。

程序清单10.2　从文本文件中读取数据

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11105.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11106.jpeg)

遗憾的是，我们不能将文件名传递给Scanner的构造器。尽管Scanner确实有一个接受字符串引元的构造器，但是这个字符串会被解释成数据，而不是文件名。但是，Scanner还有一个构造器，接受另一个标准类File的实例作为引元，而File又有一个我们可以向其传递文件名的构造器。（下一节将更加详细地描述File类。）因此，下面形式的语句可以打开一个文件用于输入：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11107.jpeg)

如果程序试图打开某个文本文件用于输入，但是并不存在这样的文件，那么Scanner的构造器就会抛出FileNotFoundException。正如在本章前面小节中看到的，在某些其他情况下也会抛出FileNotFoundException。

注意，程序清单10.2中的程序与创建文本文件的程序清单10.1中的程序具有某些相似性。它们都使用try-catch块打开文件，对文件执行了相同的操作，然后关闭文件。我们来看看程序清单10.2中读取并显示整个文件的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11108.jpeg)

这个循环会读取并显示文件中的每一行，每次显示一行，直至文件末尾。程序清单10.2中所示的屏幕输出假设文件out.txt就是我们用程序清单10.1中的程序创建的文件。

Scanner类中所有我们之前用到过的方法对于我们来说仍旧可用，并且其工作方式也相同。这些方法中的某些方法（例如nextLine）在第2章表2.5中进行了描述。但是，我们之前从未使用过hasNextLine方法，它会在文件中还有另外一行可用于输入的情况下返回true。图10.3对这个方法以及一些其他类似的方法进行了总结。

回顾：读取文本文件

语法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11109.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11110.jpeg)

示例

请查看程序清单10.2。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11111.jpeg)

图10.3　Scanner类中更多的方法（请同时查看表2.5）

自测问题

8.编写一些代码，创建名为textStream的流，它是PrintWriter类的对象，然后将这个流与名为dobedo的文本文件连接起来，使得你的程序可以将输出发送到这个文件。

9.假设你用上一个自测问题中定义的流来运行向文本文件dobedo写出数据的程序。编写一些代码，创建名为inputStream的流，它可用来以我们在本节中所讨论的方式从这个文本文件中读取数据。

10.Scanner类的next方法返回的值是什么类型？Scanner类中的nextLine方法返回的值又是什么类型？