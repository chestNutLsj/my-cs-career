   

# 附录D　DecimalFormat类

DecimalFormat类在Java类库的java.text包中，因此，通过在Java程序开头处包含下面的导入语句，就可以让该程序使用它：

![](../Images/image11460.gif)

你可以用这个类将小数转换为可以在屏幕上显示或写入文本文件的格式化字符串。尽管这个类定义了大量不同的方法，但是本附录将只描述其中一个方法，即format方法。DecimalFormat类的完整文档可以在Oracle的网站上获得。

使用format方法的一般方式会要求你创建一个描述你想要的小数格式的String模式。例如，模式“00.000”表示在小数点前有2位，在小数点后有3位。如果数字的值与指定的格式模式不一致，那么就会突破格式，以确保在小数点左边不会丢失任何数字。例如，模式“00.000”要求在小数点前面只有两位数字，但是数字123.456将会被格式化为123.456。注意，当模式指定的小数部分的数字少于实际数字的小数部分数字时，小数部分会做舍入。因此，使用相同的模式时，数字12.3456会被格式化为12.346。

一旦有了模式，就可以通过编写下面形式的语句来创建DecimalFormat类的对象了。

语法

![](../Images/image11461.gif)

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11462.jpeg)

然后，可以使用format方法将double类型的值像下面这样转换为对应的由数字构成的String。

语法

![](../Images/image11463.gif)

该方法会返回对应于Double_Expression的字符串。

示例

![](../Images/image11464.gif)

如果对象formattingObject是用前面例子中的模式“00.000”创建的，那么前面的println语句产生的输出就是12.346。

注意，format方法返回的字符串是StringBuffer类而不是String类的对象。StringBuffer类似于String，但是它具有可以修改其实例的值的方法。

其他模式符号

你还可以创建像“#0.##0”这样的模式，其中字符‘0’表示强制要求有一位数字，而‘#’表示可选地有一位数字。如果‘#’对应于一个先导0或者一个后缀0，那么0就会从所产生的字符串中删除。例如，下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11465.jpeg)

会显示3.5，而

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11466.jpeg)

会显示03.50。

字符‘%’放在模式的末尾表示数字会表示成百分数。‘%’会将数字乘以100，然后在后面追加一个百分号（%）。例如，下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11467.jpeg)

会显示12.3%。

你可以在模式中放置美元符号或逗号，用来格式化货币或很大的数值。这两个字符会不做任何变化地出现在模式指定的位置上。表D.1包含这种模式的一些例子。

表D.1　一些格式化小数的结果

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11468.jpeg)

通过在模式字符串中包含‘E’，就可以指定用E标记法来显示数值。例如，模式“00.###E0”大致表示在小数点前面有2位数字，在小数点后面有3位或更少的数字，在E后面至少1位数字，就像12.346E1。至于到底会产生什么样的字符串，其中的确切细节有些复杂。当小数点前面和后面的位数满足指定的限制条件时，指数是3的倍数，这是一种工程师使用的标记法。要想了解E标记模式的工作原理，你应该多找些案例研究一下。在任何情况下，都不要指望可以非常精确地指定有效数字的位数。表D.2展示了使用E标记法格式化一些值的结果。

表D.2　一些用相同的E标记模式格式化小数的结果

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11469.jpeg)

程序清单D.1包含的程序演示了一些模式的用法和效果。

程序清单D.1　DecimalFormat类的演示程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11470.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11471.jpeg)