   

### 6.4.1　重载基础知识

在将相同的名字赋给同一个类中的两个或多个方法时，就是在重载该方法名。为了能够这样做，我们必须确保不同的方法定义在参数列表上要有所差异。

例如，程序清单6.15中包含了一个非常简单的重载的示例。该程序清单中的Overload类定义了三个不同的静态方法，全部都被命名为getAverage。当调用Overload.getAverage时，Java是如何知道需要使用getAverage的哪个定义的呢？如果所有的引元都是double类型的，那么Java就可以通过引元的数量来判断将要使用getAverage的哪个定义：如果有两个double类型的引元，那么Java将使用getAverage的第一个定义；如果有三个引元，它将使用第二个定义。

程序清单6.15　重载

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10428.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10429.jpeg)

现在，假设对方法getAverage的调用有两个char类型的引元。Java由引元的类型而得知应该使用getAverage的第三个定义，因为只有这个定义具有两个char类型的引元。（现在，先不要操心该方法是如何对两个字符求平均值的。这是我们稍后就会回来解释的附带问题。）  

如果重载方法名，即，如果将相同的名字赋给同一类中的多个方法定义，那么Java会根据参数的数量和参数的类型来区分它们。如果对某个方法的调用与某个方法的定义在名字上匹配，并且第一个引元与第一个参数具有相同的类型，第二个引元与第二个参数具有相同的类型，以此类推，如果都匹配上了，那么就使用这个方法定义。如果不存在这样的匹配，那么Java就会尝试执行本书之前讨论过的某些简单的类型转换，例如将int值强制类型转换为double值，以查看是否可以产生有效的匹配。如果失败，我们就会得到一条错误消息。

方法的名字以及参数的数量与类型称为方法的签名。因此，另一种描述重载规则的方式是：同一个类中的各个方法必须具有不同的签名。或者说，一个类不能定义两个或多个具有相同签名的方法。

注意，你已经在使用重载了，尽管你可能之前还不了解这个术语。方法名print和println在Java类库的PrintStream类中都被重载了，它们每个都有一个参数，但是在其中一个版本中，该参数的类型是String，而在另一个版本中，该参数的类型是int或double。另外，在本章之前讨论过的Math类中的许多方法也都使用了重载。例如，Math具有若干个版本的max方法，它们都具有相同的名字，每个版本都有两个参数。对它们的调用也都是根据引元的类型来区分的。如果两个引元为int类型，那么max就会返回int类型的值；如果两个引元都是double类型，max就会返回double类型的值。

重载可以应用于任何种类的方法，包括void方法、有返回值的方法、静态方法、非静态方法或者这些种类的任意组合的方法。我们还可以重载构造器。程序清单6.1中的Pet类的构造器都具有相同的名字，因此都被重载了。它们正好为我们提供了一个可以用来分析的明确示例。

让我们回忆一下程序清单6.1中定义的构造器的头：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10430.jpeg)

注意，每个构造器要么参数数量不同，要么参数类型有别于其他构造器。因此，对构造器的每个调用都会涉及不同的定义。

例如，下面每个Pet对象都是通过对不同的构造器进行调用而创建的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10431.jpeg)

第一条语句调用的是缺省构造器，因为没有提供任何引元。在第二条语句中，赋给myCat的对象是调用接受3个引元的构造器所产生的结果。剩下的3条语句每条都会调用只需要一个引元的构造器，那么如何选择这些构造器呢？答案就是选择其参数与调用中的引元在类型上匹配的构造器。因此，Pet（“Spot”）会调用参数是String类型的构造器，Pet（20）会调用参数是int类型的构造器，而Pet（750.5）会调用参数是double类型的构造器。

回顾：重载

在一个类中，可以有两个或多个方法的定义具有相同的名字，但是必须具有不同数量的参数或者对应的参数具有不同的类型。即，这些方法必须具有不同的签名。这称为方法名的重载。