   

### 6.4.3　重载和返回类型

在重载方法名时，如果给出的两个方法定义的头只是在返回值的类型上有区别，那么是无法实现重载的。例如，你可能想要在程序清单6.1的Pet类中添加另一个名为getWeight的方法。设想一下，这个新方法会返回一个字符，告知你该宠物是否超重或过轻了，即‘+’表示超重，‘-’表示过轻，而‘*’表示体重正好，其返回类型应该是char。因此，假设我们有两个方法，分别具有下面的方法头：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10440.jpeg)

遗憾的是，这是非法的。在任何类定义中，同一个方法名的两个定义必须要么具有不同数量的参数，要么至少有一对对应的参数具有不同的类型。我们无法只基于返回类型的不同而实现重载。回忆一下，方法签名中是不包含返回类型的。因此，这两个getWeight方法的签名是相同的，这是非法的。

如果仔细思考，就会发现我们甚至无法编写出能够基于返回类型进行重载的编译器。例如，假设有如下的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10441.jpeg)

现在假设与实际情况相反，我们可以同时包含两个版本的getWeight方法。考虑一下在这种情况下可怜的编译器要做的工作。尽管我们还没有讨论过，但是你要知道你是可以将char类型的值存储到double类型的变量中的。Java将会执行自动类型转换，将这个char值改变为double值。这样，在这个假设的场景中，变量value就既可以是一个double值，又可以是一个char值了。

因此，编译器无法判断程序员需要的是哪个版本的getWeight了。编译器不得不向程序员求教，而编译器是不允许向程序员询问问题的。

疑难杂症：你不能基于返回类型进行重载

类不能有若干个方法具有相同的名字和相同的参数而只是返回类型不同。这样的方法具有相同的签名，在Java中，这是非法的。

自测问题

32.下面的构造器调用如果放到程序清单6.2的程序中，是否有效？

![](../Images/image10442.gif)

33.在一个类中是否可以同时包含下面两个方法定义？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10443.jpeg)

34.在一个类中是否可以同时包含下面两个方法定义？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10444.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10445.jpeg)

35.考虑第5章程序清单5.19中的Species类，它包含一个名为setSpecies的方法，用来设置物种的名称、种群数量和物种的生长率。这个类是否可以有另一个setSpecies方法，它只有一个表示物种名称的参数，并且会将种群数量和物种的生长率设置为0？如果可以，给出这个setSpecies方法的定义。

36.重写上一个自测问题中的setSpecies方法，只设置物种的名称，而不设置任何其他的实例变量。

37.再次考虑第5章程序清单5.19中的Species类，本章自测问题35和36中定义的两个名为setSpecies的方法是否可以同时添加到Species类中？