   

### 6.1.2　在构造器中调用方法

在上一章我们看到了一个方法可以调用其所属的类中的其他方法。类似地，构造器也可以调用其所属的类中的其他方法。例如，程序清单6.1的Pet类定义中所有构造器都可以修改为调用某个设置方法。特别是，Pet的第一个构造器的定义与setPet方法的定义十分类似。我们可以像下面这样定义构造器来避免重复这段代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10336.jpeg)

尽管让一个方法调用另一个方法以避免重复编写代码通常是一项良好的实践，但是在构造器调用其所属的类的公有方法时，要特别当心。此时的问题与我们将在第8章讨论的继承有关。正如你所见，有可能另一个类会修改该公有方法的行为，进而对构造器的行为造成不利的影响。第8章将向你展示防止产生此类问题的一种途径，但是我们现在就可以提供另一种解决方案：让构造器调用的方法私有。对于Pet这个例子，让setPet私有并不可行，因为我们希望它是公有的。但是，我们可以定义一个私有的、让setPet和构造器都可以调用的方法，就像下面的代码所演示的这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10337.jpeg)

Pet中其他的构造器和设置方法也可以如程序清单6.3所示，修订为调用私有方法set。

程序清单6.3　调用私有方法的构造器和设置方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10338.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10339.jpeg)

自测问题

1.如果一个类名字为Student，那么你会为这个类的构造器起个什么名字呢？

2.在定义构造器时，你会如何指定返回值的类型？私有类型？类类型？还是void？

3.什么是缺省构造器？

4.Java中每个类都会自动地拥有缺省构造器吗？如果不是，那么在什么情况下，Java才会提供缺省构造器，在什么情况下不会提供？

5.在程序清单6.2的PetDemo程序中，你可以把对三个设置方法的调用替换为一个对setPet的调用。请编写这个调用。