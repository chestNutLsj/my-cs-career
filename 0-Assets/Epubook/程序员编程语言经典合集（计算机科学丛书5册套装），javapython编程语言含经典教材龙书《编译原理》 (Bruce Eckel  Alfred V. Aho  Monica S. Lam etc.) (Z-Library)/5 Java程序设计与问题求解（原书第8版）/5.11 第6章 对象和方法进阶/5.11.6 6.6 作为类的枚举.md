   

## 6.6　作为类的枚举

光阴点滴可数，构成了我的生命。

——威廉·莎士比亚，《亨利六世》（第3部分）

第3章介绍过枚举，并且提到编译器在碰到枚举时会创建一个类，本节将讨论这个类。尽管你应该在程序中考虑使用枚举，但是本节的观点对于本书其余部分而言并非核心。

让我们为扑克牌花色定义一个简单的枚举，具体如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10464.jpeg)

编译器会创建一个类Suit。枚举值就是类型为Suit的公有静态对象的名字，正如你所知，你可以通过在名字前面加上Suit和圆点来引用这些值，就像下面的赋值语句一样：

![](../Images/image10465.gif)

Suit类有若干个方法，其中包含equals、compareTo、ordinal、toString和valueOf。下面的示例展示我们如何使用这些方法，假设变量s引用的是Suit.DIAMONDS：

·s.equals（Suit.HEARTS）会测试s是否等于HEARTS。在本例中，equals将返回false，因为DIAMONDS不等于HEARTS。

·s.compareTo（Suit.HEARTS）会测试s在Suit的定义中位于HEARTS之前、之后还是位置相同。就像第3章所描述的String类中的compareTo方法一样，这里的compareTo会根据比较的结果返回一个正整数、0或负整数。在本例中，compareTo会返回一个负整数，因为DIAMONDS在枚举中出现在HEARTS前面。

·s.ordinal（）会返回DIAMONDS在枚举中的位置，或者称为序号值。枚举中的对象是从0开始编号的，因此在本例中，s.ordinal（）会返回1。

·s.toString（）会返回字符串"DIAMONDS"，即，toString会将其调用对象的名字作为字符串返回。

·Suit.valueOf（“HEARTS”）会返回Suit.HEARTS对象。字符串引元与枚举对象的名字之间必须精确匹配。字符串中的任何空白字符都不会被忽略。valueOf方法是静态方法，因此在调用中其名字前面是Suit和圆点。

对于任何枚举，我们都可以定义私有实例变量和附加的公有方法，包括构造器。通过定义实例变量，就可以将值赋给枚举中的对象。添加一个get方法就可以提供一种访问这些值的途径。我们在程序清单6.20中所示的Suit枚举的新定义中添加了实例变量和方法。

程序清单6.20　增强版的Suit枚举

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10466.jpeg)

由于我们选择了字符串作为枚举对象的值，因此我们添加了作为String对象的实例变量color，并且添加了一个设置该变量值的构造器。像CLUBS（“black”）这样的标记法会调用这个构造器并将CLUBS的私有实例变量color的值设置为字符串”black”。注意，color的值不能修改，因为它被声明为final了。我们还可以看到，该构造器是私有的，因此不能直接调用它，它只能在Suit的定义内部调用。getColor方法提供了对color值的公有访问权限。

枚举可以拥有像public或private这样的访问修饰符。如果删除这些访问修饰符，那么枚举在缺省情况下是私有的。你可以将公有枚举定义在其自己的文件中，就像定义其他任何公有类一样。

自测问题

41.如果cardSuit是Suit的实例，并且被赋值为Suit.SPADES，那么下面每个表达式各自会返回什么？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10467.jpeg)