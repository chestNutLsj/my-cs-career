   

### 6.2.4　在类中添加main方法

到目前为止，无论何时，只要编写了main方法，它自身就是一个在单独文件中的完整的类定义。但是，有时在类定义的内部直接包含main方法会显得更合理。这样的类可以有两种用途：用来在其他类中创建对象，或者可以作为程序运行。例如，可以在上一章程序清单5.19中给出的Species类的定义内部编写main方法，其结果展示在程序清单6.11中。

在以这种方式重新定义Species类之后，作为程序运行时就会调用main方法。当Species用作普通类来创建对象时，main方法就会被忽略。

因为main方法是静态的，所以它无法包含对同一个类中的非静态方法的调用，除非它拥有一个该类的对象，并通过该对象来调用非静态的方法。程序清单6.11中的main方法调用了Species类的方法，其方式是首先创建一个Species类的对象，然后使用它来调用其他方法。这样做是必需的，尽管main方法在Species类定义的内部。

程序清单6.11　在类定义中放置main方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10363.jpeg)

编程窍门：向类中添加main方法用于测试该类

你不应该在一个用于创建对象的普通类的类定义中放置main方法。但是，在类定义内部放置一个小型的用于诊断的main方法可以提供一种便捷的测试该类的途径。这样做还可以提醒其他程序员，你已经做过测试了。我们将在本章稍后更详细地讨论测试。