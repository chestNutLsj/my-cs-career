   

### 6.2.6　包装器类

Java中的基本类型（例如int、double和char）与类类型（例如String类和程序员定义的类）存在明显的差异。例如，在第5章中我们看到，传递给方法的引元根据其是基本类型还是类类型，会以不同的方式处理。如果某个方法需要类类型的引元，但是我们拥有的是基本类型的值，那么就需要将基本类型的值（例如int值42）转换为“等价的”对应于基本类型int的某种类类型的值。为了实现这种转换，Java为每种基本类型都提供了包装器类。这些类定义了可以在基本类型值上操作的方法。

例如，基本类型int的包装器类是预定义的Integer类。如果想要将int值（例如42）转换为Integer类型的对象，那么可以像下面这样操作：

![](../Images/image10373.gif)

执行上面的操作后，n就是一个对应于int值42的Integer类的对象。实际上，对象n具有一个包含int值42的实例变量。反过来，下面的语句会将Integer类型的对象转换为int值：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10374.jpeg)

intValue方法将从Integer类型的对象中恢复出等价的int值。

对应于基本类型long、float、double和char的包装器类分别是Long、Float、Double和Character。当然，Long、Float、Double和Character类使用的肯定不是intValue方法，而是分别使用longValue、floatValue、doubleValue和charValue方法。

从诸如int的基本类型向其对应的包装器类（例如Integer）的转换在Java中会自动执行。这种类型转换称为装箱。你可以将对象看作是一个“箱子”，你可以将基本类型的值放入其中，作为其私有实例变量的值。因此，下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10375.jpeg)

可以编写为更简单的形式：

![](../Images/image10376.gif)

这些看起来更简单的赋值语句实际上就是包含了new操作符的那些较长版本的缩写。这种情况类似于将int类型的值赋值给double类型的变量时所产生的情况，此时会自动执行类型强制转换。

反过来，从包装器类到其关联的基本类型的转换称为拆箱。拆箱还是自动执行的，因此，如果n是Integer类的对象，那么下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10377.jpeg)

可以缩写为下面的形式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10378.jpeg)

下面是一些自动拆箱的例子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10379.jpeg)

这些示例背后真正发生的事情是Java会自动地应用合适的访问器方法（在这些示例中，分别是intValue、doubleValue和charValue）以此来获得用来赋值给变量的基本类型值。

自动装箱和拆箱既可以应用于参数，也可以应用于我们刚刚讨论过的简单赋值语句。我们可以将基本类型的值（例如int类型的值）插入到相关联的包装器类（例如Integer类）的参数中。类似地，我们可以将包装器类的引元（例如Integer类型的引元）插入到相关联的基本类型（例如int类型）的参数中。

到目前为止，这些包装器类的重要性主要体现在它们包含了大量有用的常量和静态方法。例如，我们可以使用相关联的包装器类来找到任何基本数值类型的最大值和最小值。int类型的最大值和最小值为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10380.jpeg)

double类型的最大值和最小值为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10381.jpeg)

MAX_VALUE和MIN_VALUE在每个包装器类Integer、Float、Double和Character中都被定义成了静态具名常量。例如，Integer类将MAX_VALUE定义为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10382.jpeg)

包装器类中的静态方法可以用来将字符串装换为对应的数值类型int、double、long和float。例如，包装器类Double的静态方法parseDouble会将字符串转换为double类型的值。因此：

![](../Images/image10383.gif)

会返回double值199.98。当然，只需观察这条语句就可以知道这一点，因此看起来似乎有些得不偿失。但是相同的技术可以用来修改字符串变量的值。例如，假设theString是String类型的变量，它的值是一个表示某个double类型数值的字符串。下面的语句将返回对应于theString的字符串值的double值：

![](../Images/image10384.gif)

如果由theString命名的字符串有可能存在额外的前导或后缀空格，那么就应该使用：

![](../Images/image10385.gif)

trim方法在String类中，并且会剪掉前导或后缀的空白字符，例如空格。在调用像parseDouble这样的方法时，使用trim总是最安全的方式，因为你永远都不会知道何时会出现前导或后缀的空格。如果字符串构成的并非是正确的数字，那么调用Double.parseDouble会导致你的程序终止。使用trim有助于避免这个问题。

这种从字符串到数字的转换可以在任何包装器类上操作，包括Integer、Long和Float，其操作方式和包装器类Double一样，只是要用Integer.parseInt、Long.parseLong或Float.parseFloat来代替Double.parseDouble。

每个数字包装器类都有一个静态方法toString，该方法将执行反向的转换，即，它会将数字值转换为该数字值的字符串表示。例如，

![](../Images/image10386.gif)

会返回字符串值“42”，而

![](../Images/image10387.gif)

将返回字符串值"199.98"。

Character是基本类型char的包装器类。下面的代码段展示了这个类的基础方法的用法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10388.jpeg)

这段代码会显示：

![](../Images/image10389.gif)

equals方法会检查字符的相等性，因此会将大写字符和小写字符当作不同的字符。

Character类还有其他一些有用的静态方法。在这些方法中，有的会执行大小写字母之间的转换，有的会测试某个字符是字母还是数字，表6.2列出了这些方法。

Java还有一个包装器类Boolean，它为两个boolean类型的常量提供了名字：Boo-lean.TRUE和Boolean.FALSE。但是，Java关键词true和false用起来会方便得多。

表6.2　Character类中的静态方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10390.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10391.jpeg)

注：空白字符是指那些打印出来是空白的字符，例如空格、制表符（‘\t’）和换行符（'\n'）。

回顾：包装器类

每种基本类型都有对应的包装器类。包装器类使得我们可以用一个类的对象来表示对应的基本类型的值。包装器类还包含大量有用的预定义常量和方法。因此，每个包装器类都有两种相关但是不同的用法。

例如，我们可以创建包装器类Integer的对象来表示对应的int类型的值，就像下面这样：

![](../Images/image10392.gif)

包装器类Integer还可以被看作是由许多有用的静态方法构成的库，例如下面的parseInt方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10393.jpeg)

任何程序都可以使用包装器类的这两种特性。

疑难杂症：包装器类没有缺省构造器

包装器类Boolean、Byte、Character、Double、Float、Integer、Long和Short都没有缺省的构造器。因此，下面这样的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10394.jpeg)

是不正确的。当我们创建这些类的新对象时，必须提供一个初始值，作为构造器的引元，就像下面的例子一样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10395.jpeg)

包装器类没有设置方法，所以我们不能修改这些类的已有对象的值。因此，Java语言的设计者们决定不允许创建具有缺省值的对象，所以他们没有定义缺省构造器。

自测问题

22.下面的语句中哪些是合法的？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10396.jpeg)

如果存在不合法的语句，请说出如何编写合法的Java语句来执行那条不合法的语句原本打算要执行的操作。

23.编写一个Java表达式，将double变量x中的数字转换为字符串。

24.考虑String类型的变量s，它包含一个字符串，该字符串是以正常方式书写的某个整数，例如“123”。编写一个Java表达式，将s中的字符串转换为对应的int类型的值。

25.重做上一个自测问题，但是允许字符串包含前导和后缀空格，例如“123”。

26.编写Java代码，显示用Java编写程序时可以使用的double类型的最大值和最小值。