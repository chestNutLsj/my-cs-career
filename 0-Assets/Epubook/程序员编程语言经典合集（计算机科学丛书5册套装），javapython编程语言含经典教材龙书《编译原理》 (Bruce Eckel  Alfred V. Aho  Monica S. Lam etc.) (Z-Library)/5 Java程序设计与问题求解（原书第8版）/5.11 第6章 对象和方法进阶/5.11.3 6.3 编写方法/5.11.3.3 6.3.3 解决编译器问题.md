   

### 6.3.3　解决编译器问题

编译器会检查以确保我们完成了某些必需的事项，例如初始化变量，或者在有返回值的方法的定义中包含了return语句。有时，你会发现编译器会要求你去完成其中某个事项，但是你可以确定你已经完成了，或者你可以确定并不需要完成该事项。在这种情况下，与编译器争辩是徒劳的，它极有可能是正确的。如果你无法在你的代码中找到错误，那么无论如何都要改动代码，使得它能够更明显地表明你已经完成了编译器让你完成的事项。

例如，假设你有一个会返回int类型值的方法，其方法定义以下面的语句结束：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10417.jpeg)

注意，这条语句并没有描述something等于somethingElse的情况，编译器可能会报错：你需要一条return语句。尽管你认为你是对的，因为你知道something永远都不可能等于somethingElse，但是你还是不得不将最后这条if-else语句修改为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10418.jpeg)

或者是与其等价的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10419.jpeg)

在上一章中，我们建议每个方法应该只包括不超过一条的return语句。如果遵循这项建议，编译器就不太可能报错了。

再来看另一个例子，假设你像下面这样声明了一个变量：

![](../Images/image10420.gif)

如果编译器坚持认为你必须初始化该变量，那么可以将这项声明修改为：

![](../Images/image10421.gif)

常量null是一个特殊的预定义常量，可以用来赋值给任何类类型的变量。因为null就像是地址，所以在测试某个变量是否包含null时，可以使用==和！=而不是equals方法。

注意，null不是对象，而是一种对象地址的占位符。只有在你确切知道在类类型的变量用于某个方法调用之前，你的代码会将某个对象赋值给该类变量的情况下，才可以使用null来初始化该类类型的变量。这意味着，只有在概念上必需时，你才应该使用null来初始化类类型的变量。但是，编译器有时会坚持要求初始化，尽管这种初始化可能并非必需。

疑难杂症：空指针异常

因为null并非对象，所以无法使用它来调用方法。如果试图这么做，就会得到一条错误消息，声称：“Null Pointer Exception”。例如，下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10422.jpeg)

就会产生这条错误消息，无论Pet类是如何定义的。纠正此问题的方式是使用new来创建Pet类型的对象，就像下面这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10423.jpeg)

随着编程经历的积累，你可能会碰到其他产生“Null Pointer Exception”消息的情况。在这些情况中，可以去查找未初始化的类类型变量。

编程窍门：编译器总是对的

嗯，我们希望确实如此。如果在调试时你抱着的是你没有犯错的念头，那么你就不太可能找到引发编译器报错的错误。