   

### 5.2.4　编程示例：为什么实例变量应该是私有的

程序清单5.9展示了一个简单的矩形类，它有3个私有实例变量，分别表示矩形的宽、高和面积。方法setDimensions可以设置宽和高，方法getArea会返回矩形的面积。

程序清单5.9　矩形类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10198.jpeg)

你可以按照如下的方式来使用Rectangle类：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10199.jpeg)

这些语句的输出如下：

![](../Images/image10200.gif)

如果Rectangle中的3个实例变量都是公有的而不是私有的，会发生什么呢？在创建一个10×5的矩形框之后，我们可以修改任何或者所有实例变量的值。因此，尽管area是50，我们仍旧能够修改width，例如，将其修改为6：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10201.jpeg)

如果之后调用getArea，得到的面积仍旧是50，而不是新的30。在让Rectangle中的实例变量成为公有时，就有可能会造成实例变量area不等于width*hieght的情况。让实例变量私有使得我们可以限制对它们的访问和修改。

疑难杂症：公有实例变量可能会导致类数据污损

前面的编程示例展示了直接通过变量名来修改实例变量的值这种能力会导致对象内部数据不一致。因为公有实例变量提供了这种能力，所以我们应该总是让实例变量私有。