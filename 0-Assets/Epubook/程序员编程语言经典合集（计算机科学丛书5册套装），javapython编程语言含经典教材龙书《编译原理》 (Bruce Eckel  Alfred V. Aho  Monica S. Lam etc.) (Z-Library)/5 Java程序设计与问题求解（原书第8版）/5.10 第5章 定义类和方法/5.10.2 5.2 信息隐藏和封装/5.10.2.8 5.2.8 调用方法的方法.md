   

### 5.2.8　调用方法的方法

方法体可以包含对其他方法的调用。这种类型的方法调用与出现在程序的main方法中的方法调用是完全相同的。但是，如果被调用的方法在同一个类中，无论被调用的方法是公有的还是私有的，通常不需要书写任何接收对象就可以调用它。

程序清单5.15包含名为Oracle的类的定义，该类的chat方法会与用户展开对话，回答用户询问的一系列单行的问题。注意，chat方法的定义包含对answer方法的调用，后者也是Oracle类的方法。如果查看answer方法的定义，就会看到它依次包含了对另外两个方法seekAdvice和update的调用，这两个方法也都是Oracle类的方法。

程序清单5.15　调用其他方法的方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10217.jpeg)

首先，我们考虑chat方法定义中对answer方法的调用。注意，命名为answer的方法前面没有对象和圆点，接收对象就是chat方法的接收对象。程序清单5.16中的演示程序创建了一个名为delphi的Oracle类的对象，然后用这个对象调用方法chat，具体如下：

![](../Images/image10218.gif)

因此，当chat调用answer时，下面的调用

![](../Images/image10219.gif)

可理解为下面的含义：

![](../Images/image10220.gif)

程序清单5.16　Oracle展示程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10221.jpeg)

在编写像chat这样的方法定义时，我们无法预知接收对象的名字将会是什么，在不同的时刻可能会不同。因为我们不知道且实际上也无法知道接收对象的名字，所以我们就忽略了它。因此，在程序清单5.15的Oracle类的定义中，当在该方法定义中编写下面的语句时：  

![](../Images/image10222.gif)

它表示的是：

![](../Images/image10223.gif)

因为关键词this表示的就是这个接受对象，所以也可以将这个调用写成下面的样子：

![](../Images/image10224.gif)

对于在同一个类中调用某个方法时省略关键词this和圆点的做法实际上并非首次，实际上，之前对实例变量的操作就是如此。如果在一个类的方法定义中调用另一个类的方法，则必须包含对象和圆点[^1]。还要注意，只有接收对象可以表示为this时，才能省略接收对象。如果接收对象是在某个方法定义内部声明并创建的对象，那么在该方法定义内部就必须包含该对象名和圆点。

让我们继续讨论Oracle类中的方法定义。我们可以有调用其他方法的方法，而被调用的方法又会去调用其他的方法。在Oracle类中，answer方法的定义包含了对另外两个方法seekAdvice和update的调用，这两个方法也都在Oracle类中。正如我们刚刚讨论过的，这些调用前面都没有对象和圆点。

让我们考虑下面出自程序清单5.16中程序的调用：

![](../Images/image10225.gif)

chat的定义中包含下面的调用：

![](../Images/image10226.gif)

该调用等价于

![](../Images/image10227.gif)

因为接收对象就是delphi，这条语句还等价于下面的调用：

![](../Images/image10228.gif)

answer的定义中包含调用

![](../Images/image10229.gif)

和

![](../Images/image10230.gif)

它们等价于

![](../Images/image10231.gif)

和

![](../Images/image10232.gif)

因为接收对象还是delphi，所以它们还等价于

![](../Images/image10233.gif)

和

![](../Images/image10234.gif)

你可以设计包含调用其他方法的方法，而被调用的方法又调用了其他的方法，以此类推，可以有任意数量的嵌套调用层数，其细节总是会按照我们刚刚描述的方式处理。

牢记：省略接收对象

当方法调用中的接收对象用关键词this表示时，可以省略this和圆点。例如，下面的方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10235.jpeg)

等价于

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10236.jpeg)

编程窍门：让辅助方法私有

再看看程序清单5.15，方法answer、seekAdvice和update都被标记成了private而不是public。回忆一下，如果一个方法被标记成了private，那么它就只能在同一个类的其他方法定义中被调用。因此，在其他某个类或程序中，下面对私有方法answer的调用是不合法的，会产生编译错误消息：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10237.jpeg)

而下面对公有方法的调用却是完全合法的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10238.jpeg)

让answer、seekAdvice和update方法私有是因为它们都只是辅助方法。使用Oracle类的程序员不应该调用这些方法，只在chat方法的定义中用到了它们。这意味着answer、seekAdvice和update方法是该类实现的一部分，并且不应该对该类的用户可用。正如我们将要在5.2.9节中强调的，让类的部分实现保持私有是一项良好的编程实践。

自测问题

17.你是否可以在某个方法的定义中调用同一个类中的另一个方法？

18.在程序清单5.15中的方法定义中，做下面的修改会产生什么效果？

将

![](../Images/image10239.gif)

修改为

![](../Images/image10240.gif)

[^1]:  这条有关在一个类的定义中调用另一个类的方法的规则不适用于静态方法，我们将在下一章讨论静态方法。但是，这条规则适用于到目前为止我们讨论过的所有种类的方法。