   

### 5.2.5　编程示例：矩形类的另一种实现

让我们看看另一个类——程序清单5.10中的Rectangle2，它与前面的Rectangle类具有完全相同的方法，但是在实现方式上略有不同。这个新的类只有在调用getArea方法时才会去计算矩形的面积，而且面积没有保存在实例变量中。

注意，使用Rectangle2这个类的方式与使用Rectangle类的方式相同，唯一的变化是我们将上一个演示Rectangle的编程示例中编写的三条语句中的Rectangle替换成了Rectangle2：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10202.jpeg)

即，我们以相同的方式调用这些方法，除了所属的类不同外，它们的行为相同。

牢记：实现不应该影响行为

两个类可以有相同的行为和不同的实现。

我们有两个类：Rectangle和Rectangle2，它们的行为方式相同。即，它们执行的任务相同，但是执行任务的方式是不同的。在Rectangle2中，getArea方法会计算并返回面积，但是没有存储它。然而，Rectangle有一个实例变量area，用来存储矩形的面积。Rectangle中的setDimensions方法会计算面积并将其存储到area中。然后，getArea方法会直接返回实例变量area中的值。

这两个类哪一个“更好”呢？答案取决于我们如何定义“更好”，以及我们如何使用这些类。我们将做下面两个方面的观察：

·Rectangle使用的内存比Rectangle2多，因为它额外增加了一个实例变量

·Rectangle总是会计算面积，即使在不需要时也会计算。

程序清单5.10　另一个矩形类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10203.jpeg)

第二个方面的观察意味着使用Rectangle时所需的计算时间比使用Rectangle2多。为了理解这一点，你需要想象一下这两个类都还有若干个其他的方法，所以确实有可能不调用getArea。如果很少请求特定矩形的面积，那么使用Rectangle2既可以节省执行时间，又可以节省内存。但是，如果针对某个特定的矩形，需要重复地调用getArea，那么使用Rectangle可以节省执行时间，因为它只计算一次面积。

牢记：实现会影响效率

类的实现方式会影响其执行时间和所需的内存。