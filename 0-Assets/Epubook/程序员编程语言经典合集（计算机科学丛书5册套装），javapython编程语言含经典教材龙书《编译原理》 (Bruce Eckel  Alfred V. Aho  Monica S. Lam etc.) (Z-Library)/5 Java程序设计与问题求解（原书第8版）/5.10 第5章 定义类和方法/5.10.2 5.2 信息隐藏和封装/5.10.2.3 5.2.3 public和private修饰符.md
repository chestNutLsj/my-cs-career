   

### 5.2.3　public和private修饰符

修饰符public在作用于类、方法和实例变量时，表示任何其他的类都可以用名字来直接使用或访问该类、方法和实例变量。例如，程序清单5.7中的程序包含下面三行代码，它们在设置对象speciesOfTheMonth的公有实例变量的值：

![](../Images/image10188.gif)

程序清单5.7　使用具有参数的方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10189.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10190.jpeg)

对象speciesOfTheMonth是一个SpeciesSecondTry类的对象，该类的定义在程序清单5.6中。正如在查看该类定义时能够看到的，实例变量name、population和growthRate都有修饰符public，因此前面三条语句都是完全合法的。

尽管公有类和方法很常见，但是让类的实例变量成为公有却并不是一项好的编程实践。典型情况下，所有实例变量都应该是私有的。我们可以通过使用private修饰符而不是public修饰符来使实例变量成为私有的。关键词public和private都是访问修饰符的示例。

假设我们将程序清单5.6中的SpeciesSecondTry类定义中的实例变量name前面的修饰符从public修改为private，使得该类的定义以下面的内容开头：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10191.jpeg)

在这种修改之下，程序清单5.7中下面的Java语句就变得非法了：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10192.jpeg)

下面两行语句仍旧是合法的，因为population和growthRate的修饰符仍旧为public：

![](../Images/image10193.gif)

当实例变量为私有时，它的名字在类定义的外部是无法访问的。即便如此，我们仍旧可以在类定义内部的任何方法中以任何方式使用其名字。特别是，我们可以直接修改实例变量的值。但是，在类定义的外部，我们无法获得对该实例变量名的任何引用。

例如，使SpeciesSecondTry类的三个实例变量都成为私有的，但是不对方法定义进行修改。其结果就是程序清单5.8所示的SpeciesThirdTry类。因为实例变量都是私有的，所以下面语句中的后三条在除了SpeciesThirdTry类之外的其他任何类中都是非法的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10194.jpeg)

程序清单5.8　包含私有实例变量的类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10195.jpeg)

但是，注意，对方法readInput的调用是合法的。因此，尽管这些实例变量都是私有的，但是仍旧存在对对象的实例变量进行设置的途径。在readInput的方法定义内部（如程序清单5.3所示），是下面的赋值语句：

![](../Images/image10196.gif)

和

![](../Images/image10197.gif)

它们设置了实例变量的值。因此，让实例变量成为私有并不表示不能修改它，而只是表示我们不能在类定义外部的任何地方用这些实例变量的名字直接引用它们。

方法也可以是私有的。如果将方法标记成private，那么它就不能在类定义的外部调用。但是，私有方法仍旧可以被与其同属一个类的其他方法定义调用。大多数方法都是公有的，但是如果某个方法只会被与其同属一个类的其他方法定义使用，那么让这种“辅助”方法成为私有就具有实际意义了。使用私有方法是另一种将实现细节隐藏于类内部的方式。

类自身也可以是私有的，但是我们将在第12章再讨论这个话题。

回顾：public和private修饰符

在类定义的内部，每个实例变量声明和每个方法声明以及类自身都可以在其前面写上public或private。这些访问修饰符指定了类、实例变量和方法可以使用的范围。如果实例变量是私有的，那么就不能在它所属的类定义的外部用它的名字来访问它。但是，可以在它所属的类的其他方法定义中使用它。如果实例变量是公有的，那么对使用其名字的范围就没有任何限制。

如果方法定义是私有的，那么该方法不能在其所属的类定义外部调用，但是可以被其所属类中的方法定义调用。如果方法是公有的，就可以不受限制地在任何地方调用。

正常情况下，所有实例变量都是私有的，而大部分方法是公有的。

编程窍门：实例变量应该是私有的

你应该让类中的所有实例变量都是私有的。这样做可以强制要求使用类的程序员（无论是你还是别人）都只能通过类的方法来访问实例变量。这使得类可以对程序员查看和修改实例变量的方式进行控制。下一个编程示例展示了为什么让实例变量私有会显得很重要。