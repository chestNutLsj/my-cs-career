   

### 5.3.6　类类型参数

类类型的方法参数与基本类型的方法参数会区别对待。我们在讨论将赋值操作符作用于对象时，首次接触到了这种差异。下面这两点从那次讨论中得出的结论有助于我们描述类类型参数的工作方式。

·首先，回忆一下赋值操作符是如何作用于对象的。假设Species是程序清单5.19中定义的类，请考虑下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10274.jpeg)

在将赋值操作符作用于类类型的对象时，我们实际上是在复制内存地址。因此，正如在上一节中所描述的，species1和species2现在是同一个对象的两个名字。

·现在，回忆一下基本类型的参数是如何工作的。例如，程序清单5.19中predictPopulation方法的定义就始于下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10275.jpeg)

我们之前说过，形式参数years实际上是一个局部变量。当我们调用predictPopulation方法时，会将这个局部变量years初始化为在方法调用中给出的引元的值。例如，当使用程序清单5.12中的下面的调用时：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10276.jpeg)

会将参数years初始化为numberOfYears，其效果就像是临时性地将下面的赋值语句：

![](../Images/image10277.gif)

插入到了该方法定义中。换句话说，就好像是将predictPopulation方法的定义在这个方法调用期间修改成了下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10278.jpeg)

喔，导言好长，但是如果你理解了这两点，就会很容易地理解类类型的参数是如何工作的。类类型的参数工作方式与基本类型的参数相似，但是因为赋值操作符对类类型变量的操作有些不同，所以其效果迥然不同！

让我们用相同的消息但是稍微有些不同的词汇再次捋一遍相关的解释。考虑程序清单5.18中用到的下面的对equals方法的调用：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10279.jpeg)

在这个调用中，s2是程序清单5.19中定义的Species类类型的引元。下面重现程序清单5.19中给出的equals方法的定义：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10280.jpeg)

当equals方法在s1.equals（s2）中调用时，它就像是在该方法定义的开头临时性地插入了下面的赋值语句：

![](../Images/image10281.gif)

换句话说，该方法定义在这个对equals的调用执行期间等价于：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10282.jpeg)

但是，回忆一下，这条语句只是将s2的内存地址复制给了变量otherObject，因此，otherObject仅仅是变成了s2命名的对象的另一个名字。所以，所有对由otherObject命名的对象执行的操作实际上都是在s2命名的对象上执行的，就好像该方法执行了下面的动作一样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10283.jpeg)

注意，任何对类类型形式参数执行的动作（即本例中对otherObject执行的动作），实际上都是在方法调用中用到的引元上执行的，在本例中就是在s2上执行的。因此，在方法调用中用到的引元实际上是方法调用中动作执行的对象，并且可以被方法调用所修改。

旁白：按引用调用  

有些程序员将类类型参数的参数机制称为按引用调用的参数传递方式。有些人则声称这种术语命名方式不正确。问题在于按引用调用的常用定义不止一种。另外，Java中的类类型参数与其他语言中的按引用调用的参数在行为上稍有不同。因此，我们在此处不会使用术语“按引用调用”。重要的是无论称它们为什么，都要理解类类型的参数是如何工作的。  

在equals方法的示例中，这种针对类类型参数的参数传递机制的效果与使用基本类型参数时产生的效果并没有多大的区别。但是，对于其他一些方法，这种差异会更加明显。下一节将给出一个更加戏剧化的例子，用来展示类类型的参数与基本类型的参数的区别可以有多大。

回顾：类类型参数

形式参数是在方法定义开头的方法名后面的圆括号中给出的。类类型的形式参数是持有该类类型的某个对象的内存地址的局部变量。当调用方法时，会将参数初始化为方法调用中对应的引元的地址。通俗一点地讲，这意味着形式参数所起的作用就是它是方法调用中对应的引元所给出的对象的另一个名字。

牢记：方法可以修改作为引元传递的对象

如果一个对象是方法调用中的引元，那么实际上它就是方法调用中动作执行的对象，并且可以被方法调用所修改。但是，该对象不能被另一个对象所替代。下一个编程示例将演示说明这些要点。