   

### 5.3.7　编程示例：类类型参数与基本类型参数

假设我们将三个方法添加到Species类中，形成新的名为DemoSpecies的类，如程序清单5.21所示。这个类只用于演示，因此不必关心该类定义的其余部分。让我们开始演示这个类吧。

程序清单5.21　一个演示类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10284.jpeg)

观察我们的新类DemoSpecies中的tryToChange方法。这个方法有一个类型为基本类型int的形式参数，该方法的方法体是对该参数的赋值操作。程序清单5.22中的程序会调用tryToChange，并传递给它int类型的引元aPopulation。但是，在方法体中执行的赋值对引元aPopulation不会产生任何效果。因为基本类型变量持有的是实际的值，而不是内存地址，所以Java按值调用的参数机制会将引元的值复制给该参数，该参数实际上是一个局部变量。因此，该方法对这个参数做出的任何修改都是这个局部变量的修改，而不是对引元的修改。

tryToReplace方法有一个类型为DemoSpecies的参数，因此它是类类型的参数。同样，Java按值调用的参数机制会将引元的值复制给该参数。但是因为引元和参数都是类类型的，所以将对象引元的内存地址复制到了该参数中。然后，该方法的方法体中的赋值语句将新的值赋给了参数。（实际上，这个新的值是由关键词this表示的接收对象的地址，与该对象的值无关。）和上一个方法tryToChange的情况一样，对参数的赋值不会影响到引元。因此，s2（即程序清单5.22中的程序传递给tryToReplace的DemoSpecies对象）并不会受到影响。

最终，change方法的参数的数据类型为类类型DemoSpecies。程序清单5.22中的程序会调用change，传递给它引元s2。该方法的方法体中的赋值语句实际上修改了对象引元s2的实例变量的值。所以，方法可以修改类类型引元的状态。

正如你所见，类类型的参数比基本类型的参数更加多样化。基本类型的参数会将值传递给方法，但是方法不能修改任何作为引元传递给它的基本类型变量的值。另一方面，类类型的参数不仅可以用来向方法提供信息，而且方法还可以修改由类类型的引元命名的对象的状态。但是，方法不能将作为引元传递给它的对象替换为另一个对象。

程序清单5.22　类类型参数与基本类型参数

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10285.jpeg)

牢记：基本类型和类类型参数的差异

方法不能修改传递给它的基本类型的引元的值。另外，方法不能将作为引元传递给它的对象替换为另一个对象。另一方面，方法可以修改类类型的引元的实例变量的值。

自测问题

28.给定程序清单5.19中定义的Species类，为什么下面的程序会产生错误消息？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10286.jpeg)

29.修正上一个自测问题的程序，该程序会产生什么样的输出？

30.基本类型的参数和类类型的参数之间最大的差异是什么？

31.给定程序清单5.19中定义的Species类，以及下面的类：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10287.jpeg)

下面的程序会产生什么样的输出？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10288.jpeg)

32.为自测问题16中描述的Person类编写一个equals方法。