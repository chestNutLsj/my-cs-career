   

### 5.4.1　GraphicsContext类

JavaFX应用程序使用的是舞台和场景的隐喻，因为它们就像剧院中的舞台和场景一样。Stage类是顶层的JavaFX容器，在我们的例子中，它对应于窗口。每个Stage都有一个相关联的Scene对象，这个Scene对象包含一组称为场景图的节点。这些节点由Node类表示，描述了应用程序的一个场景，就像剧本、演员和道具描述了戏剧或电影的一个场景一样。在JavaFX中，场景图是层次化的节点集，其中根节点位于树的顶端。在根节点之下，我们可以创建包含布局构件的子树，例如可以绘制到场景中的面板、按钮、文本或形状。节点具有属性，包括文本、尺寸、位置、颜色和可视化效果等。

在这个简单的JavaFX程序中，我们创建一个称为Group的特殊类型的Node。Group可以包含其他的Node，并且可以基于添加到其中的节点“自动调整尺寸”。在这个程序中，只添加了一项，即一个Canvas，因此它会扩展到填满整个窗口。与该Canvas对象相关联的GraphicsContext类使得我们可以发出绘制调用，这些调用会产生场景中的各种显示内容。

至此，我们已经充分了解到Grap-hicsContext类包含了让我们可以在其所表示的屏幕区域内绘制图形和书写文本的各种方法。图5.8给出了对一部分方法的总结。

你已经看到这些方法中的大部分都在之前的JavaFX示例中使用过。

尽管此刻将我们的讨论限制在相对简单的形状上，但是GraphicsContext类支持更大范围的几何图形，可以用不同的纹理和渐变来填充它们，允许对字体和形状的属性进行控制，并且支持像模糊、透明、变形等可视化效果，以及在创建富媒体应用或视频游戏时所需的其他功能。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10289.jpeg)

图5.8　GraphicsContext类的一些方法

在程序清单5.23中，通过加载一幅图像并用三种方式来显示它，让你体验这些功能。首先，这幅图像会按照其正常的1∶1的比例显示。接下来，这幅图像会以2倍高和2倍宽的形式显示，JavaFX将会缩放该图像以适配指定的尺寸。最后，在显示这幅图像之前，先应用一种视觉效果。在本例中，我们应用了倒影效果，使得该图像的倒影位于其下方。在这个示例中，我们使用了一幅JPEG图像，图像中有单词“Java”以及一些图形，但是你也可以使用任何图像。JavaFX能够读取常见的图像格式，例如GIF、JPEG和PNG。

程序清单5.23　绘制图像并应用效果

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10290.jpeg)

回顾：GraphicsContext类

GraphicsContext类的对象表示的是一块屏幕区域，它包含绘制图形、图像、文本和应用视觉效果的方法。GraphicsContext会与一个Canvas对象关联，该对象又是Stage（窗口）中显示的Scene对象中的节点层次结构的一部分。