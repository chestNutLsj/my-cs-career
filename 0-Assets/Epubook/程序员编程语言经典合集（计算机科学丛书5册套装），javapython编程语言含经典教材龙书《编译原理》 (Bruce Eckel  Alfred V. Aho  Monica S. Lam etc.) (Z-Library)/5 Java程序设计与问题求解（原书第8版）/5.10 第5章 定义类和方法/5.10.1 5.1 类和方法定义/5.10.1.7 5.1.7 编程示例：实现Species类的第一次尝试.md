   

### 5.1.7　编程示例：实现Species类的第一次尝试

程序清单5.3中的示例旨在保存濒危物种的记录。这个类比Dog类稍微复杂一些，但是仍旧违反了一些重要的设计原则。稍后在讨论这些原则时，我们会改进这个示例。因此，我们将这个类命名为SpeciesFirtstTry。

程序清单5.3　Species类的定义——第一次尝试

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10153.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10154.jpeg)

这个类的每个对象都拥有三个数据：名称、种群数量和增长率，这些数据存储在三个实例变量name、population和growthRate中。这些对象还有三个动作，由readInput、writeOutput和getPopulationIn10方法定义。

程序清单5.4中的代码创建了一个SpeciesFirstTry类型的对象，并将名字spe-ciesOfTheMonth与这个对象绑定。然后，这段代码基于种群数量和增长率输出预期的10年后的种群数量。

程序清单5.4　使用物种类及其方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10155.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10156.jpeg)

与所有SpeciesFirstTry类型的对象一样，speciesOfTheMonth类有三个实例变量，名为name、population和growthRate。与程序清单5.2中在main方法中设置实例变量的值不同，我们调用了readInput方法从键盘输入这些值。输入的值存储在于speciesOfTheMonth对象相关联的实例变量中。

getPopulationIn10的方法体中的语句如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10157.jpeg)

实例变量population引用的是接收对象的实例变量，在本例中就是speciesOfThe-Month对象的实例变量。population的值被复制到了变量populationAmount中，然后while循环得以执行。循环的每次迭代都在递增populationAmount的值，递增的数量是一年中种群数量的变化值，循环总共会迭代10次。当while循环终止时，populationAmount的值就是预计的10年后的种群数量。此时，populationAmount的值就是我们想要返回的值。当前，让我们假设populationAmount为正，即物种不会灭绝。因此，if语句将会把result设置为（int）populationAmount的值。（int）是将double值转换为int值的强制类型转换，这样我们就不会产生包含小数的物种数量。result的值会通过下面的语句由方法调用返回：

![](../Images/image10158.gif)

其效果就像是用（int）populationAmount替换了方法调用一样。在本例中，下面的赋值语句：

![](../Images/image10159.gif)

会将变量futurePopulation设置成（int）populationAmount的值。

如果populationAmount碰巧为0或负值，该语句会保持result为初始值0而不发生变化。因此，return语句（也就是该方法调用）会返回0。这是确保预计的种群数量不会为负值的一个小细节。毕竟，在现实世界中，一旦种群数量达到了0，那么它就只能一直停留在0了。