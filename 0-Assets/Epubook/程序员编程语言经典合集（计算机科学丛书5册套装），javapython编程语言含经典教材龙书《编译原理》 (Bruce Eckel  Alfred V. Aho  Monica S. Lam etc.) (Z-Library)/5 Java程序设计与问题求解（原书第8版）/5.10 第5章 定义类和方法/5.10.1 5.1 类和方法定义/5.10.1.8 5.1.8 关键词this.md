   

### 5.1.8　关键词this

回头再看一看程序清单5.3中SpeciesFirstTry类的定义，然后再看看使用这个类的程序清单5.4中的程序，就会注意到，实例变量的写法会因它们位于类定义的内部还是外部而有所不同，位于使用这个类的程序中就是位于类定义外部的例子。在类定义的外部，我们是通过给出类的对象名以及后面跟着的圆点和实例变量名来命名实例变量的，就像下面这个在程序清单5.4中出现的对实例变量名的引用：

![](../Images/image10160.gif)

但是，在与实例变量处于同一个类中的方法定义的内部，可以直接使用变量名而无须使用任何对象名和圆点。例如，下面这行代码就出现在程序清单5.3的SpeciesFirstTry类的readInput方法定义的内部：

![](../Images/image10161.gif)

如你所知，每个实例变量（包括name在内），都是某个对象的实例变量。在像上面这种代码的情况中，这个对象就是调用了这行代码的对象，但是其名称通常就省略了，实际上，这个对象有一个看起来有些不寻常的名字——this。尽管this经常被省略，但是它就在那里，如果你愿意，可以加上它。例如，前面对实例变量name的赋值语句等价于下面的语句：

![](../Images/image10162.gif)

例如，下面的方法等价于程序清单5.3中使用的writeOutput版本：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10163.jpeg)

关键词this代表接收对象。例如，在下面的调用中：

![](../Images/image10164.gif)

接收对象是speciesOfTheMonth。因此，对writeOutput方法的调用等价于：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10165.jpeg)

我们将this替换成了speciesOfTheMonth。

关键词this就像是一个等待着用接收方法调用的对象来填充的空。因为我们会非常频繁地使用到this，所以Java允许我们省略它以及后面跟着的圆点，但是可以认为this和圆点隐含地就在那里。许多程序员在可选的情况下很少使用关键词this，只在必需的场景下才使用它。另一方面，有些程序员总是使用关键词this来明确所引用的对象。

回顾：关键词this

在方法定义内部，可以使用关键词this作为接收方法调用的对象的名字。

自测问题

1.思考程序清单5.4中的程序。假设你想要增加一个名为speciesOfTheYear的物种对象，并且想要让用户提供它的名字、种群数量和增长率。那么你需要在程序中添加哪些代码？（提示：只需要添加少数几行代码即可。）

2.假设Employee是一个包含void方法readInput的类，而dilbert是一个Employee类的对象，它是通过下面的语句命名和创建的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10166.jpeg)

编写一个使用dilbert为接收对象的对readInput的方法调用。readInput方法的括号中不需要任何信息。

3.我们想对世界上的每个物种都赋予一个编号和一个名称，这样可以更便于分类。修改程序清单5.3中的SpeciesFirstTry类的定义，使得它可以存储编号。编号应该是int类型的。（提示：你几乎只需要添加内容。）

4.假设世界上每个物种都有特定的生育模式。生一个雌性后代之后，生一个雄性后代，然后再生一个雌性后代，以此类推。给出名为getFemalePopulation方法的定义，添加到程序清单5.3的SpeciesFirstTry类的定义中，它可以返回种群中雌性的数量。再给出名为getMalePopulation方法的定义，类似地，它会返回种群中雄性的数量。如果种群数量是奇数，那么在雌雄配对之后，还会剩下一个该物种的成员。假设这个物种成员是雌性。例如，如果种群数量是7，就会有3个雄性和4个雌性。但是如果种群数量是8，就会有4个雄性和4个雌性。（提示：该定义会非常短。）

5.用关键词this修订程序清单5.3中writeOutput方法的定义。不要修改该定义的含义，只需在书写上稍微有些差异。（提示：所需做的只是在某些位置上添加this和圆点。）

6.用关键词this修订程序清单5.3中readInput方法的定义。

7.用关键词this修订程序清单5.3中getPopulationIn10方法的定义。

8.出现在程序清单5.3中getPopulationIn10方法定义中的（int）的含义是什么？为什么需要它？