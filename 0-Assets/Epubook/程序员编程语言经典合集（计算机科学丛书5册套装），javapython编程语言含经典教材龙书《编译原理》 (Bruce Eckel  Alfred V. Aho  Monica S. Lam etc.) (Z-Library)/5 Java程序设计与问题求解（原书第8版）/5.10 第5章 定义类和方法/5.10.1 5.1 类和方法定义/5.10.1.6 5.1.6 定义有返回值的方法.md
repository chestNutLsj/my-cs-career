   

### 5.1.6　定义有返回值的方法

我们可以基本上按照定义void方法的方式来定义有返回值的方法，只需多处理一点，即指定返回值。让我们来思考Dog类中的getAgeInHumanYears方法，这个方法会估算狗对照人类等价的年龄。我们会像下面这样调用这个方法：

![](../Images/image10139.gif)

这条语句将变量humanYears的值设置成等于下面的方法调用返回的值：

![](../Images/image10140.gif)

getAgeInHumanYears方法的定义会告诉计算机如何计算返回值。

让我们再来看一看程序清单5.1中的方法定义。与void方法定义一样，有返回值的方法的定义也可以分为两部分：方法头和方法体。下面是getAgeInHumanYears方法的方法头：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10141.jpeg)

有返回值的方法的方法头几乎与void方法的方法头完全一样，唯一的差别就是有返回值的方法会用类型名代替关键词void。方法头以关键词public开头，后面跟着类型名（即返回值的类型），之后是方法名和一对圆括号。与void方法一样，圆括号括起来的内容表示的是方法需要的所有引元。在本例中，圆括号为空。与之前一样，关键词public表示对方法的使用没有任何限制。

有返回值的方法定义的方法体与void方法定义的方法体一样，只是它必须包含至少一个return语句：

![](../Images/image10142.gif)

return语句声明该方法返回的值就是Expression的值。Expression可以是能够产生在方法定义的方法头中所指定的类型值的任何表达式。例如，getAgeInHumanYears方法的定义包含下面的语句：

![](../Images/image10143.gif)

当调用有返回值的方法时，就会执行方法定义的方法体中的语句。例如，当执行下面的赋值语句时，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10144.jpeg)

就会执行getAgeInHumanYears的方法定义的方法体。该方法体中的语句如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10145.jpeg)

实例变量age引用的是接收对象的实例变量，在本例中是scooby。程序清单5.2中age的值被设置成了42。这里使用的公式是，对于狗龄来说，当小于2岁时，每一岁大约等于人的年龄的11岁，而狗龄大于2岁时，每一岁大约等于人的年龄的5岁，计算完之后，我们返回了对于狗来说，大约对应的人的年龄。变量humanAge被设置成了经计算得到的值，并会在方法的末尾返回。

当return语句执行时，不但会提供方法返回的值，还会终止方法的执行。如果在return语句后面还有其他语句，那么它们都不会被执行。

有返回值的方法还可以执行其他的动作，例如从键盘读取一个值，但是它无论如何都必须返回一个值。

牢记：命名方法

Java允许我们使用任何合法的标识符来命名方法，但关键词除外。但是，你应该选择清晰且有实际意义的名字，这样会使得代码更易于阅读。因为方法会执行动作，所以你应该使用动词或动词短语作为方法名。常用的惯例是所有方法名都以小写字母开头。回忆一下，按照惯例，类是以大写字母开头的。

编程窍门：使用一条return语句

尽管我们可以在有返回值的方法体中使用多条return语句，但是在典型情况下，应该只使用一条。将这条return语句放到方法体的末尾或者临近末尾的地方，可以使方法更易于阅读。

我们在getAgeInHumanYears方法定义中使用了单条return语句。当然，也可以使用多条return语句，一条对应age<=2的情况，另一条对应age>2的情况：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10146.jpeg)

有些程序员发现这种方式更清楚，而且这些return语句确实位于方法定义的末尾或邻近末尾处。但是，如果方法的逻辑更复杂，并且return语句出现在远离方法定义末尾的地方，那么理解程序逻辑就会变得更困难。我们倾向于在方法中只使用一条return语句。

常见问题：我听说过函数，Java有函数吗？

Java没有函数。在其他一些编程语言中，有返回值的方法称为函数，因为它们对应于数学上函数的概念。但是，在Java中，无论方法是否有返回值，都会称为方法，而不是函数。

常见问题：void方法中是否可以包含return语句？

因为void方法不返回任何值，所以典型情况下它没有return语句。然而，我们可以在void方法中编写一条return语句，但是它后面没有任何表达式，就像下面这样：

![](../Images/image10147.gif)

这条语句与你看到过的其他return语句一样，只是不包含任何用作返回值的表达式。在执行时，这条return语句会终止void方法的执行。

有些程序员使用这条语句来尽早地终止方法调用，例如在方法发现了某种问题时。例如，你可以将下面的方法添加到程序清单5.3中的SpeciesFirstTry类中：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10148.jpeg)

如果这个方法涉及除以0的操作，那么它的执行会在return语句处终止。

有时，在void方法中使用return语句是最清楚且最方便的方式，但是在更多情况下，还有更好的解决方案。我们的示例就属于这种情况。像下面这样在if语句中添加一个else部分，就可以澄清方法的逻辑：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10149.jpeg)

回顾：方法定义

每个方法都属于某个类，可以在从这个类创建的对象上调用。方法定义是在其所属的类的定义中给出的。每个方法要么返回单个值，要么不返回任何值，后者称为void方法。

语法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10150.jpeg)

其中Return_Type要么是void，要么是方法返回值的数据类型。在后一种情况下，Statements必须包含至少一条下面形式的return语句：

![](../Images/image10151.gif)

return语句定义了方法的返回值，并且会终止方法的执行。void方法不需要return语句，但是如果想要在代码结尾之前就终止方法调用，那么也可以添加一条。如果属于这种情况，return语句就会忽略Expression。在void方法中使用return语句并非典型做法。

到目前为止，我们还没有讨论过Parameters，但是我们很快就会讨论它了。如果没有任何Parameters，那么圆括号就为空。

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10152.jpeg)