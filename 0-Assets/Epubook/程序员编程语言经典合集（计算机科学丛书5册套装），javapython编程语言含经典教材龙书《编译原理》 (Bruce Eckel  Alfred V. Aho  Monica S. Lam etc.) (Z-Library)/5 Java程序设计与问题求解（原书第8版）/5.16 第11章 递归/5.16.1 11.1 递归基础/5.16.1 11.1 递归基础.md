   

## 11.1　递归基础

TIARA is a recursive acronym.

——TIARA是一个递归的首字母缩写（这句话中每个单词的首字母拼在一起还是TIARA，这就形成了递归）

The TTP Project.

——DILBERT（同上面的例子一样，这句话中每个单词的首字母拼在一起还是TTP，也形成了递归）

我们经常会发现，一种设计算法的自然方式是用相同的算法来处理一个或多个子情况。

例如，下面是在电话簿中搜索某个名字的算法框架：打开电话簿，翻到中间；如果要搜索的名字在这一页上，我们就找到了；如果要搜索的名字在字母排序上位于这一页之后，那么就搜索电话簿的后一半。搜索电话簿的一半是最初搜索整本电话簿任务的规模更小的版本。

无论何时，只要一个算法具有一个子任务，该子任务是比整个算法任务更小的版本，那么我们就说它是递归的。可以在Java中用递归算法编写出递归方法。递归方法包含对自身的调用，这种调用称为递归调用。

当然，必须以正确的方式定义递归方法，否则写出来的Java代码就会引发问题，本章的目标就是向你展示正确的方式。有关递归方法的总话题称为递归。

我们从简单的示例入手，展示Java中的递归。给定整数变量num，我们想输出所有从num到1倒计数的数字。如果num小于1，那么就只打印一个换行符。例如，如果num为3，那么我们的程序应该输出：

![](../Images/image11210.gif)

很明显，这种程序可以用一个简单的for循环来编写。for循环是解决该问题的首选方法，但是我们提供了一个递归的countDown方法，用来展示递归是如何在这个简单示例中工作的。在本章稍后，我们将看到一些其他的问题，对它们而言，递归是一种更优雅且首选的解决方案。

首先，考虑有关问题的最简单情况。这种情况通常就是问题的输入是最简单或最小的值，且通常可以用直截了当的方案来解决的情况。在上述问题中，最简单的可能输入是num小于1。在这种情况下，我们所需做的只是打印一个空行。这种情况称为基础情况或者停止情况，即不包含任何递归调用的情况。正如我们将会看到的，当这种情况发生时，递归就会终止。另外，除非这种简单情况可以正确工作，否则，没有任何其他情况可以正确工作。

实现倒计数问题基础情况的方法的代码很简单：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11211.jpeg)

这个方法处理了基础情况，但是没有处理num大于等于1这类更有意义的情况。为了递归地解决问题，我们必须将该问题分解为同一个问题的更小版本。这意味着要按照该方法回调countDown的方式来重新表述该问题。我们来看看num等于3的情况。换句话说，我们调用了countDown（3）。我们想要输出"321"。这与输出"3"后面跟着"21"是相同的。但是输出"21"正是countDown（2）应该输出的！解决该问题的算法就变成：

·输出3。

·调用countDown（2），它负责输出21。

接下来，countDown（2）可以重复相同的过程：

·输出2。

·调用countDown（1），它负责输出1。

接下来，countDown（1）可以重复相同的过程：

·输出1。

·调用countDown（0），它负责输出换行符。

当调用countDown（0）时，执行的是基础情况，它会打印一个换行符，并终止递归方法调用。

对于num的任意取值，递归解决方案变成：

·输出num。

·调用countDown（num-1），它负责输出从num-1到1的倒计数。

用Java实现该算法的完整程序如程序清单11.1所示。

程序清单11.1　递归的倒计数方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11212.jpeg)

递归是可行的，因为每个对countDown的调用都会产生不同的变量num，它对被调用的方法来说是局部变量。图11.1展示了递归调用的序列，并说明了num是如何从一个方法传递给下一个方法的。  

回顾：递归方法

递归方法会调用自身，即递归方法是其定义中包含对自身调用的方法。