   

### 11.1.1　案例研究：数字位显示成单词

在这个案例研究中，我们将定义一个方法，它会接受单个整数作为引元，并将这个整数中的数字位显示成单词。例如，如果引元是数字223，那么该方法应该显示：

![](../Images/image11213.gif)

这个方法的头部可以是：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11214.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11215.jpeg)

图11.1　countDown方法的递归调用

如果要显示的数字只有单个数字位，那么就可以用一个长长的switch语句来决定针对这个数字位使用哪个单词，此时并不需要递归。我们将这个任务交给私有方法getWordFromDigit来实现，它会被displayAsWords调用。可以将这个私有方法定义成下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11216.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11217.jpeg)

这样，当digit为0时，getWordFromDigit就会返回"zero"；当digit为1时，该方法返回"one"；以此类推。

如果要显示的数字超过1位，那么我们可以将这个任务按照多种方式分解为子任务。这些方法中有的适合使用递归来解决问题，而有的则不适合。有一种不错的方式是将这个任务分解为两个子任务，使得我们可以立即解决其中一个子任务，而另一个则适合使用递归解决，具体如下：

1）将除最后一位之外的所有数字位显示成单词。

2）将最后一位显示成单词。

第一个子任务是比最初的问题更小的版本。实际上，它与最初的问题完全一样，只是问题中的数字变小了，即它包含更少的位数。因此，可以通过调用我们正在定义的方法来完成第一个子任务。第二个子任务可以通过调用私有方法getWordFromDigit来完成。这种场景告诉我们可以将前面的两个步骤精简为下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11218.jpeg)

应该如何将数字的最后一位移除，使得我们可以执行第1步时为第2步保留这一位呢？我们考虑一个示例。假设我们选择的数字包含多个数字位，例如987。我们需要将这个数字分解为两个部分——98和7。可以用整数除法将其除以10来完成这项任务。例如，987/10为98，987%10为7。因此，我们的算法使我们得到了下面的Java代码：  

![](../Images/image11219.gif)

使用这些语句作为displayAsWords的方法体，就会得到下面的定义：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11220.jpeg)

但是，正如注释中所表述的，这个方法不能很好地工作。

这个方法是递归的，并且使用了正确的基本思想，但是它有一个大问题：前面的定义假设引元number的位数超过一位。我们需要处理只包含一位数字的特殊情况。观察到这一点使我们可以将该方法的定义修改为下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11221.jpeg)

递归调用displayAsWords（number/10）的引元的值比number小，而number是传递给之前对displayAsWords调用的引元。重要的是，在方法内的递归调用解决的是原来问题的“更小的”版本（这里使用的是直觉上“更小的”概念，我们将在本章结束之前对其做进一步解释）。

正如你将在下一节看到的，像displayAsWords这样的递归方法的成功执行要求最简单的（基础）情况不能包含递归调用。在displayAsWords的定义中，这种基础情况就是一个数字位的数字，对它的处理如下：

![](../Images/image11222.gif)

在这种情况中，没有发生任何递归调用。

displayAsWords方法的定义现在完整了。程序清单11.2展示了嵌入在演示程序中的该方法。

程序清单11.2　数字位显示成单词的递归演示程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11223.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11224.jpeg)