   

## 11.3　图形化编程补充读物

本节将介绍Lambda表达式。Lambda函数并非只限于图形化编程和JavaFX，但是我们会在创建JavaFX事件处理器的上下文中介绍它们。Lambda函数在许多其他上下文中也很有用，特别是在并行操作以便使程序运行得更快时。

Lambda函数和事件处理器

使用Lambda表达式的函数式编程是在Java 8中引入的，而Lambda表达式就是没有名字的函数。在函数式编程中，函数是与方法相同的事物，相关的概念包括闭包、匿名函数和函数字面常量。作为没有名字的函数，Lambda表达式本质上就是一小段代码，我们可以将它们当作数据传递，但是它们会被当作具有参数的函数处理。Lambda表达式提供了一种灵巧的方式，用来实现在正常情况下只有一个函数的类，并且易于现场修改方法，而无须为执行特殊化的任务定义新方法。另外，Lambda表达式有助于Java并行地在多核或并行计算机上更高效地运行。

定义Lambda表达式的格式看起来像下面这样：

参数->表达式体

箭头将参数与表达式体做了分离。在许多情况下，表达式体是很短并且只有单行的代码。如果表达式体变得更长，那么用传统的方法来表达就会更有意义。下面是一个Lambda表达式，它的功能是不接受任何参数，并返回数字44：

![](../Images/image11280.gif)

下面是返回两个整数x和y之和的Lambda表达式：

![](../Images/image11281.gif)

在许多情况中，Java可以推断出参数的类型，此时我们可以去掉数据类型。我们还可以只提供右侧的表达式，无须关键词return，它就会自动地变成返回值。下面是与上面的例子等价的表达式：

![](../Images/image11282.gif)

作为促使我们使用Lambda函数的示例，请考虑我们为程序清单8.23中的按钮处理器编写的匿名内部类。btnSunny的处理器是：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11283.jpeg)

在这种情况中，我们需要创建一个新的类来实现EventHandler<ActionEvent>和定义handle方法。通过使用Lambda函数，我们可以以简洁得多的格式来实现相同的目的。等价的事件处理器将变为：

![](../Images/image11284.gif)

我们甚至无须为引元e指定其数据类型为ActionEvent，因为Java可以从我们调用setOnAction的上下文中唯一有效的类型推断出e的数据类型。Lambda格式是所有格式中最简单的，使得我们可以直接将方法插到需要的地方。程序清单11.10就是将程序清单8.23中的JavaFX程序转换为使用Lambda函数的版本。

程序清单11.10　用Lambda函数处理事件

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11285.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11286.jpeg)

除窗口标题外，程序输出与程序清单8.23相同。

这些例子应该可以帮助你对Java的Lambda表达式看起来什么样以及它们可以做什么建立基本的概念。尽管肯定存在学习曲线，但是Lambda表达式使得你可以编写出更加简洁的代码，同时使并行处理成为可能。Java 8的新语法同时支持函数式编程和面向对象编程，使得我们可以同时坐享这两种风格带来的好处。

自测问题

15.将下面的事件处理器转换为Lambda风格。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11287.jpeg)