   

### 3.1.2　布尔表达式

我们已经在if-else语句中使用过简单的布尔表达式了。最简单的布尔表达式是对两个更小的表达式的比较，就像下面的两个例子：

![](../Images/image09793.gif)

和

![](../Images/image09794.gif)

表3.1展示了Java中各种可以用来比较两个表达式的比较操作符。

表3.1　Java比较操作符

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09795.jpeg)

注意，布尔表达式不需要开头和结尾的圆括号。但是，当布尔表达式用于if-else语句中时，需要圆括号将其括起来。

疑难杂症：使用=而不是==测试相等性

操作符=是赋值操作符。尽管这个符号在数学中表示相等，但是它在Java中并没有这个意思。如果在测试x与y是否相等时，你编写的是if（x=y）而不是if（x==y），那么你就会得到一条有关语法错误的消息。

疑难杂症：使用==或！=比较浮点数

上一章我们警告过，浮点数必须当作近似值。具有小数部分的数字可以包含无限位，而由于计算机只能存储小数中有限的位数，所以浮点数经常不精确。这些近似会导致在计算时，每执行一个操作之后，精度就会下降。

因此，如果要比较两个浮点值，它们可能并不是精确相等，你能指望的也就是这两个值几乎相等。因此，你不应该使用==来比较浮点数。使用！=操作符会导致相同的问题。

为了测试两个浮点数的相等性，你应该去检查它们的差是否足够小，小到按照它们的近似属性来看，它们只能相等。如果确实如此，你就可以得出结论，它们“足够接近”，以至于可以认为它们相等。

我们可以用简单的布尔表达式构成更加复杂的布尔表达式，其方式是用逻辑操作符 & & 将它们连接起来， & & 就是Java版本的“与”。例如，考虑下面的表达式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09796.jpeg)

如果pressure的值大于min并且小于max，那么输出就会是：

![](../Images/image09797.gif)

否则，输出就会是：

![](../Images/image09798.gif)

注意，你不能写成：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09799.jpeg)

而是必须分开表示每个不等测试，然后用 & & 将它们连接起来，就像下面这样：

![](../Images/image09800.gif)

当用 & & 连接两个较小的表达式来构成更大的布尔表达式时，只有这两个较小的表达式都为真时，整个更大的表达式才为真。如果至少有一个较小的表达式为假，那么这个更大的表达式就为假。例如，

![](../Images/image09801.gif)

为真的条件是（pressure>min）和（pressure<max）都为真；否则，这个表达式就为假。

回顾：使用 & & 表示“与”

符号对 & & 在Java中表示“与”。你可以用 & & 把两个较小的布尔表达式连接成更大的表达式。

语法

![](../Images/image09802.gif)

当且仅当Sub_Expression_1与Sub_Expression_2都为真时，这个表达式才为真。

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09803.jpeg)

除了使用“与”连接布尔表达式，你还可以使用“或”来连接它们。Java表示“或”的方式是||，即两根小竖线。（|符号在某些系统上显示时中间会有一个小缝。）操作符||的含义与自然语言中的“或”在本质上是相同的。例如，考虑下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09804.jpeg)

如果salary的值大于expense的值，或者savings的值大于expense的值，或者两者都为真，那么输出就会是Solvent；否则，输出就会是Bankrupt。

回顾：使用||表示“或”

符号对||在Java中表示“或”。你可以用||把两个较小的布尔表达式连接成更大的表达式。

语法

![](../Images/image09805.gif)

只要Sub_Expression_1或Sub_Expression_2有一个为真，或者二者都为真时，这个表达式就为真。

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09806.jpeg)

正如之前我们提到的，if-else语句中的布尔表达式必须用圆括号括起来。使用 & & 操作符的if-else语句通常会像下面这样括起来：

![](../Images/image09807.gif)

（pressure>min）和（pressure<max）中的圆括号都不是必需的，但是我们通常会加上它们，因为这样可以提高可读性。在包含||操作符的表达式中使用圆括号的方式与使用 & & 操作符的表达式相同。

在Java中，可以通过在布尔表达式的前面添加！来表示取反。例如，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09808.jpeg)

如果number不大于等于min，那么输出就会是Too small；否则，输出就会是OK。

我们经常可以避免使用！，而且应该尽可能避免使用它。例如，前面的if-else语句等价于

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09809.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09810.jpeg)

图3.4　避免使用取反操作符

图3.4展示了如何将下面形式的表达式转换为没有取反操作符的表达式：

![](../Images/image09811.gif)

如果可以避免使用！，那么程序就更易于理解。但是，我们可能碰到使用这个操作符会显得更自然更清晰的情况。特别是，我们可以在循环上下文中使用！来对某个布尔变量取反，我们将在下一章讨论这一点。

回顾：使用！表示非

符号！在Java中表示“非”。你可以用！把某个布尔表达式的值取反。当表达式是布尔变量时，这么做会很常见。否则，你应该重新编写布尔表达式，以避免对其取反。

语法

![](../Images/image09812.gif)

这个表达式的值是布尔表达式的值的取反值：如果Boolean_Expression为假，它就为真；如果Boolean_Expression为真，它就为假。

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09813.jpeg)

表3.2对三个逻辑操作符进行了总结。Java会根据表3.3中的真值表给定的规则来组合真与假的值。例如，如果布尔表达式A为真，布尔表达式B为假，那么A & & B就为假。

表3.2　Java逻辑操作符

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09814.jpeg)

表3.3　布尔操作符&&（与）、||（或）和!（非）作用于布尔值时的效果

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09815.jpeg)