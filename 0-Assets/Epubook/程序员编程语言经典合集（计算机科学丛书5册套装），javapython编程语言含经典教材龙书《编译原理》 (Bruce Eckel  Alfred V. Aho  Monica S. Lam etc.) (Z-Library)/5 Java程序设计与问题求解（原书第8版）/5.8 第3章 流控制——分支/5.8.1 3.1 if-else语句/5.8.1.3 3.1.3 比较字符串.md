   

### 3.1.3　比较字符串

为了测试两个基本类型的值是否相等，例如两个数字，我们可以使用判等操作符==。但是==在作用于对象时，具有不同的含义。回忆一下，字符串是String类的对象，因此==作用于两个字符串时测试的不是它们是否相等。为了检查两个字符串是否相等，必须使用equals方法而不是==。

例如，布尔表达式s1.equals（s2）在字符串s1和s2具有相同值时，会返回真，否则返回假。程序清单3.2中的程序展示了equals方法的用法。注意，下面两个表达式：

![](../Images/image09816.gif)

是等价的。

程序清单3.2还演示了String的equalsIgnoreCase方法的用法。这个方法的行为与equals很像，只是equalsIgnoreCase将同一个字母的大写和小写版本当作相同字符来看待。例如，"Hello"和"hello"并不相等，因为它们的首字母不同，'H'和'h'是不同的字符。但是，equalsIgnoreCase方法认为它们是相等的。例如，下面的语句将显示Equal：

![](../Images/image09817.gif)

注意，在对equalsIgnoreCase方法的调用中使用由引号括起来的字符串"Hello"是完全合法的。引号括起来的字符串也是String类型的对象，它具有任何其他的String类型对象所具有的所有方法。

程序清单3.2　测试字符串的相等性

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09818.jpeg)

疑难杂症：将==用于字符串

当操作符==作用于两个字符串时，测试的是这两个字符串是否存储在相同的内存位置上。我们将在第5章讨论这个概念，目前，你只需要知道==测试的不是两个字符串是否具有相同的值。

对于我们在本章需要考虑的应用程序类型，使用==来测试字符串的相等性可能会给出看起来正确的答案。但是，这么做是一种危险的习惯。你应该总是使用equals方法而不是==来测试字符串。类似的问题也适用于其他的像<这样的比较操作符与compareTo方法，就像你马上就要学习的那样。

回顾：equals和equalsIgnoreCase方法

当测试字符串的相等性时，应该要么使用equals方法，要么使用equalsIgnore-Case方法。

语法

![](../Images/image09819.gif)

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09820.jpeg)

程序经常需要比较两个字符串，以检查它们按照字母顺序哪个靠前。正如不应该使用==操作符来测试两个字符串的相等性一样，你也不应该使用像<和>这样的操作符来测试字母顺序。你应该使用String的方法compareTo，我们在第2章的表2.3中描述过它。

compareTo方法会测试两个字符串以确定它们的字典排序。字典排序与字母排序类似，它有时但并非总是与字母排序相同。在字典排序中，字母和其他字符是根据它们的Unicode序列排序的，这个顺序将在本书的附录中展示。

如果s1和s2是两个String类型的变量，它们都具有给定的String值，那么下面的方法调用：

![](../Images/image09821.gif)

会比较这两个字符串的字典排序，并返回：

·一个负数，如果s1在s2之前。

·0，如果两个字符串相等。

·一个正数，如果s1在s2之后。

因此，下面的布尔表达式：

![](../Images/image09822.gif)

当s1在字典排序中先于s2时为真，否则为假。例如，下面的代码将产生正确的输出：

![](../Images/image09823.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09824.jpeg)

但是假设我们想要检查它们的字母排序而不是字典排序，会怎么样呢？如果查看Unicode表，就会看到在字典排序中，所有大写字母都在所有小写字母之前。例如，'Z'按照字典序在'a'之前。因此，当比较两个由大小写字母混合而成的字符串时，字典排序和字母排序是不相同的。但是，在Unicode中，所有小写字母是按照字母顺序排序的，所有大写字母也是按照字母顺序排序的。因此，对于任何两个由全小写字母构成的字符串，字典排序与普通的字母排序是相同的。类似地，对于任何两个由全大写字母构成的字符串，字典排序与普通的字母排序也是相同的。因此，要想比较两个由字母构成的字符串的普通字母排序，只需将这两个字符串都转换为大写字母或都转换为小写字母，然后比较它们的字典排序。让我们来看看Java的细节。

假设我们将两个字符串s1和s2转换为全大写，然后使用compareTo测试s1和s2的全大写版本的字典排序。下面的代码将给出正确的输出：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09825.jpeg)

编程窍门：字母排序

为了查看两个由字母构成的字符串是否遵循字母排序，我们必须确保在使用compare-To方法比较它们之前，所有字母都具有相同的大小写。我们可以使用String的toUpper-Case或toLowerCase方法来实现此目的。如果忽略了此步骤，那么使用compareTo比较的就是字典排序而不是字母排序。

自测问题

1.假设goals是int类型的变量，编写一条if-else语句，当变量goals的值大于10时，显示单词Wow；当goals的值小于等于10时，显示词组Oh Well。

2.假设goals和errors是int类型的变量，编写一条if-else语句，当变量goals的值大于10且errors的值为0时，显示单词Wow；否则，该if-else语句应该显示词组Oh Well。

3.假设salary和deductions是具有给定值的double类型的变量，编写一条if-else语句，当salary大于等于deductions时，显示OK并将变量net的值设为salary减去deductions；但是，如果salary小于deductions，该if-else语句应该直接显示词组No Way，但是不改变任何变量的值。

4.假设speed和visibility是int类型的变量，编写一条if-else语句，当speed的值大于25且visibility小于20时，将speed变量设置为25，并显示单词Caution。该语句没有else部分。

5.假设salary和bonus是double类型的变量。编写一条if-else语句，当salary大于等于MIN_SALARY或bonus大于等于MIN_BONUS时，显示单词OK。否则，它应该显示Toolow。MIN_SALARY和MIN_BONUS都是具名常量。

6.假设nextWord是String变量，具有给定的完全由字母组成的值。编写一些Java代码，当nextWord在字母表中出现在N之前时，显示First half of the alphabet。如果nextWord在字母排序中并未出现在N之前，那么你的代码应该显示Second half of the alphabet。在表示字母N时要注意，你需要将其表示成一个字符串，而不是一个字符。

7.假设x1和x2是两个具有给定值的变量。当这两个变量都是int类型时，应该如何测试它们的值是否相等？当它们都是String类型时，又应该如何测试它们的值是否相等？