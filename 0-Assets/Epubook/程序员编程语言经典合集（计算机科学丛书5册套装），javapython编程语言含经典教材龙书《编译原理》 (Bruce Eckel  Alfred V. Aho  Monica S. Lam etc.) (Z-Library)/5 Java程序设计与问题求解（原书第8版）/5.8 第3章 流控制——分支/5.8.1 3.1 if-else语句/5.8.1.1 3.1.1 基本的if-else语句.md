   

### 3.1.1　基本的if-else语句

在程序中，就像我们的日常生活一样，事情有时会有两种不同的处理方式。如果你的支票账户中有钱，那么有些银行会支付你少量的利息。另一方面，如果你透支了支票账户，那么你的账户余额就是赤字，你会因此而收到罚款，这会使你的余额赤字变得更大。这种策略反映在下面的银行会计程序的Java语句中，这条语句就是一条if-else语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09769.jpeg)

符号>=在Java中用来表示大于等于，因为符号≥无法用键盘输入。

if-else语句的含义与将其当作英语句子阅读时其具有的含义相同。当程序执行if-else语句时，它首先检查关键词if后面的圆括号中的表达式。这个表达式必须要么为真，要么为假。如果它为真，就会执行else前面的语句；如果它为假，就会执行else之后的语句。在前面的示例中，如果balance是正数或0，就会执行下面的动作：

![](../Images/image09770.gif)

（因为我们只加了一个月的利息，所以必须将年利率除以12。）另一方面，如果balance的值为负数，就会执行下面的代码：

![](../Images/image09771.gif)

图3.1展示了这条if-else语句的动作，而程序清单3.1展示了完整的程序。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09772.jpeg)

图3.1　程序清单3.1中if-else语句的动作

表达式balance>=0就是一个布尔表达式的例子，它就是一个要么为真、要么为假的表达式。boolean这个名字来源于George Boole，一位19世纪的英国哲学家和数学家，其著作涉及这些类型的表达式。我们将在下一节讨论布尔表达式。

注意，一条if-else语句在内部包含两条更小的语句。例如，程序清单3.1中的if-else语句在内部包含了下面这两条更小的语句：

![](../Images/image09773.gif)

注意，这些更小的语句与if和else相比，会缩进一层。

程序清单3.1　使用if-else的程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09774.jpeg)

编程窍门：缩进

我们在上一章中讨论过缩进，它是一种你应该遵守的样式惯用法。尽管编译器会忽略缩进，但是如果不能遵循这项惯用法使用一致的缩进样式，就会对阅读你的程序的人们造成混淆，并且很可能会导致你犯错误。

如果想要在每个分支中包含多条语句，只需用花括号将这些语句括起来。在花括号中括起来的多条语句可以当作一条更大的语句。因此，下面就是一条内部包含了两条较小语句的大语句：

![](../Images/image09775.gif)

![](../Images/image09776.gif)

这些由花括号括起来的一组语句构成的语句称为复合语句，它们很少单独使用，但是经常会被当作更大语句的子语句来使用，例如用作if-else语句的子语句。前面的复合语句可能会出现在某条if-else语句中，就像下面这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09777.jpeg)

注意，复合语句可以简化我们对if-else语句的描述。一旦我们了解了复合语句，就可以将每条if-else语句描述为下面的形式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09778.jpeg)

如果想要一个分支或两个分支都包含多条语句而不仅仅只是一条语句，那么可以在Statement_1和Statement_2处使用复合语句。图3.2对if-else的这种语法（或者说含义）进行了总结。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09779.jpeg)

图3.2　if-else语句的语法

如果删除else部分，程序就会在if语句的表达式为假时，跳过Statement，如图3.3所示。例如，如果银行不对透支行为罚款，那么之前所示的语句就可以缩短为下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09780.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09781.jpeg)

图3.3　没有else的if语句的语法

为了观察这条语句是如何工作的，让我们通过添加一些额外的语句来增加一点上下文信息，就像下面这样，其中keyboard是常用的Scanner对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09782.jpeg)

当你的支票账户余额为$100时，执行这些语句将产生下面的交互：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09783.jpeg)

由于表达式balance>=0为真，所以你会赚取到一些利息，具体金额是多少就和本例无关了。（但是，我们在程序清单3.1中使用的利率是每年2%。）

现在，假设你的账户透支了，并且余额为负的$50，这样输出就会变成下面的样子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09784.jpeg)

在这种情况下，表达式balance>=0为假，但是因为没有任何else部分，所以什么事都不会发生，余额不会改变，程序将直接跳到下一条语句，即输出语句。

疑难杂症：安全编程——输入校验和溢出

你应该检查你的输入，以确保其在有效或合理的范围内。例如，考虑将英尺转换为英寸的程序。你可能会编写下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09785.jpeg)

这看起来完全正确，但是如果用户有意或无意地输入了预料之外的值，又会怎样呢？结果会导致程序崩溃或产生不期望的行为，包括下面一些场景：

1）如果用户输入的英尺为负数，那么程序无法正确地工作，会产生一个负的英寸值。

2）如果程序期望得到可以表示人类高度的英尺数，那么程序没有办法阻止用户输入不合理的值，例如100英尺。

3）Java中的整数只能持有最大到2 147 483 647的正整数。如果试图存储更大的数，那么就会发生溢出，产生不正确的值。如果用户键入了像2 000 000 000这样的值，那么将其乘以12就会得到一个大得不适合存储的整数。当Java遇到大到不适合存储的整数时，就会循环到最小值，然后继续计数。在这种情况下，它会产生负的英寸值-1 769 803 776。

我们可以通过校验来解决这些问题，校验时要确定输入是否在恰当的范围内：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09786.jpeg)

回顾：if-else语句

语法（基本形式）

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09787.jpeg)

如果表达式Boolean_Expression为真，就执行Statement_1，否则，执行Statement_2。

示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09788.jpeg)

语法（没有else部分）

![](../Images/image09789.gif)

如果表达式Boolean_Expression为真，就会执行Statement；否则，会忽略Statement，程序跳到下一行继续执行。

示例

![](../Images/image09790.gif)

复合语句选项

每个Statement、Statement_1和Statement_2都可以是复合语句。如果想要在表达式的给定分支上执行多条语句，那么就可以用花括号把它们群组起来，就像下面的示例一样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09791.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image09792.jpeg)