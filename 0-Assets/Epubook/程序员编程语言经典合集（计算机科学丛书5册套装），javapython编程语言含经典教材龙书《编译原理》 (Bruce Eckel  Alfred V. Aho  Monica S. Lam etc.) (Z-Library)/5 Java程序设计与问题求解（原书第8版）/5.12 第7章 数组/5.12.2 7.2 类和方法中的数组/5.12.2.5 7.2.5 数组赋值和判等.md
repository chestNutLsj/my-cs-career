   

### 7.2.5　数组赋值和判等

数组是对象，因此，赋值操作符=和判等操作符==作用于数组的行为与它们作用于我们在讨论数组之前看到的各种对象的行为相同。为了理解这些操作符如何应用于数组，我们需要稍微了解一下数组是如何在计算机主存中存储的。这项讨论的要点在于整个数组的内容（即所有索引变量的内容）都一起存储在内存中一块可能很大的区域内。在这种方式中，整个数组内容的位置可以由一个内存地址来指定。

回忆一下，对象类型的变量实际上包含的是该对象的地址。赋值操作符会复制这个地址。例如，考虑下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10608.jpeg)

这段代码会产生下面的输出：

![](../Images/image10609.gif)

上面代码中的赋值操作b=a会将数组变量b赋值为与数组变量a具有相同的内存地址。因此，a和b是同一个数组的两个不同的名字。因此，当我们修改a[2]的值时，也就修改了b[2]。所以，最好不要对数组使用赋值操作符=。如果想让前面代码中的数组a和b成为具有相同值的不同数组，就必须编写类似下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10610.jpeg)

而不是下面的赋值语句：

![](../Images/image10611.gif)

注意，上面的代码假设数组a和b具有相同的长度。

判等操作符==会测试两个数组是否存储在计算机内存中相同的位置上。例如，下面的代码

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10612.jpeg)

会产生下面的输出：

![](../Images/image10613.gif)

尽管这两个数组以相同的顺序包含相同的整数，但是它们存储在内存中不同的位置上。因此，b==a为false，因为==测试的是内存地址是否相同。

如果想要测试两个数组是否包含相同的元素，必须测试一个数组中的每个元素是否都与另一个数组中对应的元素相等。程序清单7.6包含了一个简短的演示类，展示了实现此目的的一种方式。

程序清单7.6　两种相等性

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10614.jpeg)

疑难杂症：对数组使用操作符=和==

可以使用赋值操作符=赋予一个数组多个名字，但是不能使用它将一个数组的内容复制给另一个不同的数组。类似地，判等操作符==测试的是两个数组名引用的是否是相同的内存地址，它不会测试两个不同的数组是否包含相同的值。

牢记：数组类型是引用类型

数组类型的变量持有的只是数组存储在内存中的地址。这个内存地址称为对内存中该数组对象的引用。因此，数组类型经常也被称为引用类型。回忆一下第5章的内容，引用类型是指其变量持有的是引用（即内存地址）而不是该变量命名的实际项的类型。数组类型和类类型都是引用类型。基本类型不是引用类型。

常见问题：数组真的是对象吗？

数组不属于任何类。类对象的有些特性（例如我们将在第8章讨论的继承）并不适用于数组。因此，是否应该将数组当作对象并没有100%绝对的答案。但是，这主要是一种学术争论。在Java中，数组被官方定义为对象。只要Java文档声明某些东西适用于所有对象，那么它们就一定适用于数组。