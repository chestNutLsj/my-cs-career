   

### 7.3.2　部分填充的数组

程序清单7.9中的OneWayNoRepeatsList类中的数组entry包含了列表中的项。当列表未满时，entry就是一个部分填充的数组。在某些情况下（例如这里描述的情况）我们需要数组中包含一些索引变量，但并非占满所有索引变量。此时，我们必须跟踪数组中已经使用了多少容量，以便了解其中多少索引变量是可用的。正常情况下，我们可以使用一个int变量来对数组中的项计数。例如，程序清单7.9中的OneWayNoRepeatsList类使用了countOfEntries变量来实现此目的。特别是，countOfEntries表示列表中包含索引从0到countOfEntries-1的数组元素，如图7.4所示。跟踪数组中当前使用了多少容量显得非常重要，因为其他的数组项包含的都是无关的值。当访问部分填充的数组时，我们希望只访问数组中那些包含有意义的值的元素，而忽略数组中其他的元素。当然，在部分填充的数组中添加或删除项时，有意义的值和不相关的值之间的边界线会发生移动，这种移动必须通过修改恰当的int变量的值（例如修改countOfEntries的值）来进行记录。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10638.jpeg)

图7.4　部分填充的数组

在典型情况下，数组中有意义的部分是从数组开头开始的，但是这并非是绝对的要求。如果希望使用并非从索引0开始的数组部分，那么可以使用两个int变量，例如first和last，分别记录希望使用的元素范围内的第一个和最后一个元素的索引。这些变量可以是实例变量，也可以是方法的参数。例如，我们可以定义具有下面方法头的静态方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10639.jpeg)

牢记：数组中项的数量与数组长度

我们需要区分数组中项的数量和数组的容量。数组a的容量就是a.length，它是在定义数组时创建的数组元素的数量。我们可能并没有用到所有这些元素。在这种情况下，我们需要跟踪已经使用的元素数量。典型情况下，我们有两个整数：一个是数组的容量，另一个是已经使用的元素的数量。

自测问题

17.假设a是一个类型为double的数组。编写一些代码在屏幕上显示a中所有的元素，每个元素一行。

18.假设a是一个部分填充的类型为double的数组，该数组只在前numberUsed个元素中包含有意义的值，其中numberUsed是int类型的变量。编写一些代码来显示数组a中所有有意义的值。

19.如果上一个自测问题中的数组a有10个元素的空间，但是只包含3个元素，那么哪些索引变量将包含这3个元素？numberUsed的值是什么？

20.考虑自测问题18中部分填充的数组。编写一些代码，将数字42放到a中当前最后一个数字的后面。你可以认为数组a是不满的。（提示：你必须更新numberUsed。）

21.重写上一个自测问题，但是这次假设你不知道数组a是否是满的。如果数组a是满的，那么你的代码应该在屏幕上显示一条适合的消息。

22.为OneWayNoRepeatsList类编写一个访问器方法getEntryArray，它会返回数组entry的副本。因为entry是字符串数组，所以你无须复制字符串本身。