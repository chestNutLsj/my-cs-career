   

### 7.5.5　编程示例：工时记录

在这个编程示例中，名为hours的二维数组会用来存储某个公司中每位雇员从周一到周五这五个工作日内的工时数。第一个数组索引用来指定一周中的某一天，而第二个索引用来指定雇员。这个二维数组是程序清单7.14中给出的名为TimeBook的类的私有实例变量。这个类包含main方法，该方法用一家只有3个雇员的小公司演示了这个类的用法。其中雇员被编号为1、2和3，但是存储在数组索引为0、1和2的位置上，因为数组索引是从0开始编号的。因此，在指定雇员的数组索引时，需要做减1调整。我们可以将周一编号为0，周二编号为1，以此类推，以避免在日编号和日索引之间做调整。

例如，编号为3的雇员在周二的工时就存储在hours[1][2]中。第一个索引表示一周中的第二个工作日，即周二，而第二个索引表示第三位雇员。

常见问题：这很令人困惑，为什么我们不像之前在一维数组中所做的去避用索引0呢？

对于一维数组a而言，如果我们定义了一个额外的数组元素的话，建议忽略a[0]。浪费一个包含地址的内存位置并不是什么大事。但是对于二维数组，如果忽略索引为0的元素，那么我们将浪费一整行或一整列，或者同时浪费一整行和一整列。总的来说，这样做并不好。在这个示例中不会避用索引0。

常见问题：我们可以使用枚举吗？

可以，我们可以为工作日定义枚举，就像下面这样：

![](../Images/image10679.gif)

回忆一下，MON的序数值是0，TUE的序数值是1，以此类推。使用枚举可以使程序更易于理解。

与用枚举来表示工作日不同，我们将直接像下面这样定义5个具名常量，并将它们用作索引：

![](../Images/image10680.gif)

程序清单7.14中所示的TimeBook类并不完整，它需要更多的方法才能成为一个真正有用的类，但是对于用于main的演示而言，它的方法已经足够了。你可以将程序清单7.14中的定义看作是编写该类定义时的第一稿，它甚至还有一个用于setHours方法定义的桩。回忆一下，桩是其定义可以用于测试的方法，但是该定义还不是最终的定义。然而，在当前阶段，setHours的完整程度足以用来演示二维数组hours的用法，该数组是TimeBook类中的实例变量。

除了二维数组hours，TimeBook类还用到了两个作为实例变量的一维数组：数组weekHours记录了每位雇员一周内的工时总数，即weekHours[0]表示雇员1一周内的工时总数，weekHours[1]表示雇员2一周内的工时总数，以此类推；数组dayHours记录了一周内每一天所有雇员的工时总数，即dayHours[MON]表示星期一所有雇员的工时总数，dayHours[TUE]表示星期二所有雇员的工时总数，以此类推。

程序清单7.14　计时程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10681.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10682.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10683.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10684.jpeg)

方法computeWeekHours和computeDayHours会分别根据二维数组hours的值计算weekHours和dayHours中的值。图7.8展示了数组hours中的一些样例数据，并展示了hours和weekHours以及dayHours数组之间的关系。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10685.jpeg)

图7.8　TimeBook类的数组

一定要注意computeWeekHours方法是如何使用二维数组hours的数组索引的。其中一个for循环是嵌套在另一个for循环中的。外层的for循环会遍历所有的雇员，而内层for循环会为一周中的每一天执行一次。下面复现了内层的for循环以及其之前和之后的赋值语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10686.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10687.jpeg)

注意，当计算每位雇员的工时总数时，第二个索引（即表示特定雇员的索引）持有的是常量。

computeDayHours方法的工作方式类似，它会计算所有雇员在一周中每一天的工时总数。但是，在本例中，内层for循环会在第一个索引持有常量时遍历第二个索引。或者，换种说法，雇员索引和工作日索引的角色发生了互换。

尽管类TimeBook的编写是正确的，但是它还不是一个可以保存并反复重用的已完成的软件制品。setHours方法只是一个桩，需要替换为可以让用户从键盘输入工时的更通用的方法。showTable方法并非总是能够产生如程序清单7.14般整齐的输出，除非所有工时的数字位数都相同。因此，showTable方法需要更加健壮，以便能够整齐地显示任何组合的工时数。最后，TimeBook类应该具有更多的方法，使得它能够适用于广泛的场景。编程项目5会让你以上述这些方式来完善TimeBook类的定义。