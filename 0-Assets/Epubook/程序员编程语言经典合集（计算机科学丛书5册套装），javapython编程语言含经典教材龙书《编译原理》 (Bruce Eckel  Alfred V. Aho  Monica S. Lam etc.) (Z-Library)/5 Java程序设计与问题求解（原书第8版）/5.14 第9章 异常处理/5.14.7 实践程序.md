   

## 实践程序

实践程序通常可以通过编写一个小程序来解决，该程序直接应用了本章描述的编程原理。

1.在一个让用户输入一行不超过20个字符的文本的程序中，使用自测问题16中的MessageTooLong-Exception异常类。如果用户输入的字符数量在可接受范围内，那么该程序应该显示输入的消息"You entered x characters，which is an acceptable length"（其中字母x将被替换成实际的字符数量）。否则，就应该抛出并捕获一个MessageTooLongException异常。无论哪种情况，该程序都应该重复地询问用户是想要再输入一行，还是想要退出程序。

2.返回特殊的错误码的方法有时可能会引发问题。调用者可能会忽略该错误码，或者将错误码当作有效的返回值处理。在这种情况下，最好是抛出异常。下面的类维护了账户余额，并且会返回特殊的错误码。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11062.jpeg)

重写该类，让它不要返回-1作为错误码，而是抛出适合的异常。编写测试代码，尝试存、取无效的金额，并捕获抛出的异常。

3.下面的代码片段输入了一个整数，然后输出了它：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11063.jpeg)

运行这个程序，但是输入文本而不是整数。这个程序应该崩溃并告诉你nextInt方法抛出了哪种异常。将这段代码包装在一个try/catch块中，在其中捕获抛出的异常。添加一个循环，使得用户在输入文本后必须再次执行输入，以输入数字。