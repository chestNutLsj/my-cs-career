   

### 9.4.4　Timeline类

JavaFX时间线可用来创建动画。时间线中包含关键帧，这些帧会映射到动画的属性上。在本例中，只是以非常简单的方式用到了时间线，即按照规律的时间间隔不断地调用处理器。

在本例中，我们将使用该处理器来让一个球动起来。这个球会在屏幕的几条边上来回“反弹”。每隔10毫秒，该处理器就会运行一次，更新球的位置。因为只是每10毫秒调用一次该处理器，所以整个应用程序仍旧能够响应用户的操作并处理其他的事件。

为了创建Ball类，我们让其从Circle类中派生，程序清单9.17定义了这个类。我们让球的半径为30个像素，用变量x和y来跟踪球的中心。变量xVel和yVel是球在x和y方向上的速度，将它们初始化为随机的值。为了更新球的位置，我们将x当前的值加上xVel，将y当前的值加上yVel。当球向左移动或向上移动时，这两个速度分别为负值，为了让速度反向，我们直接将其乘以-1。

程序清单9.17　Ball类

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11057.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11058.jpeg)

为了让球动起来，我们用包含ActionEvent处理器的KeyFrame对象创建了一个Timeline对象，其中的处理器会不断地以每10毫秒为间隔做一次更新，直至用户关闭该应用。在该处理器内部，我们更新球的位置，然后将其x和y坐标设置为球的新位置。如果球碰到了该应用的某条边界线，那么速度就会反向。程序清单9.18包含了让球动起来的主应用逻辑。

程序清单9.18　用Timeline来反弹球

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11059.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image11060.jpeg)

自测问题

36.如果想要让用户在四个不同的选项中选择一个，应该使用什么控件？

37.如果将三个单选按钮放到某个JavaFX程序中，但是没有把它们放到某个ToggleGroup中，那么当程序运行时，这些单选按钮的行为会是什么样的？

38.如果想要使用场景中节点的绝对定位，可以使用哪种布局？