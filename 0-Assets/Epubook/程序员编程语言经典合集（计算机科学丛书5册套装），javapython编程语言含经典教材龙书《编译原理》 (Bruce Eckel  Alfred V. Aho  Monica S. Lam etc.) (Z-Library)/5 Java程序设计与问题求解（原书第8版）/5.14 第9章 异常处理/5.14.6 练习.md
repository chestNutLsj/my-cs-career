   

## 练习

1.编写一个程序，使得学生可以将会面安排在下午1点、2点、3点、4点、5点或6点整。使用由6个字符串构成的数组来存储这些时间段的名字。编写一个循环，只要数组中还有空闲空间，就不断迭代。在try块中让用户输入时间和名字，如果输入的时间空闲，就将其名字放入数组中。如果输入的时间不空闲，就抛出一个TimeInUseException异常。如果输入的时间不合法，就抛出一个InvalidTimeException异常。针对每一种不同的异常，都使用一个catch块来捕获它。

2.编写一个程序，使得用户可以计算两个整数值相除后的余数。x/y的余数为x%y。捕获所有抛出的异常，并允许用户输入新的值。

3.编写一个异常类，它适合用来表示用户输入的时间无效。时间的格式必须是hour：minute后面跟着"am"或"pm"。

4.从你在上一个练习中编写的类中派生若干个异常类，每个新类都应该表示一种具体类型的错误。例如，InvalidHourException可以用来表示输入的hour值不在1到12的整数范围内。

5.编写一个TimeOfDay类，它会使用上一个练习中定义的异常类。给它添加一个setTimeTo（time String）方法，在timeString对应有效时间时，该方法就用来设置时间，在timeString对应无效时间时，该方法应该抛出恰当类型的异常。

6.编写代码，从键盘读取一个字符串，并用它来设置上一个练习中的TimeOfDay类型的myTime变量的值。使用try-catch块来确保myTime一定会被设置为有效的时间。

7.创建一个SongCard类，用来表示可以在线购买歌曲的礼物卡。它应该具有下面的私有属性：

·songs——卡中歌曲的数量。

·activated——如果卡片被激活，则为true。

它还应该具有下面的方法：

·SongCard（n）——具有n首歌的卡片的构造器

·activate——激活礼物卡。如果卡片已经被激活，则抛出异常。

·buyASong——通过递减用这张卡还可以购买的歌曲数量来记录购买了一首歌。如果该礼物卡余额已使用完或者尚未激活，就抛出异常。

·songsRemaining——返回使用该礼物卡可以购买的歌曲数量。

8.创建一个Rational类，用来表示有理数。它应该具有下面的私有属性：

·分子（整数）。

·分母（整数）。

它还应该具有下面的方法：

·Rational（numerator，denominator）——有理数的构造器。

·针对分子和分母的访问器方法getNumerator和getDenominator，以及修改器方法setNumerator和setDenominator。

你应该通过使用异常来确保分母永远不为0。

9.修订上一个练习中所描述的Rational类，使用断言而不是异常来确保分母永远不为0。

10.假设你要创建一个用来对房间中人群计数的对象。我们知道房间中的人数不能为是负数。创建一个RoomCounter类，它具有下面三个公有方法：

·addPerson——房间中增加一个人。

·removePerson——房间中移除一个人。

·getCount——返回房间中的人数。

如果removePerson会使人数小于0，那么就抛出一个NegativeCounterException异常。

11.修订上一个练习中描述的RoomCounter类，使用断言而不是异常来防止房间中的人数变为负数。

12.展示将幂运算添加到程序清单9.12中的Calculator类中所需做出的修改。用^表示幂运算的操作符，并用方法Math.pow来执行计算。

13.编写一个LapTimer类，它可以用来对径赛中每一圈计时。这个类应该具有下面的私有属性：

·running——表示计时器是否在计时的布尔值。

·startTime——计时器开始计时的时刻。

·lapStart——当前这一圈开始时计时器的值。

·lapTIme——上一圈花费的时间。

·totalTime——从这场径赛开始到上一圈完成时的总时间。

·lapsCompleted——到目前为止已经完成的圈数。

·lapsInRace——这场径赛中的总圈数。

这个类还应该具有下面的方法：

·LapTimer（n）——具有n圈的径赛的构造器。

·start——启动计时器。如果这场径赛已经开始，则抛出异常。

·markLap——标记当前圈结束，新一圈开始。如果这场径赛已经结束，则抛出异常。

·getLapTime——返回上一圈的时间。如果第一圈还未完成，则抛出异常。

·getTotalTime——返回从这场径赛开始到上一圈完成时的总时间。如果第一段尚未完成，则抛出异常。

·getLapsRemaining——返回到目前为止尚未完成的圈数，包括当前这一圈。

所有时间都以秒来表示。

为了获得从某个基线日期开始计算到当前时刻的以毫秒为单位的值，可以调用：

![](../Images/image11061.gif)

这个调用会返回long类型的值。通过获取在两个不同时刻执行的调用所返回的值之间的差，就可以知道这两次调用之间流逝的时间。注意，Calendar类在java.util包中。