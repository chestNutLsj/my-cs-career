   

### 1.3.3　测试与调试

编写正确程序的最佳方式就是仔细地设计必需的类以及用于对象方法的算法。然后，仔细地将所有东西都转译为像Java这样的编程语言。换句话说，根除错误的最佳方式是从一开始就避免犯错。但是，无论我们多么仔细，程序中仍旧有可能包含某些错误。当你编写完一个程序时，应该对其进行测试，以查看它是否正确地执行，然后发现所有错误并修复它们。

程序中的错误称为缺陷（bug）。因此，根除程序中错误的过程称为调试（debug）。有三种公认的缺陷或错误：语法错误、运行时错误和逻辑错误。下面我们将按顺序来考察它们。

语法错误是指程序中的文法错误。在编写程序时，我们必须非常严格地遵守文法规则。违反这些规则中的任何一条（例如，忽略了所需的标点符号）都是一个语法错误。编译器会探测到语法错误，并给出一条表明它认为错误所在的错误消息。但是，编译器只是在猜测错误所在，因此其对问题的诊断可能存在谬误。

回顾：语法

编程语言的语法就是该语言的文法规则集，即，正确地编写程序或程序组成部分所必须遵守的规则。编译器会探测到程序中的语法错误，并做出它对出错情况的最佳猜测。

在程序运行时探测到的错误称为运行时错误。这种错误将会产生一条错误消息。例如，你可能会不经意地试图用某个数字除以0。错误消息可能并不容易理解，但是至少它可以使我们知道有东西出错了。有时，错误消息甚至可以精确地告诉你到底出了什么问题。

如果程序底层的算法出了错误，或者用Java编写的某些内容语法正确但是逻辑错误，那么这样的程序可以编译和运行，并且不会产生任何错误消息。此时，你编写的就是一个有效的Java程序，但是它并不是你想要的程序。该程序可以运行并产生输出，但是其输出并不正确。在这种情况下，该程序就包含逻辑错误。逻辑错误是程序或算法中的概念错误。例如，如果你在需要减号的地方错误地使用了加号，那么你就制造了一个逻辑错误。你可以在没有任何错误消息的情况下编译并运行该程序，但是该程序将给出错误的输出。有时，逻辑错误将导致会产生错误消息的运行时错误。但是，通常情况下，逻辑错误不会给出任何错误消息。因此，逻辑错误是最难定位的。

疑难杂症：处理“疑难杂症”

任何编程语言都有一些细节会让人犯错误，它们令人意外且难以处理。这些种类的问题经常被称为陷阱，但是它们有一个更生动的术语——疑难杂症。疑难杂症就像是等着让你掉进去的陷阱。当你掉进陷阱时，陷阱就“捕获了你”（got you），因此在英语中对应的词汇是连读后的“gotcha”。

在本书中，我们有许多“疑难杂症”部分，就像本部分一样，它们将提醒你注意许多最常见的陷阱，并告知你如何避免它们或如何处理它们。

疑难杂症：隐藏的错误

如果程序只是可以在不报错的情况下编译和运行，甚至还会产生看起来合理的输出，那是无法推断程序是否正确的。你应该用一些可以给出可预测输出的测试数据来运行你的程序。要想这么做，就需要选择一些可以计算出正确结果的数据，针对这些数据，你可以用笔和纸来计算，也可以搜索出答案，或者用其他方式来计算答案。尽管这种测试不能确保你的程序是正确的，但是做的测试越多，你对你的程序就越自信。

自测问题

29.什么是语法错误？

30.什么是逻辑错误？

31.哪种错误可能会产生错误消息，警告你程序中包含错误这个事实？

32.假设你编写的程序可以针对给定的日期（例如2014-12-1）计算出是星期几（Sunday、Monday等）。现在假设你忘记考虑闰年了，这样你的程序就包含了一个错误。它是什么类型的程序错误？