   

### 8.5.3　在主GUI应用类中处理事件

程序清单8.20中的方法有一点显得不太方便，那就是我们必须承受定义一个类来处理按钮点击事件的工作量。另一点不便之处是HandleButtonClick类并不能访问Button-Demo1类中任何成员变量。对于控件来说，与应用中的其他控件进行交互是很常见的情况。我们可以绕过这个问题，方法是在HandleButtonClick的构造器中，传递进去我们希望访问的其他控件的引用，但是当我们不得不传递一大堆引元时，这个方法也会显得不是很方便。

另一种方式是让HandleButtonClick成为ButtonDemo1类的私有内部类，这使得HandleButtonClick类可以访问ButtonDemo1中的成员变量。要想这么做，只需将HandleButtonClick类移到ButtonDemo1中，与ButtonDemo1的方法处于同一个级别，然后将public修改为private。内部类将在第12章讨论。

还有一种方法是让ButtonDemo类自身实现EventHandler<ActionEvent>接口。这意味着我们需要在ButtonDemo类中添加handle方法。因为这个方法在ButtonDemo内部，所以它可以访问作为该类组成部分的任何成员变量，例如其他的UI控件。

在程序清单8.22中，我们就采用这种方式，并将ButtonDemo1修改成了ButtonDemo2：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10925.jpeg)

为了将按钮动作设置为ButtonDemo2类中的handle方法，我们只需将this传递给setOnAction方法，将监听器设置为对当前活跃对象的引用：

![](../Images/image10926.gif)

这确实产生了一个新的应用。由于现在只有单个对象（当前对象）来处理两个按钮的点击事件，所以如果我们希望区分到底点击了哪个按钮，就必须在handle方法中进行确认。在之前的版本中，我们区分哪个按钮被点击的方式是对每个按钮关联不同的Handle-ButtonClick实例。实现按钮区分的一种方式是调用getText（）方法，它会获取按钮上的文本。然后，我们检查文本的内容并作出相应的动作。

在程序清单8.22中，handle方法在一个按钮被点击时会禁用另一个按钮。为了能够使用getText（）方法，我们通过强制类型转换得到了Button对象。作为安全检查，只有在引发事件的源对象是Button对象时，才会执行上述这些步骤。其中，源对象可以从event引元中获取。

程序清单8.22　在主GUI应用类中处理事件

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10927.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10928.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10929.jpeg)