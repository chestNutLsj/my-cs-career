   

### 8.2.7　Object类

Java是一个“夏娃”类，即，它是所有类的祖先。在Java中，每个类都是从Object类派生出来的。如果类C具有一个与其不同的基类B，而这个基类是从Object派生的，那么C就是Object的派生类。因此，每个类的每个对象都具有Object类型，以及它自己的类的类型和所有其祖先类的类型。甚至那些我们自己定义的没有使用继承的类，也都是Object类的子孙类。如果没有让我们的类成为某个类的派生类，Java就会自动地让它成为Object的派生类。

Object类使得Java程序员可以编写这样的方法：它具有Object类型的参数，该参数表示任何类的对象。我们最终将会碰到接受Object类型引元的库方法，这些方法可以用任何类的对象作为引元来调用。

Object类还有一些每个Java类都会继承的方法。例如，每个类都从其某个祖先类中继承equals和toString方法，要么是直接从Object类继承的，要么是从最终从Object类中继承了这些方法的某个类中继承的。但是，从Object继承的equals和toString方法对于我们定义的几乎所有类都是无法正确工作的。因此，我们需要用新的更恰当的方法定义去覆盖继承而来的定义。

编写equals的正确版本对于刚入门的程序员来说有点复杂。我们在本书中所呈现的equals方法在大多数情况下都工作得很好，下一节将展示如何编写完备且正确的equals定义。

继承而来的toString方法不接受任何引元。toString方法被认为会返回对象中所有的数据，它们被打包在一个字符串中。但是，继承而来的toString版本几乎总是没什么用的，因为它所产生的数据的字符串表示并不怎么样。我们需要覆盖toString的定义，使它能够针对所定义的类的对象中的数据产生适合的字符串。

例如，下面的toString定义可以添加到程序清单8.2的Student类中：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10822.jpeg)

在可以在网站上下载的本书的源代码，其中所包含的Student类的版本包含了这个toString方法，因此，你可以很容易地测试它。

在向Student类中添加了这个toString方法之后，我们可以用它来按照下面的方式显示输出：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10823.jpeg)

所产生的输出为：

![](../Images/image10824.gif)

这里调用的方法println具有一个String类型的参数。

System.out对象有若干个println的定义，换句话说，println被重载了。这些println方法中有一个具有类型为Object的参数，其定义等价于下面这个定义：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10825.jpeg)

编程窍门：在典型的类中定义你自己的toString方法

Object的toString方法不会显示与你的类相关的任何数据。你总是应该在你编写的类中覆盖toString方法。

另一个从Object类中继承的方法是clone方法。这个方法不接受任何引元，并且会返回一个调用对象的副本，而返回的对象被认为与调用对象具有相同的数据，但是它是不同的对象，只是一个“双胞胎”或者“克隆体”。就像其他从Object类继承而来的方法一样，clone方法需要重新定义（覆盖），以确保其功能正确。但是，对于clone方法，要有些其他必需做的事情。对clone方法的透彻讨论已经超出了本书的范围，但是在6.5节和附录J（在本书的网站上）给出了有关这个方法的一些信息。

自测问题

16.考虑下面的代码，即我们在上一节讨论的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10826.jpeg)

为什么输出会在两行中而不是所有内容都在一行中？

17.下面哪些是合法的？哪些是非法的？Undergraduate类是Student的派生类，而Student是Person的派生类。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10827.jpeg)