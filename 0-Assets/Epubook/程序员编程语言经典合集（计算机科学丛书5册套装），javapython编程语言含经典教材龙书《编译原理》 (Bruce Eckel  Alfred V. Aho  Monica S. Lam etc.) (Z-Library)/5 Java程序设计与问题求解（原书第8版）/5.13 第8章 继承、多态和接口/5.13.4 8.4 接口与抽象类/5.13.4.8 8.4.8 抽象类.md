   

### 8.4.8　抽象类

在编写程序清单8.12中的ShapeBasics类时，我们并未打算创建ShapeBasics类的对象。相反，我们将其设计为其他类的基类，例如程序清单8.13中的Rectangle类。尽管实际上并不需要创建ShapeBasics类的对象，但是我们还是可以这样做，如下面语句所示：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10910.jpeg)

但是，为了让这条语句有效，需要在ShapeBasics类中编写drawHere方法的定义。我们所编写的定义就是一个占位符，其所做的仅仅只是绘制一个星号，这样做只是为了在调用它时做些事情。我们从来都没打算要调用基类ShapeBasics的对象的drawHere方法，而是只想使用派生类的对象的drawHere方法，例如Rectangle和Triangle类的drawHere方法。

对于我们打算在派生类中覆盖的方法，与为其捏造一个定义不同，我们可以将其声明为抽象的（abstract），就像下面这样：

![](../Images/image10911.gif)

我们在方法头中书写了关键词abstract，在方法头的后面跟着一个分号，并删除了方法体。抽象方法必须被某个（非抽象的）派生类所覆盖并给出其定义。在类中包含抽象方法是一种强制让派生类定义某个特定方法的方式。

Java要求如果一个类包含至少一个抽象方法，那么该类就必须被声明为抽象的。我们可以像下面这样在类定义的头部包含关键词abstract来实现此目的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10912.jpeg)

以这种方式定义的类称为抽象类。如果一个类是抽象的，那么我们就无法创建这个类的对象，它只能用作其他类的基类。正因为此，抽象类有时也称为抽象基类。

在程序清单8.19中，我们将ShapeBasics类修订为了抽象类，并将其命名为ShapeBase。

如果我们在之前的案例研究中使用了这个抽象类ShapeBase，那么其所有4个派生类都可以像之前一样工作，尽管我们无法创建ShapeBase的对象。

尽管ShapeBase类是抽象的，但是并非其所有方法都是抽象的。除了drawHere方法外，所有方法定义都与最初的ShapeBasics类完全相同。它们都是完整的定义，并没有用到关键词abstract。当在抽象类中定义方法体具有实际意义时，就应该给出其定义。这种方式将尽可能多的细节塞进了抽象类，使得这些细节无须在每个派生类中都重复。

为什么需要抽象类？因为它们可以简化我们的思路。我们已经在定义ShapeBasics的案例研究中解释过，这样做我们就无须在每种图形中都重复像drawHere这样的方法的定义。但是我们还是不得不为drawAt编写一个没什么用的定义。抽象类使得定义基类变得更容易了，它使得我们再也无须编写无用的方法定义了。如果某个方法总是会被覆盖，那么就可以让它成为抽象方法，包含它的类进而也就是抽象的。抽象方法尽管没有给出完整的定义，但是它仍然具有实际的作用，作为在所有（非抽象的）派生类都必须给出定义的方法的占位符。注意，程序清单8.19中的drawAt方法包含对drawHere方法的调用。如果在派生类中抽象方法drawHere被忽略，那么这个对drawHere的调用就是非法的。

程序清单8.19　抽象类ShapeBase

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10913.jpeg)

你可能注意到了，抽象类与接口很类似。它们都定义了方法，并且我们都不能创建它们的实例。但是，我们可以在抽象类中为派生类定义缺省的方法，但是在接口中我们只能指定方法头。从概念上讲，抽象类表示的是我们正在解决的问题中抽象实体的概念视图，而接口是在指定一个类必须支持的功能。

牢记：抽象类是一种类型

我们无法创建抽象类的对象。例如，给定程序清单8.19中所定义的抽象类Shape-Base，下面的语句是非法的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10914.jpeg)

尽管如此，具有ShapeBase类型的参数则完全具有实际意义，因为ShapeBase的任何子孙类的对象都可以传递给该参数。

自测问题

32.如果ShapeBase的定义如程序清单8.19所示，那么下面的语句是否合法？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10915.jpeg)

33.如果ShapeBase的定义如程序清单8.19所示，而Rectangle的定义如程序清单8.13所示，但是ShapeBasics被ShapeBase所替代，那么下面的语句是否合法？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10916.jpeg)