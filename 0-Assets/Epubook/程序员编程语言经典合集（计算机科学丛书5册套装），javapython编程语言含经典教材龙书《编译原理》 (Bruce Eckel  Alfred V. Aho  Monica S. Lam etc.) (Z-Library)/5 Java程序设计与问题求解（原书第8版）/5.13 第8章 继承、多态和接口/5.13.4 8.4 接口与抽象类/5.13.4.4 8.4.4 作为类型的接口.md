   

### 8.4.4　作为类型的接口

接口是一种引用类型。因此，我们可以编写参数为接口类型的方法，例如Measurable类型的参数。例如，假设程序定义了下面的方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10860.jpeg)

程序可以调用这个方法，传递给它一个任何实现了Measurable接口的类的对象。

例如，程序可能包含下面的语句：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10861.jpeg)

尽管两个方法调用中的变量类型都是Measurable的，但是box和disc引用的对象具有不同的getPerimeter和getArea的定义。变量box引用的是Rectangle对象，而disc引用的是Circle对象。因此，下面的调用：

![](../Images/image10862.gif)

会显示：

![](../Images/image10863.gif)

而下面的语句：

![](../Images/image10864.gif)

则会显示：

![](../Images/image10865.gif)

Rectangle和Circle类实现了同一个接口，因此我们可以在调用方法display时用其中一个的实例去替换另一个的实例。这是多态的另一个例子，通过使用动态绑定将一个对象替换为另一个对象。这些术语表示的都是同一个事实，即方法调用直至程序执行时才和方法定义绑定。

下面是另一个例子，考虑下面的代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10866.jpeg)

这两个对display的调用是完全相同的，并且display中的代码在这两种情况下也是相同的。因此，在display中的对getPerimeter和getArea的调用也是相同的。但是，这些调用使用的是不同的getPerimeter和getArea的定义，因此这两个对display的调用产生了不同的输出，就像它们在之前示例中所做的那样。

接口类型的变量可以引用任何实现了该接口的类的对象，但是该对象自身总是会确定针对每个方法名应该执行哪种方法行为。变量的类型并不重要，重要的是创建该对象时所使用的类名，因为Java使用的是动态绑定。甚至，即使使用了类型强制转换也无法糊弄Java。

因此，我们需要了解动态绑定是如何与Java编译器的类型检查进行交互的。例如，考虑下面的语句：

![](../Images/image10867.gif)

我们之所以可以将Circle类型的对象赋值给Measurable类型的变量，还是因为Circle实现了Measurable。但是，我们在使用该变量时，只能调用出现在Measurable接口中的方法。因此，下面语句中的对getCircumference的调用是非法的：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10868.jpeg)

因为getCircumference不是Measurable接口中的方法名。在这个调用中，变量m是Measurable类型的，但是m引用的对象仍旧是Circle类型的对象。因此，虽然该对象具有getCircumference方法，但是编译器并不知道这一点！为了使该调用合法，我们需要进行强制类型转换，就像下面这样：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image10869.jpeg)

牢记：什么是合法的以及会发生什么

变量的类型决定了可以使用什么样的方法名，但是该变量引用的对象决定了将会使用方法的哪个定义。

回顾：将动态绑定和多态应用于接口

动态绑定应用于接口的方式与其应用于类的方式相同。该过程使得不同类的对象可以彼此互相替换，只要它们具有相同的接口。这种能力称为多态，使得不同的对象针对相同的方法名可以执行不同的方法行为。

自测问题

23.设想有一个Oval类，它定义了getPerimeter和getArea方法，但是没有implements Measurable子句。你是否可以将一个Oval的实例作为引元传递给上一节中给出的display方法？

24.一个类是否可以实现多个接口？