   

### 10.6.2　基本形状

类层次结构包含多个用户绘制形状的子类。在本节中我们把精力主要放在其中三个上：Rectangle、Square、Line。

矩形是由左上角、宽度和高度指定的几何形状。Rectangle类继承自GeometricShape，构造函数把左上角传递给超类并保存宽度和高度。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07553.jpeg)

Rectangle子类中覆盖了draw方法并调用了合适的canvas方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07554.jpeg)

注意，GeometricShape超类的draw方法被调用并设置了绘制矩形所需要的颜色。

我们还需要提供获取宽度和高度的方法，覆盖返回0的超类方法：

![](../Images/image07555.gif)

Square子类是一个包装类的例子。包装类包装或封装另一个类的功能来提供更方便的接口。例如，我们可以使用Rectangle子类绘制一个正方形，但是这个类要求我们提供宽度和高度。因为正方形是矩形的特例，我们定义一个Square子类来扩展或包装Rectangle类并且只要求一个值，也就是边长。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07556.jpeg)

现在我们再看一下Line类的实现。一条直线是由起点和终点来指定的。正如图10-9所显示，可能哪个点也不是限定盒子的左上角。相反，我们需要计算二者中较小的x坐标和y坐标并把那些值传递给超类构造函数。我们还需要使用实例变量保存起点和终点，因为我们需要使用它们来绘制直线。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07557.jpeg)

![](../Images/image07558.gif)

一如既往，draw方法必须被覆盖：

![](../Images/image07559.gif)

宽度和高度是起点与终点之间x坐标和y坐标的差。然而，如果直线不是向下倾斜的，我们需要使用差的绝对值（见图10-9）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07560.jpeg)

图10-9　直线的限定盒子

![](../Images/image07561.gif)

最后，我们需要覆盖moveBy方法使得可以调整起点、终点以及左上角。

![](../Images/image07562.gif)

下面的程序演示了几何形状类的用法，几何形状类的实现可以在配套源码的ch10/sec06/shapes.py模块中找到。

ch10/sec06/testshapes.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07563.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07564.jpeg)