   

### 10.6.3　形状分组

图10-8中显示的层次结构图中的子类Group并不真的绘制几何形状。相反，它只是个形状的容器。Group类可以用来组合基本几何形状来创建复杂形状。例如，假设你使用一个矩形构造一个门，一个圆表示门把手，一个圆表示观察孔。这三个组件可以放进一个Group中，其中每个形状都使用相对于这个组的位置来定义。这样就允许把整个组移动到一个不同的位置，而不需要移动每个形状。一旦创建，整个组就可以调用它的draw方法来绘制。另外，一个Group可以包含其他的组，使得可以创建更加复杂的场景。

当新形状加入到一个Group对象时，限定盒子的宽度和高度应该扩展来容纳新的形状。图10-10演示了由3个形状组成的组的限定盒子。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07565.jpeg)

图10-10　一个Group对象的限定盒子  

为了创建Group，你提供它的限定盒子的左上角坐标。该类定义了一个使用列表保存形状的实例变量。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07566.jpeg)

把一个形状加入到组涉及几个步骤。首先，形状必须被追加到列表中：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07567.jpeg)

组中每个形状的位置都是相对于组的限定盒子左上角进行计算的，我们必须确保每个形状都在这个点的右下方。如果不是的话，必须移动它。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07568.jpeg)

实现上面三个步骤的add方法的完整实现如下所示：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07569.jpeg)

组的宽度取决于组中成员任何一个的最右边范围。一个形状的最右边范围是shape.getX()+shape.getWidth()。下面的方法用来计算这些范围的最大值。

![](../Images/image07570.gif)

组的高度（最低端范围）使用同样的方式进行计算。

![](../Images/image07571.gif)

最后，整个组被绘制到画布上。包含在该组中的形状是相对于组的限定盒子左上角定义的。在一个形状可以被绘制之前，它必须移动到它相对于该组限定盒子左上角的位置。例如，如果一个矩形的位置是(10，5)，而它所属的组的位置是(100，25)，那么这个矩形的左上角必须在位置(110，30)。该形状被绘制之后，必须回到它的相对位置。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07572.jpeg)

为了演示Group子类的用法，我们重新设计了如何做2.2中开发的italianflag.py程序。

ch10/sec06/italianflag.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07573.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07574.jpeg)

自测题

26.假设已经设计好了带有构造函数__init__(self，x，y，width，height)的Oval类，实现一个Circle类。

27.如果我们想定义一个包装类Hexagon，它应该继承哪个超类呢？

28.假设Polygon类有一个实例变量_vertexList，就像编程实战6.4中那样，你如何实现draw方法呢？

29.编写一个函数，接收一个形状和一个画布引用，绘制该形状，然后构造并使用灰色绘制该形状的限定盒子。

30.在构建复杂形状时，我们可以使用Group作为超类来定义一个新的子类。定义ItalianFlag子类为一个组，通过该组可以创建italianflag.py程序中的意大利国旗。

练习它　现在你可以尝试本章最后的练习：R10.9，P10.11。