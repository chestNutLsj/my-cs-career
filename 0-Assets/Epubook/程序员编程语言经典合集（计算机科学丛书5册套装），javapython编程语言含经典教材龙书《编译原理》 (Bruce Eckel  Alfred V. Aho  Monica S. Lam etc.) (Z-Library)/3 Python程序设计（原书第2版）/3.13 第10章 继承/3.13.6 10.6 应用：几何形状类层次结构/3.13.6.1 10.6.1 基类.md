   

### 10.6.1　基类

我们从层次结构的根部的类开始设计和实现。GeometricShape类应该提供不同的子类通用的功能，包括：

·设置绘制形状使用的颜色。

·获取和设置限定矩形左上角的坐标。

·计算形状（或者定义该形状的限定矩形）的宽度和高度。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07545.jpeg)

图10-8　几何形状的继承图

·在画布上绘制形状。

所有的子类都必须覆盖绘制方法。基类不可能知道如何绘制每个形状，必须依赖子类来处理这个操作。类似地，计算宽度和高度的方法也必须在子类中提供。

确定通用操作和要被覆盖的操作之后，我们需要决定基类的实例变量。我们需要实例变量_fill和_outline来存储该形状使用的填充色和边框颜色。

我们还提供了实例变量_x和_y表示限定矩形左上角的位置。

GeometricShape基类的构造函数需要定义通用的实例变量。我们把x坐标和y坐标作为参数传递给构造函数：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07546.jpeg)

接下来，我们实现访问器方法，返回保存在实例变量中的值：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07547.jpeg)

getWidth和getHeight方法返回0，这些方法应该在子类中进行覆盖。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07548.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07549.jpeg)

我们定义3个修改器方法用来设置颜色，其中两个分别设置边框颜色或填充色，还有一个用来把二者设置为相同的颜色：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07550.jpeg)

注意setFill和setOutline方法中默认值参数的使用。如果没有使用颜色的话就会使用None值。我们这样做是为了让这些方法的使用风格和对应的GraphicsCanvas的方法一样。调用canvas.setFillColor()（没有参数）会把填充色设置为None。

下面的方法用来把形状移动指定的量：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07551.jpeg)

最后，我们定义用来绘制单个形状的draw方法。就像前面提到的，这个方法必须为每个子类的特定形状进行覆盖。但是有个通用操作是所有子类在绘图之前都必须要做的：设置绘制颜色。这样的话，我们基类的draw方法来设置这些颜色。下一节你会看到它在每个子类的draw方法中是如何被调用的。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07552.jpeg)