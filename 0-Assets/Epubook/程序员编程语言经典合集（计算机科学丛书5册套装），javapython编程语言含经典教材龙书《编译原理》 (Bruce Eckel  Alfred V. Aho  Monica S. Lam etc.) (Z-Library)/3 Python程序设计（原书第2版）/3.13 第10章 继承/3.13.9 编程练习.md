   

## 编程练习

■■P10.1　为10.1节中的问题层次结构增加一个类NumericQuestion。如果用户响应和预期答案的误差小于0.01，那么就认为用户响应是正确的。

■■P10.2　为10.1节的问题层次结构增加一个类FillInQuestion。这样的一个问题使用一个包含被__包围的答案的字符串来创建，例如，"The inventor of Python was_Guido van Rossum_"。问题应该被显示为

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07579.jpeg)

■P10.3　修改Question类的checkAnswer方法使得它可以考虑不同的空格或大小写字符。例如，用户响应"GUIDO van Rossum"应该能够匹配答案"Guido van Rossum"。

■■P10.4　为10.1节的问题层次结构增加一个允许多个正确选项的类AnyCorrectChoiceQuestion。答题者应该提供正确选项中的任意一个。答案字符串应该包含所有正确选项，使用空格分隔。在问题文本中提供说明。

■■P10.5　为10.1节的问题层次结构增加一个允许多个正确选项的类MultiChoiceQuestion。答题者应该提供全部正确选项，使用空格分隔。在问题文本中提供说明。

■■P10.6　为Question超类增加一个方法addText，为ChoiceQuestion提供一个不同的实现，在其中调用addText，而不是保存选项列表。

■P10.7　为Question和ChoiceQuestion类提供__repr__方法。

■■P10.8　实现一个超类Person，并继承Person创建两个子类Student和Instructor。Person类具有姓名和出生年份，Student类具有专业，而Instructor类具有工资。为所有类编写类声明、构造函数和__repr__方法。提供一个测试程序测试这些类和方法。

■■P10.9　编写具有姓名和工资的类Employee，创建继承自Employee的类Manager。增加一个叫做_department并且保存字符串的实例变量。提供一个方法__repr__用来输出经理的姓名、部门和工资。设计一个继承自Manager的类Executive。为所有类实现合适的__repr__方法。提供一个测试程序测试这些类和方法。

■■图形P10.10　一个带标签的点具有x坐标和y坐标以及一个字符串标签。提供GeometricShape类的一个子类LabeledPoint，实现构造函数支持LabeldPoint(x，y，label)，再实现一个draw方法用来绘制一个小圆和标签文本。

■■图形P10.11　实现GeometricShape类的子类Polygon。提供构造函数__init__(self，vertexList)，其中顶点列表包含一系列点（每个点是包含x坐标和y坐标的列表），就像编程实战6.4中描述的那样。

■■图形P10.12　实现GeometricShape类的子类Polygon，要求具有构造函数__init__(self)和一个方法addVertex(self，x，y)。

■■图形P10.13　实现练习P10.11中Polygon类的子类RegularPolygon。

■■图形P10.14　实现练习P10.13中RegularPolygon类的子类Diamond。

■图形P10.15　实现练习P10.11中Polygon类的子类Triangle。

■■图形P10.16　一个Group对象使用其限定盒子的左上角来创建。然而，如果增加形状时没有碰到左边界和顶部边界，真实的限定盒子可能会小很多。重新实现Group类，使得构造函数能够接收一个锚点（不需要是限定盒子的左上角）。所有增加的形状都是相对于这个锚点的。重新实现更新限定盒子左上角的add方法。主意，你不再需要在add方法中移动形状。

■■图形P10.17　重新实现10.6节中形状层次结构中的类，使得左上角不再保存在基类中，而是在每个子类中计算。

■■图形P10.18　实现10.6节中Line类的子类Arrow。其中draw方法应该绘制直线并在终点绘制箭头形状的两个短线。

■■■图形P10.19　实现10.6节中Line类的子类DashedLine。在构造函数中，分别提供用于表示破折号长度和破折号之间空隙长度的参数。

■■■图形P10.20　为GeometricShape类提供一个方法scale(factor)并为每个类实现它。该方法应该按给定的因子对形状进行缩放。例如，调用shape.scale(0.5)使得限定盒子缩小一半，并移动左上角到画布左上角的一半位置。

■■商业P10.21　修改如何做10.1中的CheckingAccount类，使得超出每月的3笔免费交易之后的存款或取款都收费1美元。把计算费用的代码放进一个独立的方法，并在deposit和withdraw方法中调用该方法。

■■商业P10.22　实现一个超类Appointment和子类Onetime、Daily以及Monthly。Appointment对象有一个描述（例如，“see the dentist”）和一个日期。编写一个方法occursOn(year，month，day)检查该日期是否有预约。例如，对于每月的预约，你必须检查是否应该发生在这一月的这一天。然后创建一个列表，保存混合类型预约的Appointment对象。让用户输入一个日期，输出该日期会发生的所有预约。

■■商业P10.23　改进练习P10.22的预约程序。为用户提供增加新预约的选项，用户必须指定预约的类型、描述和日期。

■■■商业P10.24　改进练习P10.22和P10.23中的预约程序，允许用户把预约日期保存到一个文件并能够从文件中加载数据。保存部分是直观的：编写一个方法save，把预约的类型、描述和日期保存到一个文件。加载部分不是很容易。首先确定要加载的预约的类型，创建那个类型的一个对象，然后调用load方法来加载数据。

■■■科学P10.25　在这个问题中，你会模拟一个包含任意配置的电阻的电路。提供一个具有方法getResistance的超类Circuit。提供一个表示单个电阻的Resistor子类，以及分别包含一系列Circuit对象的子类Serial和Parallel。其中Serial电路模拟一个串联电路，其中每个电路可以是单个电阻或另一个电路。类似地，Parallel电路模拟一组并联电路。例如，下面的电路是一个包含单个电阻和一个Serial电路的Parallel电路：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07580.jpeg)

使用欧姆定律计算组合的电阻值。

■■科学P10.26　下图中的（a）部分显示了一个叫作放大器的电路的符号表示。放大器的输入是电压vi，输出是电压vo。放大器的输出与输入成比例，而这个比例常数叫作放大器的增益。

（b）、（c）和（d）部分显示了三种特定类型放大器的原理图：反相放大器、同相放大器和电压放大器。这三个放大器的每一个都包含两个电阻器和一个运算放大器。每个放大器的增益依赖于各自电阻器的值。特别地，反相放大器的增益g由![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07581.jpeg)给出。类似地，同相放大器和电压放大器的增益分别由![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07582.jpeg)给出。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07583.jpeg)

编写一个Python程序，把放大器表示为超类，把反相放大器、同相放大器和电压放大器表示为子类。为子类提供两个方法，一个是getGain，一个是返回表示放大器的字符串的getDescription方法。每个子类应该有一个构造函数接收两个参数表示放大器电阻值。

子类需要覆盖超类的getGain和getDescription方法。

提供一个类演示这些子类对于给定的电阻值都能工作正常。

■■科学P10.27　谐振电路用来从其他竞争信号中选择一个（例如，一个电台或电视频道）。谐振电路通过下图显示的频率响应来描述。谐振频率响应完全由三个参数来描述：谐振频率ω0、带宽B和谐振频率处的增益k。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07584.jpeg)

下图显示了两个简单的谐振电路。（a）中的电路叫作并联谐振电路，（b）中的电路叫作串联谐振电路。两个谐振电路都包含一个电阻值为R的电阻器，一个电容值为C的电容器和一个感应系数为L的感应器。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07585.jpeg)

这些电路通过决定能够导致谐振频率响应的R、C和L值来设计，其中谐振频率响应通过指定ω0、B和k来描述。并联谐振电路的设计公式为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07586.jpeg)

类似地，串联谐振电路的设计公式为：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07587.jpeg)

编写一个Python程序，把ResonantCircuit表示为超类，而把SeriesResonant

Circuit和ParallelResonantCircuit表示为子类。为超类提供3个实例变量用来表示谐振频率响应的参数ω0、B和k。超类应该提供公开方法来获取和设置这些值中的每一个。超类应该还提供一个display方法用来输出谐振频率响应的描述。

每个子类应该提供一个方法用来设计响应的谐振电路。子类应该还覆盖超类的display方法来输出频率响应（ω0、B和k的值）和电路（R、C和L的值）的描述。

所有类都应该提供合适的构造函数。

提供一个程序演示这些子类都能正常工作。

自测题答案

1.因为每个经理都是员工，但反过来则不成立，Manager类更加专用一些。Manager是子类，而Employee是超类。

2.CheckingAccount和SavingsAccount都继承自更通用的类BankAccount。

3.StandardError，Exception

4.Vehicle，truck，motorcycle

5.不应该。一个测验不是问题，它包含问题。

6.a，b，d

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07588.jpeg)

8.a，b，c

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07589.jpeg)

14.

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07590.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07591.jpeg)

16.这个方法不允许访问超类中的实例变量_text。

17.self引用的类型是ChoiceQuestion。因此，ChoiceQuestion的display方法被选择，这个方法调用它自己。

18.因为没有歧义，子类中没有setAnswer方法。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07592.jpeg)

21.抛出AttributeError异常，因为Base类没有定义op3方法。

22.输出SubA。

23.输出

![](../Images/image07593.gif)

24.语句self.op2()会导致递归调用这个方法自己，永不停止。

25.会抛出TypeError异常，因为SubB类中的op2方法的定义需要一个参数，但是op1方法中的调用并没有提供参数。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07594.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07595.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07596.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07597.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07598.jpeg)