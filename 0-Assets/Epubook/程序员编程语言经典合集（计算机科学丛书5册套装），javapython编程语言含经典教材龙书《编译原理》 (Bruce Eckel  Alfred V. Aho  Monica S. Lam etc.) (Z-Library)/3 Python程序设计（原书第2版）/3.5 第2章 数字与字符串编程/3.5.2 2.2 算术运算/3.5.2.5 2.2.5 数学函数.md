   

### 2.2.5　数学函数

Python语言本身是很简单的，但是Python包含了一个用来创建功能强大的程序的标准库。库是别人写好的一些代码集合，你在程序中可以直接使用。标准库被认为是语言的一部分，并且必须包含在任何Python系统中。

Python的标准库被组织为模块，相关的函数和数据类型被分组封装进同一个模块。模块中的函数必须在使用之前显式地导入你的程序。Python的math模块包含了大量的数学函数。要使用该模块中的任何函数，需要先导入该函数。例如，要使用计算参数平方根的函数sqrt，首先在程序文件的顶部包含下面的语句：

![](../Images/image05311.gif)

然后你就可以像下面这样调用这个函数

![](../Images/image05312.gif)

表2-5列出了math模块中定义的更多函数。表2-6是数学表达式的示例。

表2-5　math模块中的常用函数

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05313.jpeg)

表2-6　数学表达式示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05314.jpeg)

尽管大多数函数定义在模块中，有一小部分函数（例如print和上一节介绍的函数）可以不需要导入任何模块而直接使用。这些函数称作内置函数，因为这些函数被定义为语言本身的一部分，并且可以在你的程序中直接使用。

自测题

8.一个银行账户每年计算一次利息。在Python中如何计算第一年的利息？假设变量percent和balance都包含浮点数。

9.假设一个正方形的面积保存在变量area中，在Python中，你如何计算这个正方形的边长？

10.球的体积计算公式为

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05315.jpeg)

如果半径通过包含浮点数的变量radius给出，写一个计算体积的Python表达式。

11.1729//10和1729%10的值分别是什么？

12.如果n是一个正整数，(n//10)%10的值是什么？

练习它　现在你可以尝试本章最后的练习：R2.3，R2.5，P2.3，P2.4。

常见错误2.2　舍入错误

舍入错误是计算浮点数时不可避免的问题。你可能已经在手工计算时遇到了那样的现象。如果你计算1/3并保留2位小数会得到0.33，再把结果乘以3得到0.99而不是1.0。

在处理器硬件中，数字都使用二进制数字系统表示，只使用0和1。对于小数而言，当二进制数字丢失时你就会得到舍入错误。它们会在意料之外的地方犯错误。

下面是一个例子：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05316.jpeg)

在二进制系统中，没法精确表示4.35，就像没法在十进制系统中精确表示1/3一样。计算机使用的表示比4.35略小一点点，所以那个值的100倍也比435略小一点点。

你可以通过四舍五入得到最接近的整数或者在小数点后面显示固定位数的数字来处理舍入错误（见2.5.3节）。

常见错误2.3　不闭合的括号

考虑表达式

![](../Images/image05317.gif)

有什么错误？数一数括号，有3个“(”和2个“)”，括号是不闭合的。这种拼写错误在编写复杂表达式时非常常见。现在考虑这个表达式，

![](../Images/image05318.gif)

这个表达式有3个“(”和3个“)”，但仍然是不正确的。在表达式中间，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05319.jpeg)

只有1个左括号“(”但是有2个右括号“)”，这是错误的。在表达式的任意位置，“(”的数量都必须大于或等于“)”的数量，在表达式的最后这两个符号的数量必须是相同的。

下面给出一个很容易数数的小技巧，不需要铅笔和纸。很难同时记住两个数字。在扫描表达式时只需要记住一个数字。在遇到第一个左括号时从1开始计数，再次遇到左括号时加1，遇到右括号时减1。扫描表达式时大声说出那些数字。如果在扫描过程中得到比0小的数，或者最后不是0，就可以断定括号是不闭合的。例如，扫描前面的表达式时，你会小声嘀咕

![](../Images/image05320.gif)

这样你就可以发现错误了。

编程小提示2.3　在表达式中使用空格

![](../Images/image05321.gif)

要比

![](../Images/image05322.gif)

更容易阅读。只需要简单地在所有运算符（+-*/%=等）两侧增加空格即可。然而，不要在一元减号后面增加空格：也就是用来表示单个数量负数的情况，例如-b。这样的话，就很容易和二元减法区分，例如a-b。

习惯上也不在函数名字后面增加空格，也就是说，要写sqrt(x)而不是sqrt(x)。

专题2.1　导入模块的其他方式

Python提供了多种方法可以从模块中把函数导入到程序中。你可以像下面这样从同一个模块中导入多个函数：

![](../Images/image05323.gif)

你也可以把一个模块中的全部内容导入到你的程序中：

![](../Images/image05324.gif)

另外，你可以使用下面的语句导入模块：

![](../Images/image05325.gif)

使用这种形式的import语句，你需要在每次调用函数时都在前面加上模块名字和一个圆点，就像：

![](../Images/image05326.gif)

一些程序员喜欢这种方式，因为可以很清晰地知道一个特定的函数属于哪个模块。

专题2.2　复合赋值和算术运算

在Python中，你可以复合算术运算和赋值，例如，指令

![](../Images/image05327.gif)

是

![](../Images/image05328.gif)

的缩写形式。同样，

![](../Images/image05329.gif)

是

![](../Images/image05330.gif)

的另一种形式。很多程序员发现这种形式在编写加1或减1语句时非常方便：

![](../Images/image05331.gif)

如果你喜欢，就大胆地在你的代码中使用这种形式。不过，为了简单，本书中没有使用这种形式。

专题2.3　续行

如果你有一个表达式太长而无法在单行内写完，可以在下一行继续（在括号内换行）。例如，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05332.jpeg)

然而，如果你省略了最外层的括号，会得到错误：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05333.jpeg)

第一行是Python解释器处理的一个完整语句。而下一行，/(2*a)本身没有任何意义。

连接多行还有另一种形式。如果一行的最后一个字符是反斜线，这一行会和紧接的下一行连接到一起：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05334.jpeg)

一定要注意不要在反斜线后面写任何空格或制表符。在本书中，我们只使用第一种连接多行的形式。