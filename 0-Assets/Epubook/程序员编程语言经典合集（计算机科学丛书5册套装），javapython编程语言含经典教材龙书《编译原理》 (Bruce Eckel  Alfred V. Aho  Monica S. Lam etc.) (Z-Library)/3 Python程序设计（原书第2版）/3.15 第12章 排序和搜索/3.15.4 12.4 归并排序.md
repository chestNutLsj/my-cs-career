   

## 12.4　归并排序

在本节中，你会学到归并排序，一种比选择排序的效率高很多的算法。归并排序背后的理论非常简单。

假设我们有一个包含10个整数的列表。我们考虑得理想化一些，希望这个列表的前后两部分都是分别排好序的，就像：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07765.jpeg)

现在把两个排好序的列表合并为一个是很简单的，每次从第一个或者第二个子列表中选择一个最小的即可：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07766.jpeg)

实际上，如果你和一个朋友必须要对一堆文件进行排序的话，你可能已经使用过这个合并操作了。你和朋友把这堆文件对半分开，每人负责对自己的一半进行排序，然后再把两部分合并到一起。

那看起来是很好的，但是对于计算机而言好像并没有解决问题。计算机仍然必须对列表的前后两半进行排序，因为它不能找几个闺蜜来帮忙。然而已经证明，如果计算机持续把列表分成越来越小的子列表，对每一半进行排序再把结果合并起来，这样执行的步骤要比选择排序需要的步骤少很多。

我们来写一个实现这个想法的mergesort.py模块。mergeSort函数对一个列表进行排序时，把原始列表分成两半，再对两半递归进行排序。然后把两个排好序的列表合并到一起：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07767.jpeg)

mergeList函数有点长，不过还是很直观的。下面是对应的代码。

ch12/sec04/mergesort.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07768.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07769.jpeg)

ch12/sec04/mergedemo.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07770.jpeg)

![](../Images/image07771.gif)

程序运行结果

![](../Images/image07772.gif)

自测题

13.为什么mergeLists函数中最后的两个while循环只有一个会执行？

14.使用列表8 7 6 5 4 3 2 1，手工执行归并排序算法。

15.归并排序算法通过递归处理两半来处理一个列表。描述一个类似的递归算法用来计算列表中所有元素之和。

练习它　现在你可以尝试本章最后的练习：R12.11，P12.3，P12.16。