   

## 1.7　问题解决：算法设计

你很快就会学到如何使用Python编写程序实现计算和决策，但是在我们关注下一章实现计算的机制之前，先考虑一下你应该如何描述问题求解步骤。

你可能会发付费广告来寻找最佳搭档，想象一下它可能的工作方式，你填写表格并提交，其他人也是这样，然后数据由计算机程序来处理。计算机可能会执行任务并为你寻找最佳搭档吗？

假设是你的兄弟而不是计算机拿到了所有的表格，你可以给他什么指令？你可能会说：“把喜欢轮滑和上网的人当中最好看的找出来。”是否好看并没有客观的标准，你兄弟的审美观（或者分析电子照片的程序的审美观）可能和你的并不一样。如果你不能为某人给出写好的程序解决这个问题，那么计算机就没有办法魔法般地给出准确答案。计算机只能做你让它做的事，只不过可以做得更快一些，并且永远不知疲倦。基于这个原因，计算机匹配服务无法保证能够为你查找到最优匹配。

可以把寻找伙伴的问题与下面的问题进行比较：

你把10 000美元存入银行，每年可以获得5%的收益，那么多少年后钱可以翻倍？

你能手工解决这个问题吗？当然可以，就像下面这样计算账目：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05211.jpeg)

你可以一直计算，直到账目上拥有20 000美元，年份栏目上的最后一个数字就是这个问题的答案。

当然，执行这样的计算对于你和你兄弟都是一件很无聊的事。但是计算机可以非常快速并且无差错地执行这样重复的计算。对于计算机而言，最重要的是准确描述问题求解的步骤，每个步骤都必须是明确的、没有歧义的，不能让计算机去猜测你到底想做什么。下面给出了这个问题的描述：

设置year的值为0，一个interest列，balance为10 000美元。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05212.jpeg)

当balance小于20 000美元时重复下面的步骤

　把year的值增加1。

　计算，把balance x 0.05作为interest（也就是5%的收益）。

　把interest增加到balance。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05213.jpeg)

报告最终year的值作为答案。

当然，这些步骤并不是使用计算机能够理解的语言描述的，但是你很快就会学到如何使用Python表达这些步骤。上面的非正式的描述称为伪代码。

对于伪代码并没有严格的要求，因为是用来方便人类阅读的，而不是计算机程序。下面是我们会在本书中使用的伪代码种类：

·使用下面的语句描述如何赋值或修改：

![](../Images/image05214.gif)

·你可以像下面这样描述分支或重复：

![](../Images/image05215.gif)

·使用缩进来表示哪些语句应该被选择或重复：

![](../Images/image05216.gif)

这里使用缩进表示对于每个汽车都应该执行两条语句。

·使用下面的语句表示结果：

![](../Images/image05217.gif)

具体用什么词并不重要，重要的是伪代码描述的一系列步骤应该具有下面的特点：

·无歧义

·可执行

·可结束

当有了精确的指令描述每一步应该做什么和下一步应该做什么的时候，伪代码的步骤序列必须是无歧义的，不应该有猜测或个人发挥的空间。一个步骤在实际操作时必须是可执行的。如果我们说了使用未来几年的实际利率而不是固定的每年5%，上面的步骤就应该无法执行，因为没有人知道实际的利率将会是什么。一系列步骤如果最终会到达一个终点则是可结束的。在我们的案例中，需要深入思考一下才会发现这个序列不会一直执行：每一步收益至少为500美元，所以最终会达到20 000美元。

无歧义、可执行并且可结束的一系列步骤称为算法。我们已经发现了解决投资问题的算法，接下来就可以找到可编程的解决方案。算法是编程必要的前提条件，你需要在开始编程之前首先找到一个解决问题的算法并且准确地描述它（见图1-8）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05218.jpeg)

图1-8　软件开发流程

自测题

20.假设利率是20%，那么多久能够把投资翻倍？

21.假设你的电话支付29.95美元就可以拨打最多300分钟电话，超出后每分钟0.45美元，外加12.5%的税和服务费。给出一个算法来计算每月给定分钟数量的总消费。

22.思考下面用来从一系列图片中查找最感兴趣图片的伪代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05219.jpeg)

这是一个能够找到最感兴趣图片的算法吗？

23.假设自测题22中的每个图片都有一个价格标签，给出一个寻找最贵图片的算法。

24.假设你有一个黑球和白球的随机序列，现在想重新组织并使得黑球和白球放到一起。考虑下面的算法：

![](../Images/image05220.gif)

对于给定的序列○●○●●，上面的算法是如何工作的？写出直到算法结束的每个步骤。

25.假设你有一个彩色球的序列，考虑下面的伪代码：

![](../Images/image05221.gif)

这为什么不是一个算法？

练习它　现在你可以尝试本章最后的练习：R1.15，R1.17，P1.4。

如何做1.1　使用伪代码描述算法

这是本书中众多“如何做”的第一个，这些模块会给出在编写计算机程序时执行重要任务的每个步骤。

在准备使用Python编写程序之前，你需要设计一个算法——找到一个特定问题解决方案的方法。把这个算法用伪代码描述出来，也就是使用英语描述的一系列精确的步骤。

问题描述　你现在需要从两辆汽车中选择一辆购买，其中一辆比另一辆更加节能，但是也贵一些。你知道两辆汽车的价格和燃油效率（每加仑[^1]数，mpg），并且计划使用10年。假设每加仑汽油价格为4美元，每年路程为15 000英里。你支付现金购买汽车，不需要担心财务成本，购买哪一辆汽车更合算？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第1步　确定输入和输出。

我们的问题中，有这些输入：

·purchase price1和fuel efficiency1，分别表示第一辆汽车的价格和燃油效率（单位为mpg）。

·pruchase price2和fuel efficiency2，分别表示第二辆汽车的价格和燃油效率。

我们仅需要知道购买哪一辆汽车更合算，也就是预期的输出。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第2步　把问题分解为更小的任务。

对于每一辆汽车，我们需要知道使用它的总费用。我们对每辆汽车分别计算，一旦得到了每辆汽车的总费用，就可以确定购买哪一辆更合算。

每辆汽车的总费用为purchase price+operating cost。

我们假设10年内使用量和汽油价格保持固定，所以operating cost依赖于每年开车的费用。

operating cost为10×annual fuel cost。

annual fuel cost为price per gallon×annual fuel consumed。

annual fuel consumed为annual miles driven/fuel efficiency。例如，如果开车15 000英里而燃油效率为每加仑15英里，那么该汽车消耗1 000加仑汽油。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第3步　使用伪代码描述每个子任务。

在你的描述中，需要组织一下步骤，使得所有中间值在其他计算中使用之前完成计算。例如，下面的步骤要在operating cost计算完成之后：

![](../Images/image05222.gif)

下面给出了决定购买哪辆汽车的算法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05223.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第4步　通过解决问题来测试你的伪代码。

我们会使用下面的样本数据：

![](../Images/image05224.gif)

下面是第一辆汽车的费用计算过程：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05225.jpeg)

类似地，第二辆汽车的总费用为40 000美元，因此算法的输出是购买car1。

编程实战1.1　编写给地板铺瓷砖的算法

问题描述　制作一个为矩形浴室地板铺瓷砖的计划，可用瓷砖是黑色和白色的并且尺寸为4×4英寸[^3]，地板尺寸是4的倍数，单位也是英寸。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第1步　确定输入和输出。

输入是地板尺寸（长×宽），单位为英寸。输出为铺好瓷砖的地板。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第2步　把问题拆分成更小的任务。

一个很自然的子任务就是铺一行瓷砖。如果你能解决这个问题，就可以从一面墙开始一行一行地铺到另一面墙，最终解决最初的问题。

你应该怎么去铺一行瓷砖呢？从一面墙开始，如果本来是白色的就在旁边铺一块黑色的，如果是黑色的就在旁边铺一块白色的。重复这个过程，直到遇到另一面墙，一行需要width/4块瓷砖。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第3步　使用伪代码描述每一个子任务。

使用伪代码，你需要更精确地知道把瓷砖铺在哪里。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05226.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第4步　使用一个样本问题测试你的伪代码。

假设你需要在20×12平方英寸的地面上铺瓷砖。第一步是在西北角铺一块黑色瓷砖。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05227.jpeg)

接下来，交替贴4块瓷砖直到达到东面的墙。（width/4-1=20/4-1=4)

![](../Images/image05228.gif)

南面还没有铺瓷砖，定位到已完成行的开始位置，是一块黑色瓷砖，在它南面铺一块白色瓷砖。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05229.jpeg)

完成这一行。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05230.jpeg)

南面还有地方没有铺瓷砖，定位到刚完成的上一行开头位置，是白色的，在南面铺一块黑色瓷砖。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05231.jpeg)

完成这一行。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05232.jpeg)

现在整个地板都铺满了瓷砖，任务完成。

[^1]:  1加仑＝3.785 41立方分米。

[^2]:  1英里＝1 609.344米

[^3]:  1英寸＝0.025 4米。