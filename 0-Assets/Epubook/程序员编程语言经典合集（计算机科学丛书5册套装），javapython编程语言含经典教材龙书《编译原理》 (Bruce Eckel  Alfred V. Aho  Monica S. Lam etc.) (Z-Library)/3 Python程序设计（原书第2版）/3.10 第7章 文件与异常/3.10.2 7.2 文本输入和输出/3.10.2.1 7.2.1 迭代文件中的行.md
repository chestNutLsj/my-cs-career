   

### 7.2.1　迭代文件中的行

你已经知道如何一次读取文件中的一行。然而，有更简单的方式。Python可以像处理每行是一个字符串的字符串容器那样对待一个输入文件。为了从文件中读取文本行，你可以使用for循环迭代文件对象。

例如，下面的循环从文件中读取所有行并输出：

![](../Images/image06793.gif)

在每个迭代的开始，循环变量line被赋值为包含文件中下一行文本的一个字符串。在循环体内部，你简单地处理文本行即可。在上面的循环中，我们把文本行输出到终端。

然而，文件和容器之间有个关键区别。一旦文件被读取，你就不能再次迭代这个文件，除非先关闭文件并再次打开。

正如你在7.1.2节看到的，每个输入行以换行符（\n）结束。这稍微有点不幸。例如，假设我们有个包含一系列单词的输入文件，每行一个单词：

![](../Images/image06794.gif)

在输入文件的行被输出到终端时，它们会被显示成每个单词之间有个空行：

![](../Images/image06795.gif)

记住，print函数输出它们的参数到终端然后输出一个换行符另起一行。因为每行以换行符结束，第二个换行符在输出中创建一个空行。

一般地，在使用输入字符串之前必须删除换行符。第一个文本行被读入时，字符串行包含：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06796.jpeg)

为了删除换行符，对字符串应用rstrip方法：

![](../Images/image06797.gif)

得到新字符串：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06798.jpeg)

默认地，rstrip方法创建一个新字符串，删除原字符串尾部的所有空白字符（空格、制表符、换行符）。例如，如果第三个文本行的单词eggs后面跟着两个空格：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06799.jpeg)

rstrip方法会同时删除两个空格和换行符：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06800.jpeg)

为了删除字符串尾部的指定字符，你可以把包含那些字符的字符串参数传递给rstrip方法。例如，如果我们需要从字符串尾部删除一个圆点或一个问号，可以使用命令：

![](../Images/image06801.gif)

表7-1给出了更多从字符串中删除字符的字符串方法，表7-2给出了它们的用法。

表7-1　字符删除方法

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06802.jpeg)

表7-2　字符删除示例

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06803.jpeg)