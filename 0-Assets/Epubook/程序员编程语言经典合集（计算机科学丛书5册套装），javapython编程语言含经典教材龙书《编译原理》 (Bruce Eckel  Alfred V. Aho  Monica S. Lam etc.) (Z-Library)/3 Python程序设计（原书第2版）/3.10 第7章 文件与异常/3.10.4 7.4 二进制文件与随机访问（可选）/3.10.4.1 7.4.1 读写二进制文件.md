   

### 7.4.1　读写二进制文件

有两种完全不同的保存数据的方式：文本格式或者二进制格式。在文本格式中，数据项以人类可读的形式表示为字符序列。例如，在文本格式中，整数12 345保存为5个字符的序列：

![](../Images/image06905.gif)

在二进制形式中，数据项使用字节来表示。一个字节由8位组成，每一位可以是0或1。一个字节可以表示256（256=28）个值之一。为了表示更大的值，可以使用字节序列。整数通常保存为4个字节的序列。例如，整数123 456可以保存为

![](../Images/image06906.gif)

（因为123 456=64+226·256+1·2562+0·2563）。包含图像和声音的文件通常以二进制格式保存信息。二进制文件节省空间：你可以从我们的示例中看到，二进制文件保存整数时比按位存储使用更少的字节。

如果你在文本编辑器中打开一个二进制文件，你将不能正常查看其中的内容。处理二进制文件需要专门用来读写二进制数据的程序。我们会使用保存图像的二进制文件来说明处理步骤。

我们会涉及关于二进制文件的几个技术问题。为了以读模式打开一个二进制文件，使用下面的命令：

![](../Images/image06907.gif)

记住，open函数的第二个参数用来表示文件打开的模式。在这个例子中，模式字符串表示我们打开文件是为了读取其中的内容。为了以写模式打开文件，你需要使用模式字符串"wb"：

![](../Images/image06908.gif)

对于二进制文件，你不能读取文本字符串，而是独立的字节。例如，通过下面的调用读取4个字节：

![](../Images/image06909.gif)

这个函数返回的字节值保存为bytes序列类型。一个bytes序列中的元素是介于0到255之间的整数值。为了使用字节值本身，你必须使用下标运算符（就像它是保存在列表中一样）从bytes序列中将其取出：

![](../Images/image06910.gif)

如果你想读取单个字节，可以把上面的两步组合为一个操作：

![](../Images/image06911.gif)

使用write方法可以把一个或多个字节写入二进制文件。这个方法需要一个bytes序列作为参数。为了创建这个序列，你可以使用使用bytes函数并提供包含这些独立值的列表作为参数：

![](../Images/image06912.gif)