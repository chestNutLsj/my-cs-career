   

### 7.4.2　随机访问

到目前为止，你已经学会一次从文件中读取或往文件中写入一个字符串，不能往前跳或者往后跳。这个访问模式叫作顺序访问。在很多应用中，我们会需要在没有读取前面所有项的情况下直接访问特定的项。这种访问模式叫作随机访问（见图7-2），这里“随机”的意思是你可以读取和修改文件任意位置保存的任意项。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06913.jpeg)

图7-2　顺序访问和随机访问  

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06914.jpeg)

在正式晚宴上，食物是按顺序提供的。而在自助餐上，我们可以“随机访问”所有的食物。  

每个文件都有个特殊的标记用来表示文件的当前位置。这个标记用来确定下一个读写的字符串在哪里。你可以把这个文件标记移动到文件中的指定位置。为了把标记定位到相对于文件开始的位置，使用下面的方法调用：

![](../Images/image06915.gif)

你也可以把这个标记移动到相对于当前位置的某个位置。例如，向前移动4个字节，你可以使用seek方法的第二个版本，使用io模块中定义的常数SEEK_CUR作为第二个参数。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06916.jpeg)

你也可以使用负数作为第一个参数实现向后移动文件标记：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06917.jpeg)

为了确定文件标记的当前位置（从文件头部开始计算），使用

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06918.jpeg)