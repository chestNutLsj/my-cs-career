   

## 3.1　if语句

if语句用来实现选择（见语法3.1）。当条件得到满足时，一组语句被执行。否则，另一组语句被执行。

语法3.1　if语句

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05574.jpeg)

这里是一个使用if语句的例子：在很多国家，数字13被认为是不吉利的。为了避免引起迷信的租户反感，大楼的所有者在编号时有时会跳过13层，12层后直接就是14层。当然，和一些阴谋家想的不一样，13层并不是留空或者作为私人办公室和研究室，就是简单地称作14层。控制楼宇电梯的计算机需要补偿这个小癖好并且调整13层以上的所有层号。

让我们使用Python模拟这个过程。我们会要求用户输入一个楼层号，然后计算实际的楼层。当输入大于13时，我们需要把输入减1来得到实际楼层。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05575.jpeg)

电梯的面板“跳过”了13层。这一层并不是真正消失了——控制电梯的计算机调整了13层以上的所有层号

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05576.jpeg)

一个if语句就像路上的岔道口。根据选择，程序的不同部分被执行

例如，如果用户输入20，程序给出实际楼层为19。否则，我们简单地给出用户提供的楼层号。

![](../Images/image05577.gif)

图3-1的流程图显示了这个选择行为。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05578.jpeg)

图3-1　if语句流程图  

在我们的例子中，if语句的每个分支包含一个简单的语句。你可以根据需要在每个分支中包含多条语句。有时，碰巧if语句的else分支没有事情可做。在这种情况下，你可以完全省略它，例如下面的例子：

![](../Images/image05579.gif)

图3-2显示了这个流程图。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05580.jpeg)

图3-2　没有else分支的if语句的流程图  

下面的程序使得if语句真正能够工作。这个程序要求输入指定的楼层然后输出实际楼层。

ch03/sec01/elevatorsim.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05581.jpeg)

程序运行结果

![](../Images/image05582.gif)

到目前为止我们使用的Python指令都是必须在一行写完的简单语句（或者显式使用续行符——见专题2.3）。Python中也允许写复合语句，可以跨越多行，并且有一个头部和一个语句块。if语句就是复合语句的一个例子。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05583.jpeg)

复合语句要求在头部的尾部有一个冒号（：）。语句块由一个或多个语句组成，所有语句具有相同的缩进层次。一个语句块从紧跟头部的一行开始，到比该块内第一条语句缩进少的第一个语句结束。你可以在一个块内使用任意数量的空格来缩进语句，但是块内的所有语句都必须有相同的缩进层次。注意，注释不属于语句，所以可以缩进到任何层次。

语句块可以嵌套在其他块中，表示一个或多个语句是特定复合语句的一部分。对于if选择结构的情况，语句块标识了一些指令，当条件为True时会被执行，当条件为False时会被跳过。

自测题

1.在一些亚洲国家，数字14被认为是不吉利的。一些大楼的所有者为了安全会把13层和14层都跳过去。你应该如何修改样例程序来满足这样大楼的需要呢？

2.考虑下面用来计算打折价格的if语句：

![](../Images/image05584.gif)

当原始价格为95、100、105时，打折后的价格分别是多少？

3.比较下面的if语句和自测题2中的if语句：

![](../Images/image05585.gif)

这两个语句总能计算得到相同的值吗？如果不能的话，值会从什么时候开始不同？

4.考虑下面用来计算打折价格的语句：

![](../Images/image05586.gif)

如果原始价格为95、100、105，那么打折后的价格分别是多少？

5.变量fuelAmount和fuelCapacity分别保存了一个汽车的实际油量和油箱大小。如果油箱内燃油剩余低于10%，指示灯会显示红色，否则会显示绿色。模拟这个过程，输出”red”或者”green”。

练习它　现在你可以尝试本章最后的练习：R3.5，R3.6，P3.38。

常见错误3.1　Tab

块结构代码要求嵌套的语句缩进一层或多层：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05587.jpeg)

作为语法的一部分，Python要求使用块结构代码。Python程序内语句的对齐方式表明了哪些语句是给定语句块的一部分。

你如何把光标从那个左边的列移动到合适的缩进层次呢？一个非常合理的策略是单击空格键足够多次。对于大多数编辑器而言，你也可以使用Tab键。制表符移动光标到下一个缩进层次。一些编辑器甚至可以设置自动填充制表符。

尽管Tab键非常棒，一些编辑器使用制表符来实现对齐，但制表符的表现并不总是很好。Python对于语句块中的语句如何对齐非常讲究，甚至到了吹毛求疵的程度。所有语句必须要么使用空格对齐，要么使用制表符对齐，但是不能同时使用。另外，如果你发送文件给另一个人或者打印机，制表符可能会导致问题。制表符没有统一的宽度标准，甚至有些软件会忽略制表符。所以，最好在你的文件中使用空格进行对齐，而不要使用制表符。大多数编辑器都可以通过设置自动把所有制表符转换成空格。

阅读你使用的开发环境的文档，了解如何激活这个有用的设置。

编程小提示　避免分支之间的重复

检查代码并查找每个分支的代码是否存在复制造成的重复。如果有，把它移动到if语句的外面。下面是一个这样的例子：

![](../Images/image05588.gif)

两个分支里的输出语句是完全一样的。这不算是错误——程序运行完全正确。然而，你可以通过移动重复的语句来简化这个程序，就像这样：

![](../Images/image05589.gif)

如果程序需要长时间维护的话，移除重复的代码是非常重要的。如果有两套功能完全一样的语句，很容易导致程序员修改了一套而没有修改另一套。

专题3.1　条件表达式

Python有一个下面形式的条件运算符

![](../Images/image05590.gif)

当条件成立时表达式的值为value1，否则为value2。例如，我们可以使用下面的形式计算实际楼层

![](../Images/image05591.gif)

等价于

![](../Images/image05592.gif)

注意，一个条件表达式是必须包含单行或使用续行符的单个语句（见专题2.3）。同时也要注意，不需要使用冒号，因为条件表达式不是复合语句。

你可以在需要一个值的任何地方使用条件表达式，例如：

![](../Images/image05593.gif)

我们在本书中不使用条件表达式，但是它是一个非常方便实用的结构，你会在一些Python程序中见到。