   

## 3.6　问题解决：测试用例

考虑一下如何测试3.3节的税收计算程序。当然，你不可能尝试婚姻状况和收入水平所有可能的输入。即使你可以做到这一点，也没有意义。如果程序对于某个给定区间内的一个或两个税额计算是正确的，我们就有足够的理由相信这个区间内的所有税额都可以正确计算。

你的目标应该是完全覆盖所有的判定点。下面是一个可以获得足够多测试用例集合的设计方案：

·婚姻状况有两种可能，每种婚姻状况又有两个税收区间，可以得到4个测试用例。

·测试足够多的边界条件，例如收入水平位于两个税收区间之间的边界，以及0收入。

·如果你还负责错误检查（这部分内容会在3.9节进行讨论），也需要测试非法输入，例如收入为负数。

列出测试用例和预期的输出：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05698.jpeg)

在设计测试用例时，程序的流程图（见3.5节）非常有用。检查具有测试用例的每个分支。一定要注意包含每个判定的边界条件的测试用例。例如，如果一个判定检查输入是否小于100，就使用100作为输入测试一下。

在开始写代码之前就设计测试用例总是个非常好的主意，设计和完成测试用例可以帮助你更加理解将要实现的算法。

自测题

27.使用文中的图3-1作为指导，按照3.6节描述的过程，为3.1节的elevatorsim.py程序设计一组测试用例。

28.对于如何做3.1中的算法，边界测试用例是什么？预期输出是什么？

29.使用文中的图3-4作为指导，按照3.6节描述的过程，为3.4节的earthquake.py程序设计一组测试用例。

30.假设你正在设计一个医用机器人程序的一部分，这个机器人带有一个可以返回（x，y）位置（以厘米为单位）的传感器。你需要检查传感器的位置是在圆内、圆外、还是在圆周上（具体地说，与圆周的距离小于1毫米）。

假设圆心位置为（0，0），半径为2厘米。给出一组测试用例。

练习它　你现在可以尝试本章最后的练习：R3.15，R3.16。

编程小提示3.3　制定进度表，腾出时间处理意料之外的问题

商业软件因为交付时间比承诺的晚而变得臭名昭著。例如，微软公司最初承诺Windows Vista操作系统将于2003年末上市，后来推迟到2005年，又推迟到2006年3月，最终于2007年1月发布。早期的一些承诺是不可能实现的。让那些可能的客户期待这个马上就可以用上的产品，这也是微软乐见其成的。如果客户知道了真实的交付日期，他们可能会立刻转向其他的产品而不再等待。然而，不可否认的是，微软最初也没有预见到要解决的任务的全部复杂性。

微软可以延迟交付它的产品，但是你不能。作为学生或者程序员，你必须明智地管理自己的时间来保证按时完成你的任务。在交付日期的头一天晚上你可能会做一些简单的编程练习，但是看上去两倍难度的任务很可能需要四倍长的时间来完成，因为很多事情会出现错误。所以，你必须在启动一个编程项目之前就制定一个计划表。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05699.jpeg)

为你的编程工作制定计划表，并且把用来解决问题的时间也考虑进去

首先，切合实际地估计一下完成下面的任务需要多长时间：

·设计程序逻辑。

·设计测试用例。

·输入程序并修改语法错误。

·测试和调试程序。

例如，对于税收计算程序，我可能会估计1个小时用来设计程序逻辑，30分钟用来设计测试用例，1个小时用来输入数据和修改语法错误，1个小时用来测试和调试。也就是说一共需要3.5小时。如果我每天在这个项目上花费2个小时，大概需要2天的时间。

然后考虑可能会出错的事情。你的计算机可能会出故障，你可能会被计算机系统的一个问题缠住。（这对初学者尤其需要考虑，有时候在一个小事上浪费一天的时间是很常见的。）作为首要原则，把估计的时间翻倍。也就是说，你应该在交付日期之前4天就启动项目，而不是2天。如果没有事情出错，那么恭喜你提前2天完成了程序。如果发生了不可避免的问题，你也有个缓冲的时间可以避免尴尬和失败。