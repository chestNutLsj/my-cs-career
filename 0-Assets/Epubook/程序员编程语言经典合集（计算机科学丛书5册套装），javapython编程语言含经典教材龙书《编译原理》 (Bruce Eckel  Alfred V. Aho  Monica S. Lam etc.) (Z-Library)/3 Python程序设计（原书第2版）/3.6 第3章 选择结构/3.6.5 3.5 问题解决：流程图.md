   

## 3.5　问题解决：流程图

在本章前面的部分你已经见过流程图的例子。流程图显示了决策的结构和解决问题需要完成的任务。在需要解决复杂问题时，画个流程图把控制流可视化地展示出来是个很好的主意。图3-5给出了基本的流程图元素。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05687.jpeg)

图3-5　流程图元素

基本的想法是非常简单的。按照预期执行的顺序连接任务和输入/输出模块，需要做出决定时就画一个带有两个输出的菱形（见图3-6）。

每个分支都可以包含一系列任务，甚至可以包含另外的决策。如果一个值有多个选择，可以像图3-7那样布局。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05688.jpeg)

图3-6　带有两个输出的流程图

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05689.jpeg)

图3-7　带有多个选择的流程图

在画流程图时有一个问题必须要注意到，随意的分支和合并会导致“面条式代码”，在程序可能的路径之间形成了凌乱的网络。

有一个简单的原则可以避免面条式代码：永远不要把箭头指向另一个分支内部。

为了理解这个原则，考虑这样的例子：在美国运费价格是5美元，特例是在夏威夷和阿拉斯加价格是10美元，国际运费价格也是10美元。

你可能会画出下面这样的流程图：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05690.jpeg)

现在你可能会尝试重复使用“shipping cost=$10”这个任务：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05691.jpeg)

千万不要做这样的尝试！红色箭头指向了不同分支的内部。相反，可以增加另外一个设置shipping cost为10美元的任务，例如：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05692.jpeg)

这样你不仅可以避免面条式代码，同时也是一个比较好的设计。以后很可能会发生这样的情况，国际运费价格与夏威夷和阿拉斯加不同。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05693.jpeg)

面条代码具有超级多的路径，以至于完全无法理解

流程图对于直观理解算法的流程非常有帮助。然而，当增加细节时流程图会迅速膨胀。那时，从流程图切换至伪代码就很有意义了。

下面给出了计算运费价格的完整程序。

Ch03/sec05/shipping.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05694.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05695.jpeg)

程序运行结果

![](../Images/image05696.gif)

自测题

22.绘制程序的流程图，读取一个值temp，如果temp小于0就输出“Frozen”。

23.右边的流程图有什么错误？

24.你如何修改自测题23中的流程图？

25.绘制程序的流程图，读取一个值x，如果x小于0就输出“Error”，否则就输出它的平方根。

26.绘制程序的流程图，读取一个值temp，如果temp小于0就输出“Ice”，如果temp大于100就输出“Steam”，否则就输出“Liquid”。

练习它　现在你可以尝试本章最后的练习：R3.12，R3.13，R3.14。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05697.jpeg)