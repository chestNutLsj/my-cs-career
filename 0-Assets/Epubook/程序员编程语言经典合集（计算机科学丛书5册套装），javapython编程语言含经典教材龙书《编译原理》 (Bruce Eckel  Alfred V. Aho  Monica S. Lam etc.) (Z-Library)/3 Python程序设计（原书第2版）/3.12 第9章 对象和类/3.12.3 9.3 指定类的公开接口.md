   

## 9.3　指定类的公开接口

设计一个类时，你需要为其指定公开接口。一个类的公开接口包括该类用户可能想应用于该对象的所有方法。

我们考虑一个简单的例子。我们想使用模拟出纳机的对象。收银员按下一个键来开始销售，并把每件物品的欠款计入收款机。有个显示器会显示应收金额和购买物品的总数。

在我们的模拟中，我们想在出纳机对象上调用下面的方法：

·增加一个物品的价格。

·获取应收总金额和购买物品的数量。

·将出纳机清零并开始一笔新的交易。

下面是CashRegister类的框架，我们为所有方法提供了注释来描述它们的作用。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07226.jpeg)

这些方法定义和注释构成了该类的公开接口，数据和方法体构成了该类的私有实现。

为了查看一个可操作的方法，我们首先需要创建一个对象：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07227.jpeg)

这个语句定义了register1变量并使用一个新的CashRegister对象的引用对其进行初始化——见图9-3。（我们会在9.5节讨论对象创建的过程并在9.10节讨论对象引用。）

一旦对象被创建，我们就可以调用方法了：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07228.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07229.jpeg)

图9-3　对象引用和对象

查看类的公开接口时，把这些方法分类为修改器和访问器是有帮助的。修改器方法会修改它操作的对象。CashRegister类有两个修改器：addItem和clear。调用这些方法的任何一个，对象都会被改变。你可以通过调用getTotal或者getCount方法来观察发生的改变。

访问器方法查询对象的某些信息而不会修改它。CashRegister类有两个访问器：getTotal和getCount。对CashRegister对象使用这些方法中的任何一个都是简单地返回一个值，而不是修改这个对象。例如，下面的语句输出当前的总数和数量：

![](../Images/image07230.gif)

现在我们知道一个CashRegister对象可以做什么，但是不知道它是如何做的。当然，在我们的程序中使用CashRegister对象时，我们也不需要知道这些。

在接下来的几节中，你会看到CashRegister类是如何实现的。

自测题

9.下面的代码片段输出什么？

![](../Images/image07231.gif)

10.下面的代码片段有什么错误？

![](../Images/image07232.gif)

11.编写CashRegister类的方法getDollars的头部和注释，该方法用来给出销售的总金额，只要美元部分不要美分。

12.说出str类的两个访问器方法。

13.file类的readline方法是访问器还是修改器？

14.自测题11中的getDollars方法是访问器还是修改器？

练习它　现在你可以尝试本章最后的练习：R9.2，R9.7。