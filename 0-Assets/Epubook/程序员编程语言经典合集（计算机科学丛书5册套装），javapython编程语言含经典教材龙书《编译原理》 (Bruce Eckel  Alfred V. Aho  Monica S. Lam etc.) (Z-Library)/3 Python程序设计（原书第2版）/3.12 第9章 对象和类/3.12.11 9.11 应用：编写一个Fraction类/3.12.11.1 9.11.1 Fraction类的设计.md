   

### 9.11.1　Fraction类的设计

就像9.3学到的那样，设计一个类的第一步是指定它的公开接口。我们想像使用整数和浮点数那样使用我们的有理数。这样的话，我们的Fraction类必须执行下面的操作：

·创建一个有理数。

·分别访问分子和分母的值。

·确定有理数是否为负数或0。

·对两个有理数执行正常的算术运算（加、减、乘、除、求幂）。

·逻辑比较两个有理数。

·生成有理数的字符串表达形式。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07363.jpeg)

1/6 + 1/3是多少？是1/6 + 2/6 = 3/6 = 1/2。Fraction类的add方法也会执行这个计算  

Fraction类的对象必须是不可变的，因为没有操作会修改对象的实例变量。这类似于Python使用的不可变类型int和float。

指定这些操作之后，我们需要确定在Fraction对象中必须保存什么数据。因为一个有理数包含两个整数，我们需要两个实例变量来存储那些值：

![](../Images/image07364.gif)

任何时候有理数都不应该转换为浮点数，否则就丢失使用有理数能够获得的精度。所有操作都可以使用分子和分母这两个整数值来完成。

等于0的有理数可以表示为多个不同的分数——明确地说，分子为0而分母不为0的任何有理数。

负有理数和正有理数都有两种表示对应值的形式。正数可以像1/2或者-1/-2这样表示，而负数可以像-2/5或者2/-5这样表示。当对两个有理数执行算术运算或者逻辑比较时，如果我们使用唯一形式表示负数就会容易得多。为了简单，在有理数为负数时我们选择只把分子设置为负数值，而当有理数为正数时分子和分母都使用正整数。

最后，有理数可以被写成多种形式。例如，1/4可以被写作1/4、2/8、16/64或者123/492。当对两个有理数进行逻辑比较时，或者要生成一个有理数的字符串表示形式时，如果数字使用简化形式来存储就会很容易执行这个操作。