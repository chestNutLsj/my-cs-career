   

### 9.11.4　算术运算

可以对Fraction对象执行的所有算术运算都应该返回一个新的Fraction对象作为结果。例如，当下面语句被执行时：

![](../Images/image07376.gif)

应该是frac1和frac2相加，返回的新Fraction对象被赋值给newFrac变量。

我们从加法开始，这要求我们实现特殊方法__add__：

![](../Images/image07377.gif)

根据初等数学，你知道两个分数必须具有共同的分母才能相加。如果不具有共同的分母，我们可以使用下面的公式对它们相加：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07378.jpeg)

在Python代码中，分子和分母可以使用self和rhsValue引用的对象的实例变量来计算：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07379.jpeg)

计算完分子和分母之后我们必须根据这些值创建并返回一个新的Fraction对象：

![](../Images/image07380.gif)

我们不需要担心把加法返回的有理数转换为约分形式，因为这在创建新对象时构造函数会处理的。

下面给出了完整的加法方法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07381.jpeg)

两个有理数的减法和加法非常类似：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07382.jpeg)

其他算术运算的实现留作练习。