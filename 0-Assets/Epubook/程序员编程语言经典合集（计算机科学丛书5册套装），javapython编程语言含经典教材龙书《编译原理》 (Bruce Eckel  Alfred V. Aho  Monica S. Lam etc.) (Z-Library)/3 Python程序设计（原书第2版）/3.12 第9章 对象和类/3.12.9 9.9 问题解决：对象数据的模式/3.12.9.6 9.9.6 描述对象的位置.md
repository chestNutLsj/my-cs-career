   

### 9.9.6　描述对象的位置

一些对象在它们的生命周期中四处移动，并且会记住它们的当前位置。例如，

·火车会沿轨道行驶并跟踪到终点的距离。

·模拟生活在网格上的虫子会从一个网格位置爬到另一个，或者向左或向右转90度。

·炮弹被射向空中，然后由于重力的作用而下降。

这样的对象需要存储它们的位置。取决于它们运动的本质，可能还需要保存它们的方向或速度。

如果对象沿直线运动，你可以使用到一个固定位置的距离来表示位置。

![](../Images/image07332.gif)

如果对象在网格中移动，需要记住在网格中的当前位置和方向：

![](../Images/image07333.gif)

当建模炮弹这样的物理对象时，你需要跟踪位置和速度，可能使用二维或三维坐标系。这里我们模拟一个垂直向上射向空中的炮弹，所以我们只需要跟踪它的高度，而不需要x方向或y方向的位置。（不要尝试在家里这样做。）

![](../Images/image07334.gif)

还会有些更新位置的方法。在最简单的情况中，你可能被告知对象移动了多少：

![](../Images/image07335.gif)

如果是在网格内移动，你需要更新行和列，这依赖于当前的方向：

![](../Images/image07336.gif)

练习P9.28显示了如何使用已知的速度来更新一个物理对象的位置。

移动对象时，记住你的程序是通过某种方式来模拟真实的移动。确定那个模拟的规则，例如沿直线移动或在整数坐标的网格内移动。那些规则决定了如何表示当前位置。然后定位移动对象的方法，根据模拟的规则来更新位置。

自测题

35.假设你想统计一个银行账号在一个结算周期内交易的次数，我们为BankAccount类增加了一个计数器：

![](../Images/image07337.gif)

这个计数器需要在哪个方法中进行更新？

36.在9.9.3节的例子中，为什么需要add方法？也就是说，为什么Question对象的用户不能只调用list类的append方法？

37.假设我们想改进9.6节中的CashRegister类，为打印收据而跟踪所有购买物品的价格。你应该提供哪个实例变量？应该修改哪个方法？

38.考虑具有表示税号和工资的属性的Employee类。这些属性中的哪个应该只有获取方法，哪个应该同时具有访问器方法和修改器方法？

39.9.9.6节中虫子的那个例子中的实例变量direction，属于哪种模式的应用？

练习它　现在你可以尝试本章最后的练习：P9.6，P9.7，P9.12。

计算与社会9.1　电子投票机

2000年美国总统选举时，使用大量机器统计选票。有些机器处理纸板选票，投票人在纸板选票上打孔表示它们的选择（见右图）。投票人如果不仔细的话，有的纸屑会粘在穿孔卡片上，导致选票计数错误。这样的话就有必要进行人工复核，但是由于时间限制和流程的争论，并不是每个地方都这样做了。选举结束之后，很多人脑子里都有个疑问，如果选票机精确计数投票人的意愿，选举结果会不会不一样呢？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07338.jpeg)

打孔卡片选票

随后，投票机生产商声称电子投票机可以避免打孔卡片或光学扫描导致的问题。在电子投票机上，投票人通过按下按钮或者触摸计算机屏幕上的图标来表示自己的选择。通常，每个投票人被提供一个概略屏幕用于在投票之前浏览。这个过程非常类似于银行的自动柜员机。

看上去这些机器似乎真的可以使得选票按投票人的意愿进行计数。然而，围绕某些类型的电子投票机曾经有过大规模辩论。如果一个机器简单地记录选票并在选举结束后输出总数，那么你怎么知道机器是正确工作的呢？在机器内部是一个执行程序的计算机，而众所周知，是程序就有可能存在bug。

实际上，一些电子投票机确实存在bug。已经有孤立的事件其中机器报告了不可能的计数。当机器报告了超过或超少的选票时，很明显它工作不正常了。不幸的是，这时候已经无法知道真实的选票数据。随着时间的流逝，有人会期望软件中的这些bug得到修复。更加可怕的是，如果结果看上去很真实，就不会有人去调查了。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07339.jpeg)

触摸屏投票机

很多计算机科学家已经针对这个问题发表了看法，并且已经确认以目前的技术是不可能设计出没有错误的和不受影响的软件的。他们当中有很多人建议电子投票机应该采用一个投票人可验证的审计跟踪机制。（一个好的信息源是[http://verifiedvoting.org](http://verifiedvoting.org)。）

通常，投票人可验证的机器输出一个投票结果。每个投票人都有机会检查这个输出，然后把它放到旧式投票箱中。如果电子设备有问题，可以扫描这个输出或者人工统计。

在本书还在编写时，这个概念同时被电子投票机生产商和他们的客户（使用选举制度的市民和国家）所坚持。生产商不愿意增加机器的成本，因为他们不可能把这个增加的成本转嫁给客户，毕竟他们的预算也很紧张。选举的官员们也很担心工作不正常的打印机带来的问题，并且他们当中有些人已经公开声称他们实际上更倾向于可以消除烦人的重新计数的设备。

你怎么想呢？你可能使用银行的自动柜员机从你的银行账号里取钱。你会复核机器打印的纸质记录吗？你会检查你的银行结算单吗？即使你不看，你会信任那些检查两遍余额以确保银行不会进行欺骗而侥幸逃脱的人吗？

银行设备和投票机相比，哪个诚实性更重要呢？不是每个投票过程都有出错的可能吗？设备、纸张和员工工作时间等方面成本的增加足以消除潜在的工作不正常和欺骗的危险吗？计算机科学家无法回答这些问题——了解情况的社会必须做这个决定。但是，和所有专家一样，他们有责任说出真相，并且给出计算机设备的能力和限制等方面的精确声明。