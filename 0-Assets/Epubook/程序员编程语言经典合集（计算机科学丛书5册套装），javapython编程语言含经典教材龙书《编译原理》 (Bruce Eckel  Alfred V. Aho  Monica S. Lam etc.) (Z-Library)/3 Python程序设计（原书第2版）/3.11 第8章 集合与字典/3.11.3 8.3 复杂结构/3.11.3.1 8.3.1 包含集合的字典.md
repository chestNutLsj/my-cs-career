   

### 8.3.1　包含集合的字典

书的索引说明了每个条目出现在哪一页。假设你的任务是根据页码和条目构建一本书的索引，这些信息保存在一个文本文件中，格式如下：

![](../Images/image07148.gif)

文件中给出了要包含在索引中的每个条目的每次出现以及出现的页。构建索引时，如果某个条目在同一页上出现多于一次，索引就只包含一次这个页码。

程序输出应该是一个列表，包括按字母顺序的条目，以及该条目出现的页码（使用逗号分隔），就像：

![](../Images/image07149.gif)

什么类型的容器或结构会适合这个问题呢？

最实用的是包含集合的字典。每个键可以是一个条目，对应的值是一个包含该条目出现页码的集合（见图8-11）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07150.jpeg)

图8-11　用于创建索引的包含集合的字典

使用这个结构确保我们能够满足几个需求：

·索引中的条目必须是唯一的。把每个条目作为字典的一个键，每个条目就只会有一个实例。

·索引清单必须按条目的字母顺序提供。我们可以按排序的顺序迭代字典的键来输出这个清单。

·对于一个条目而言，重复的页码应该只包含一次。把每个页码添加到集合，我们可以确保不会增加重复的页码。

下面给出了解决这个问题的完整解决方案：

ch08/sec03/buildindex.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07151.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07152.jpeg)