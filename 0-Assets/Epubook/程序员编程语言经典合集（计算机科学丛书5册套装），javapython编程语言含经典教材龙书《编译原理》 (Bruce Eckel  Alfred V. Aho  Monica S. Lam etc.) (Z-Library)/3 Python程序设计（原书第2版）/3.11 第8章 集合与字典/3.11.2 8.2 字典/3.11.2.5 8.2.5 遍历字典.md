   

### 8.2.5　遍历字典

你可以使用for循环遍历字典中独立的键：

![](../Images/image07121.gif)

上面代码片段的结果如下所示：

![](../Images/image07122.gif)

注意，为了提高效率，字典使用优化后的顺序来存储其中的项，这可能和这些项放入字典时的顺序不一样。（和集合一样，字典使用哈希表——见专题8.1。）

为了在循环体中访问一个键对应的值，你可以使用循环变量和下标运算符。例如，这些语句同时输出你的联系人列表中的名字和电话号码：

![](../Images/image07123.gif)

格式如下：

![](../Images/image07124.gif)

键被访问的顺序取决于项的内部存储顺序。为了按序迭代这些键，可以在for循环中使用sorted函数：

![](../Images/image07125.gif)

现在联系人列表输出时会按名字排序：

![](../Images/image07126.gif)

你也可以使用values方法迭代字典项的值，而不是键。这在创建包含我们字典中所有电话号码的列表时很有用：

![](../Images/image07127.gif)

同样，你也可以把values方法的结果传递给list函数来创建同样的列表：

![](../Images/image07128.gif)

演示字典用法的一个简单例子就是名字和电话号码关联的电话号码数据库。在下面的示例程序中，findNames函数在字典中查找与给定号码关联的所有名字，printAll函数给出所有项按字母排序的清单。

ch08/sec02/telephone.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07129.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07130.jpeg)

程序运行结果

![](../Images/image07131.gif)

自测题

6.创建并初始化一个字典，把英语单词“one”到“five”映射到数字1到5。

7.编写循环输出自测题6中定义的字典的所有值。

8.如何修改telephone.py程序以222-3278这样的格式输出电话号码？

9.列表和字典的区别是什么？

10.假设你想跟踪一下每个单词在文档中出现了多少次，描述一下在这个任务中如何使用字典。

练习它　现在你可以尝试本章最后的练习：R8.13，P8.2。

表8-2列出了常用字典操作。

表8-2　常用字典操作

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07132.jpeg)

专题8.2　迭代字典项

Python允许你使用items方法迭代字典中的元素。这比先迭代键然后再查询每个键的值要高效一些。

Items方法返回一系列包含所有项键和值的元组。（更多关于元组的信息见专题6.4。）例如，

![](../Images/image07133.gif)

这里循环变量item会被赋值为一个元组，其中第一个位置上是键，第二个位置上是值。

另外，你还可以使用元组赋值：

![](../Images/image07134.gif)

专题8.3　保存数据记录

每条记录包含多个字段的数据记录是很常见的。在第7章，你学到了如何从不同文件格式的文本文件中提取数据记录。在一些场合下，记录的每个字段被保存到列表中来简化存储。但是这需要记住每个字段存储到了列表的哪个元素。如果在处理记录时使用了错误的列表元素，程序会发生运行时错误。

在Python中，使用字典存储一条数据记录是很常见的。为每条数据记录创建一项，其中键表示字段的名字，值表示那个字段的数据值。例如，名字为record的字典保存了单个学生记录，其中字段分别为ID、name、class和GPA：

![](../Images/image07135.gif)

为了从文件中提取记录，我们定义一个函数读取单条记录并返回一个字典。在这个例子中，要读取的文件包含由国家名字和人口数据组成的记录，二者使用冒号分隔：

![](../Images/image07136.gif)

返回的字典record包含两项，一个的键是"country"，另一个的键是"population"。这个函数的结果可以用来在终端输出所有记录。使用字典的话，你可以通过名字（而不是像列表那样通过位置）来访问数据字段：

![](../Images/image07137.gif)

编程实战8.2　翻译文本信息

问题描述　移动设备上的即时通信和短信导致出现了一些对较短信息比较有用的常见缩写。编写程序读取一行包含常见缩写的文本信息，使用保存在文件中的一些译本，把文本信息翻译成为英语。例如，如果用户输入文本信息：

![](../Images/image07138.gif)

程序应该输出：

![](../Images/image07139.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第1步　把任务分解为多个步骤。

这个任务可以分解为几个简单的步骤：

![](../Images/image07140.gif)

我们知道如何读取信息并使用split函数分解为多个部分。输出翻译结果也是很明显的。加载译本和翻译这些分解的部分会在下面的步骤中进行展开。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第2步　加载标准译本。

标准译本是保存在文本文件中的，每个缩写/译本对保存在单独一行中，二者之间使用冒号分隔：

![](../Images/image07141.gif)

为了读取文件项并构建字典，我们在transMap字典中为每个缩写增加一项。缩写是键，译本是值：

![](../Images/image07142.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第3步　翻译单个缩写。

我们把翻译单个缩写的任务分离为tranlateAbbr函数，因为这个处理稍微有点复杂。

如果缩写以标点符号（.?!，；：）结束，我们必须删除标点符号，翻译缩写，再加上标点符号。

如果缩写不知道如何翻译，就使用原始内容作为译本。

![](../Images/image07143.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第4步　把不同部分的翻译组合到一起。

从用户那里得到信息之后，将其切分为单词，然后每次翻译一个缩写，最后构建包含最终译本的字符串：

![](../Images/image07144.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第5步　把函数组合进单个程序。

下面的程序在单个文件中显示了main函数和所有辅助函数的实现：

ch08/worked_example_2/translate.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07145.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image07146.jpeg)

程序运行结果

![](../Images/image07147.gif)