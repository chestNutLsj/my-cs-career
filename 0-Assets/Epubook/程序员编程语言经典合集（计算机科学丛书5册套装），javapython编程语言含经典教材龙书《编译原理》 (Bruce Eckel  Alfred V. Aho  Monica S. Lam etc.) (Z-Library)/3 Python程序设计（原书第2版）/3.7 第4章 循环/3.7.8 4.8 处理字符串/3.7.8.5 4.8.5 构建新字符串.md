   

### 4.8.5　构建新字符串

在线购物时有点让人恼火的是很多网站要求输入不带空格或短划线的信用卡号，这使得检查号码很麻烦。从字符串中删除短划线或空格到底有多难呢？

就像在第2章所学的一样，字符串的内容是不能改变的。但是无法阻止我们创建一个新的字符串。例如，如果用户输入的字符串包含形式为”4123-5678-9012-3450”的信用卡号，我们可以通过创建一个新的只包含数字的字符串来删除这些短划线：一开始是个空字符串，然后依次把原始字符串中不是短划线的字符逐个追加到后面。在Python中，可以使用字符串连接运算符（+）把字符追加到一个字符串后面：

![](../Images/image06023.gif)

下面的循环用于创建一个包含信用卡号但删除了空格和短划线的字符串：

![](../Images/image06024.gif)

如果用户输入“4123-5678-9012-3450”，循环结束后creditCardNumber将包含字符串“4123567890123450”。

另一个例子，假设我们想创建一个新的字符串，把原字符串中所有大写字母都变成小写，而把原字符串中的所有小写字母都变成大写。使用上一个例子中字符串连接完全一样的技术，很容易实现：

![](../Images/image06025.gif)

下面的程序演示了本节中提到的字符串处理算法。该程序读取一个包含被测人员对一个多项选择考试的答案的字符串，然后划分等级。

ch04/sec08/multiplechoice.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06026.jpeg)

程序运行结果

![](../Images/image06027.gif)

自测题

35.如何查找字符串中第二个大写字母的位置？

36.如何打印字符串中包含的所有标点符号（.?!，；：’）和它们的位置？

37.对于4.8.4节中的代码，如果电话号码的格式要求在右括号的后面有一个空格，应该如何修改代码？

38.设计一个循环，检查一个字符串并验证其是否包含字符”x”和”o”交替出现的字符序列。

39.如何验证一个字符串是否包含一个合法的整数值？

练习它　现在你可以尝试本章最后的练习：P4.3，P4.10。