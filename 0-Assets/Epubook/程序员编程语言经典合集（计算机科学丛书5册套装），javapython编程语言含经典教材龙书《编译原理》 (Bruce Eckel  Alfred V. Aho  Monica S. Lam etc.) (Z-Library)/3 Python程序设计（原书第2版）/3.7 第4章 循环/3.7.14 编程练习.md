   

## 编程练习

■P4.1　使用循环编写程序计算

a.2和100（包括）之间所有偶数的和。

b.1和100（包括）之间所有平方数的和。

c.从20到220之间所有2的幂数。

d.a和b（包括）之间所有奇数的和，其中a和b由用户输入。

e.一个输入的所有位上的奇数的和。（例如，如果输入是32677，那么和应该是3+7+7=17。）

■■P4.2　编写程序读取一系列整数输入然后输出

a.这些输入的最小值和最大值。

b.输入中偶数和奇数的个数。

c.累加和。例如，如果输入是1 7 2 9，程序应该输出1 8 10 19。

d.所有相邻的重复值。例如，如果输入是1 3 3 4 5 5 6 6 6 2，程序应该输出3 5 6。

■■P4.3　编写程序读取一行输入作为字符串并输出

a.字符串中的大写字母。

b.字符串中每隔一个字母输出一个。

c.把元音字母替换为下划线的字符串。

d.字符串中数字的个数。

e.字符串中所有元音字母的位置。

■■P4.4　完成如何做4.1中的程序，完成后的程序应该读取12个温度值，然后输出最高温度的月份。

■■P4.5　编写程序读取一组浮点数。要求用户输入值，然后输出

·平均值。

·最小值。

·最大值。

·范围，即最小值和最大值之间的差。

■P4.6　把下面用于从一组输入中查找最小值的伪代码翻译成Python程序。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06109.jpeg)

■■■P4.7　把下面用于随机排列字符串中字符的伪代码翻译成Python程序。

![](../Images/image06110.gif)

为了交换字母，像下面这样构造子字符串：

![](../Images/image06111.gif)

然后使用下面的代码替换字符串

![](../Images/image06112.gif)

■P4.8　编写程序读取一个单词，然后输出单词中的每个字符，每行一个。例如，如果用户提供的输入为”Harry”，程序输出

![](../Images/image06113.gif)

■■P4.9　编写程序读取一个单词然后逆序输出。例如，如果用户提供的输入为“Harry”，程序输出

![](../Images/image06114.gif)

■P4.10　编写程序，读入一个单词，然后输出其中元音字母的数量。在这个练习中，假设aeiouy是元音字母。例如，如果用户输入"Harry"，程序输出2 vowels。

■■■P4.11　编写程序读取一个单词然后输出单词中元音字母的个数。对于这个练习，假设音节是这样划分的：每个相邻的元音字母a e i o u y的序列是一个音节，单词中最后一个字母e除外。然而如果算法给出的结果为0，就修改为1。例如，

![](../Images/image06115.gif)

■■■P4.12　编写程序读取一个单词然后输出所有的子字符串，按长度排序。例如，如果用户提供的输入为”rum”，程序输出

![](../Images/image06116.gif)

■■P4.13　编写程序读取一个整数值然后逆序输出它的所有二进制位：输出余数number%2，然后使用number//2替换number。重复这个步骤，直到number为0。例如，如果用户提供的输入为13，输出应该是

![](../Images/image06117.gif)

■■P4.14　平均值与标准差。编写程序读取一组浮点数，选择一个合适的机制来提示数据集的结束。读取所有数值之后，输出值的个数、平均值和标准差。数据集x1，…，xn的平均值为![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06118.jpeg)，其中![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06119.jpeg)是所有输入值的和。标准差为

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06120.jpeg)

然而，这个公式不适合这个任务。程序计算完平均值x之后，每个值xi就都丢失了。在知道如何保存这些值之前，可以使用数值稳定性稍差一点的公式

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06121.jpeg)

在处理输入时，通过记录个数、总和与平方和就可以得到标准差。

■■P4.15　Fibonacci数列由下面的序列定义

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06122.jpeg)

上面的序列可以形式化为

![](../Images/image06123.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06124.jpeg)

Fibonacci数列描述的是兔子 数量的增长情况。

然后，丢弃不再需要的fold2的值，把fold2设置为fold1的值而把fold1设置为fnew的值。重复合适的次数。

编写程序提示用户输入一个整数n，然后输出Fibonacci数列中第n项，使用上面的算法。

■■■P4.16　因数分解。编写程序要求用户输入一个整数，然后输出因数分解的结果。例如，如果用户输入150，程序应该输出

![](../Images/image06125.gif)

■■■P4.17　素数。编写程序提示用户输入一个整数，然后输出小于该数的所有素数。例如，如果用户输入20，程序应该输出

![](../Images/image06126.gif)

如果一个数除了1和它自身以外不能被任何其他数字整除，那么这个数是素数。

■P4.18　编写程序输出下面的乘法表：

![](../Images/image06127.gif)

■■P4.19　修改编程实战4.1中的examaverages.py程序使得可以计算整体平均考试成绩。

■■P4.20　修改编程实战4.1中的examaverages.py程序使得在提示用户是否输入下一个同学成绩时对输入进行验证。

■■P4.21　编写程序读取一个整数然后使用星号显示一个填充的正方形和一个空心的正方形，相邻放在一起。例如，如果边长为5，程序应该输出

![](../Images/image06128.gif)

■■P4.22　编写程序读取一个整数然后使用星号显示一个给定边长的填充菱形。例如，如果边长为4，程序应该显示

![](../Images/image06129.gif)

■■■P4.23　尼姆游戏。这是个著名的游戏，有很多变种玩法。下面的变种有一个有趣的获胜策略。两个玩家轮流从一堆中拿走弹子。在每一步中，玩家可以选择拿走多少弹子，但是必须至少拿走一个并且最多只能拿走一半弹子。然后轮到下一个玩家。拿走最后一个弹子的玩家输掉游戏。

编写程序实现人机对战。生成介于10到100之间的随机数表示堆的初始大小，生成一个0和1之间的随机数来决定计算机还是人先走第一步，生成一个0和1之间的随机数来决定计算机是聪明还是笨。在笨模式中，每次轮到计算机时，它只是简单地生成一个介于1和n/2之间的一个随机数并拿走那么多弹子。在聪明模式中，计算机拿走足够多的弹子使得堆的大小是2的幂次方减1，也就是3、7、15、31或63。除了堆的大小已经是2的幂次方减1，在其他情况下这样走都是符合游戏规则的。在那种情况下，计算机就按游戏规则随机拿走一些。

你会注意到，在聪明模式下，如果计算机先走就肯定会赢，除了堆的初始大小恰好为15、31或63。当然，人类玩家如果先走并且也知道这个技巧的话也是可以打败计算机的。

■■P4.24　醉汉走路。大街上有个醉汉随机选择一个方向然后跌跌撞撞走到下一个交叉路口，然后再随机选择一个方向走下去，重复上面的过程。你可能会想平均下来这个醉汉不会走太远，因为这些随机的选择可能会互相抵消，但是事实上并不是这样的。

使用整数对（x，y）表示位置，模拟醉汉从（0，0）开始连走100个交叉路口，输出结束时的位置。

■■P4.25　蒙蒂霍尔悖论。玛丽莲·沃斯·莎凡特在一个流行杂志上描述了这样一个问题（大致基于蒙蒂霍尔的一个有奖游戏节目）：“假设你正参加一个有奖游戏节目，并且有3道门可选：其中一个后面是汽车，另外两个后面是山羊。你选择一个门，比如说1号门，主持人知道每个门后面是什么并且打开了另一个门，比如说3号门，后面是一只山羊。然后主持人问你‘你想改选2号门吗？’切换的话对你会有利吗？”玛丽莲·沃斯·莎凡特证明切换是有利的，但是她的很多读者不这么认为，其中也包括一些数学教授。他们认为概率不会改变，因为开的是另一个门。

你的任务是模拟这个游戏节目。在每次迭代中，随机选择1到3之间的一个门用来放置汽车。让玩家随机选择一个门，让主持人在玩家选择的门之外随机选择一个后面有山羊的门。如果玩家切换至第三个门并且赢了的话就把策略1的计数器加1，如果玩家坚持原来的选择并且赢了的话就把策略2的计数器加1。运行1 000次循环然后输出两个计数器的值。

■■P4.26　布冯投针试验。下面的实验是法国博物学家乔治斯·路易斯·勒克莱尔·德·布冯伯爵（1707—1788）设计的。一根长度为1英寸的针往画了很多间距2英寸的直线的纸上投掷。如果针落在线上，称作一次命中（见图4-8）。布冯发现比值tries/hits接近圆周率π。

对于布冯投针试验，你必须生成两个随机数：一个用来描述起始位置，一个用来描述针与x轴的夹角。然后你需要测试针是否与某条直线有接触。

生成针的下面的点。如果x坐标是不相关的，你可以假设y坐标ylow是介于0和2之间的任意随机数。针与x轴的夹角可以是0度到180度（弧度值为π）之间的任意随机数。针的上端点的y坐标为

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06130.jpeg)

如果yhigh大于或等于2，称作一个命中，如图4-9所示。尝试10 000次，然后输出比值tries/hits。（这个程序并不适合计算π的值。你在角度的计算中需要用到π。）

![](../Images/image06131.gif)

图4-8　布冯投针试验

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06132.jpeg)

图4-9　布冯投针试验中的一次命中  

■P4.27　一个简单的随机数生成器可以通过下面的公式获得

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06133.jpeg)

然后设置rold的值为rnew。

编写程序要求用户为rold输入一个初始值，这个值一般称作种子。然后输出由上面的公式生成的前100个随机数，使用a=32310901，b=1729和m=224。

■■工具箱P4.28　模拟1 000次随机投掷骰子，显示一个直方图来说明得到1、2、3、4、5或6的次数。使用编程实战4.2中的技巧。

■■工具箱P4.29　生成1 000个1到999 999之间的随机整数，显示一个直方图说明每个数字第一位是1、2、3、4、5、6、7、8或9的次数。使用编程实战4.2中的技巧。

■■商业P4.30　外汇汇兑。编写程序首先要求用户输入今天一美元的日元价格，然后读入一些美元值，把每个转换成日元。使用0作为警戒值。

■■商业P4.31　编写程序首先要求用户输入今天一美元的日元价格，然后读取一些美元值并把每个值转换成日元。使用0作为警戒值表示美元输入的结束。然后程序读取一系列日元数量并转换成美元。第二个序列也使用0表示输入结束。

■■商业P4.32　你的公司有一些股份计划当超过特定的目标价格时就卖出去。编写程序读入目标价格，然后读入当前股票价格，直到当前股票价格大于等于目标价格。你的程序应该从标准输入设备读取一系列浮点数。一旦满足条件，程序应该报告股票价格超过了目标价格。

■■商业P4.33　编写应用程序预售一定数量的电影票。每个购买者最多可以买4张票，并且最多可以卖100张票。编写一个程序提示用户输入要买的票数，然后显示余票的数量。重复上面的过程直到售完，然后显示有多少购买者。

■■商业P4.34　你需要控制可以同时在牡蛎餐馆里的人数。里面的人随时可以离开，但是新来的一组如果进去之后会使得餐馆里的人数超过100就不能进去了。编写程序读取到达或离开的每组的人数，使用负数表示离开。输入每组之后，显示餐馆里现在的人数。一旦餐馆里人数达到上限，报告已满并退出程序。

■■■商业P4.35　信用卡号码检查。信用卡号码的最后一位是校验数字，用来防止抄写错误，例如抄错一位或者把两位抄错了顺序。下面的方法用来验证真实的信用卡号码，但是为了简单，我们使用8位数字来描述这个算法，而不是使用16位数字：

·从最右端的数字开始，每隔一位取一位数字并计算这些数字的和。例如，如果信用卡号是4358 9795，那么这个和为5+7+8+3=23。

·把信用卡号码中上一步没有包括的数字乘以2，把结果数字中的每位数字进行求和。例如，对于上面给出的信用卡号码，从倒数第二个开始，依次往左把数字乘以2，得到18 18 10 8。把这些值的每位数字求和，得到1+8+1+8+1+0+8=27。

·把上面两步得到的和相加。如果结果的最后一位数字是0，就表示这个号码是合法的。在上面的例子中，和是23+27=50，所以给出的信用卡号码是合法的。

编写程序实现这个算法。用户应该提供一个8位数字，然后程序输出号码是否合法。如果不是合法的，还应该输出能够使得号码合法的校验数字的值。

■■科学P4.36　在捕食模拟中，你要计算捕食者和被捕食者的数量，使用下面的公式：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06134.jpeg)

其中，A是被捕食者出生超过自然死亡时的比例，B是捕食率，C是捕食者由于没有食物而死亡超出出生的比例，D表示食物充足时捕食者的增加。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06135.jpeg)

编写程序提示用户输入这些比例，捕食者和被捕食者的初始数量，以及时间的长短。然后输出在给定时间之后捕食者与被捕食者的数量。尝试把A=0.1，B=C=0.01和D=0.000 2并且使用1 000和20分别作为被捕食者和捕食者的初始数量。

■■科学P4.37　炮弹飞行。假设一个炮弹以初始速v0被直射入空气中。任何微积分的书都会说在t秒之后炮弹的位置是![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06136.jpeg)，其中g=9.81m/s2是地球的重力常数。微积分的书都没有提到过为什么有人会做这样一个明显非常危险的实验，所以我们也在计算机的安全环境中来完成。实际上，我们通过模拟来证实这个来自于微积分的理论。在我们的模拟中，我们考虑炮弹在一个非常短的时间段Δt内如何移动。在很小的时间段内速度v几乎是恒定的，我们可以计算炮弹移动的距离为Δs=vΔt。在我们的程序中，我们简单地设置

![](../Images/image06137.gif)

并且通过

![](../Images/image06138.gif)

来更新位置。

速度的变化是恒定的——实际上，速度由于地球的引力作用而降低。在一个很短的时间段内，Δv=-gΔt，所以我们必须像下面这样保持速度更新

![](../Images/image06139.gif)

在下一次迭代中使用新的速度来更新距离。

现在运行这个模拟程序来模拟炮弹落回到地面之前的运动情况。通过输入来获取初始速度（100m/s就是一个不错的值）。每秒更新100次位置和速度，但是只在整秒时输出位置。为了比较，同时也输出使用公式![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06140.jpeg)得到的值。

注意：你可能会想，既然有精确的公式，这样的模拟还有什么意义呢。好吧，微积分书上的公式实际上是不精确的。实际上，随着炮弹远离地球表面，地球引力会变小。这使得计算非常复杂而不可能对于实际的运动给出一个精确的公式，但是计算机模拟可以使用一个可变的地球引力来简单地扩展。对于炮弹而言，微积分书上的公式已经足够好了，但是在计算弹道导弹这样更高空飞行物体的轨道时就有必要使用计算机了。

■■■科学P4.38　船体的模型可以简单地由下面的公式给出

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06141.jpeg)

其中，B是梁，L是长度，T是吃水。（注意：对于每个x和z有两个y，因为船体是左右对称的。）

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06142.jpeg)

x点处的横截面积在航海术语中称作“节”。为了计算横截面积，让z从0开始分n步变化到-T，每次幅度大小为T/n。对于每个z值，计算y的值。然后把这些梯形条带的面积求和。右边的图是n=4时的条带。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06143.jpeg)

编写程序读取B、L、T、x和n的值，然后输出x点处的横截面积。

■科学P4.39　放射性物质的放射衰减可以通过方程A=A0e-t（log 2/h）来建模，其中A是t时刻物质的量，A0是t0时刻的量，h是半衰期。

锝99是常用于大脑成像的放射性同位元素，它的半衰期为6小时。你的程序应该输出病人接受一次检查后24小时内每小时体内残留放射性元素的相对量A/A0。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06144.jpeg)

■■■科学P4.40　右图是一个叫作变压器的电气设备。变压器通常是由线圈包围的铁氧体磁芯构成的。下图描述了手机和音乐播放器等类似音频设备中的一种情况。在这个电路中，变压器用来把扬声器连接到音频放大器的输出上。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06145.jpeg)

用来表示变压器的符号一般倾向于使用两个线圈。变压器的参数n叫作变压器的匝数比。（线在磁芯上缠绕的次数称作一个线圈的匝数，匝数比是指两个线圈匝数的比值。）

在设计电路时，我们主要考虑输出到扬声器的功率大小——那个功率使得扬声器发出我们想听的声音。假设我们把扬声器直接连接到放大器的输出而不使用变压器，放大器的可用功率只有一部分会到达扬声器，而另外一些会在放大器中损失掉。在电路中增加变压器可以提高放大器功率中输出到扬声器部分的比例。

输出到扬声器的功率Ps使用下面的公式计算

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06146.jpeg)

编写程序模拟上面显示的电路，并在0.01到2之间以0.01为增幅来变化匝数比，然后确定能够让输出到扬声器的功率最大的匝数比的值。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06147.jpeg)

■■图形P4.41　编写图形应用程序显示黑白交替的64个格子的棋盘。

■图形P4.42　使用2.6节的技术，生成正弦波的图像，每5度绘制一个像素行直线。

■■图形P4.43　使用本书提供的ezgraphics模块绘制曲线图很简单也很有意思。简单地绘制在点（x，f（x））和（x+d，f（x+d））处连接的100个线段，其中x从xmin到xman变化并且d=（xman-xmin）/100。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06148.jpeg)

绘制曲线f（x）=0.0005x3-0.03x2+4x+200，其中x按上面描述的方式从0到400变化。

■■■图形P4.44　绘制“四瓣玫瑰”的图片，极坐标方程为r=cos（2θ）。让θ分100步从0变化到2π。每一步中先计算r，然后使用下面的公式从极坐标计算（x，y）坐标

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06149.jpeg)

对x和y坐标进行变换，使得曲线在窗口之内，选择合适的a和b：

x'=a·x+b

y'=a·y+b

■■■图形P4.45　编写图形应用程序绘制一个螺旋图案，如下所示：

![](../Images/image06150.gif)

■■图形P4.46　给一个图形的每个像素颜色的红色分量增加30%（最大到255），实现日落的效果。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06151.jpeg)

■■图形P4.47　给一个图像增加黑色的垂直条带，每两个相邻的条带之间间隔5个像素。为了显示这些直线，下面给出了图片放大后的一部分。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06152.jpeg)

■■图形P4.48　给一个图像增加黑色斜线条带，每两个相邻的条带之间间隔5个像素。为了显示这些直线，下面给出了图片放大后的一部分。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06153.jpeg)

■■图形P4.49　把一个图像顺时针旋转90度。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06154.jpeg)

■■图形P4.50　把一个图像复制4次。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06155.jpeg)

■■图形P4.51　把一个图像中的每个像素都复制4次，使得图像大小为原图像的两倍，带有块状像素。为了显示这些直线，下面给出了图片放大后的一部分。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06156.jpeg)

■■图形P4.52　把一个图像的每个像素都转换为灰度颜色，从而把整个图像转换为灰度图。由于人眼的色彩受体具有不同的敏感度，你不能简单地对红、绿、蓝这三种颜色分量求平均值，而是应该使用下面的公式计算灰度级

gray=0.2126×red+0.7152×green+0.0722×blue

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06157.jpeg)

■■图形P4.53　检测图像中的边缘信息，根据是否与东、南和东南方向的相邻像素有明显区别来把每个像素设置为黑色或者白色。计算3个相邻像素的红、绿、蓝色分量的平均值，然后计算

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06158.jpeg)

如果距离大于30，把像素设置为黑色，否则设置为白色。

注意，你可以不用构建新图像就可以更新像素的值，因为你只需要考虑还没有改变过的那些相邻像素。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06159.jpeg)

■■图形P4.54　重做练习P4.53，但是这次使用8个指南针方向的每个像素作为邻域。你需要创建一个新图像。

■■图形P4.55　给一个图像增加望远镜效果，把距离图像中心超过中心与最近边距离一半的所有像素都设置为黑色。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06160.jpeg)

■■图形P4.56　编写程序创建并保存一个由4个三角形组成的200×200像素的图像，如图所示：

![](../Images/image06161.gif)

■■图形P4.57　重做练习P4.56，给三角形组成的正方形绘制一个10像素宽的黑色边框。

自测题答案

1.23年。

2.8年。

3.增加一个语句

![](../Images/image06162.gif)

作为while循环的最后一条语句。

4.程序输出一样的结果。因为14年后的余额略小于$20 000，而15年后则略大于$20 000。

![](../Images/image06163.gif)

注意，即使128大于100，也会被输出。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06164.jpeg)

![](../Images/image06165.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06166.jpeg)

代码计算an。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06167.jpeg)

这是一个无限循环，n永远不会等于50。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06168.jpeg)

这会得到正确答案。数字123有3位数字。

![](../Images/image06169.gif)

这会得到错误答案。数字100有3位数字，循环条件应该为

![](../Images/image06170.gif)

![](../Images/image06171.gif)

12.第一个检查在读入警戒值后结束循环，第二个检查保证警戒值不会被当作输入值来处理。

13.永远不会进入while循环。用户永远不会被提示输入内容。因为count保持为0，程序会输出“No data was entered”。

14.float函数会引发异常。

15.Computing the average

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06172.jpeg)

16.Simple conversion

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06173.jpeg)

Unknown unit

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06174.jpeg)

Program doesn’t understand question syntax

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06175.jpeg)

17.One score is not enough

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06176.jpeg)

18.无法使用我们目前学习的Python特性来实现这个接口，程序无法知道用户在一行输入了多个值。

19.Comparing two interest rates

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06177.jpeg)

20.total为0。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06178.jpeg)

22.我们使用空字符串作为警戒值。在尝试把输入转换为整数之前必　须进行检查。

23.当输入中包含0或负数时，最小值会被错误地计算为0。

24.对int函数的初始调用会引发异常。一个解决方案是先检查第一个输入不是空的，然后再继续。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06179.jpeg)

26.11个数字：10 9 8 7 6 5 4 3 2 1 0

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06180.jpeg)

29.这里不能使用for循环，因为你不知道循环为了让余额翻倍需要多少次循环。

30.内循环中的所有值应该显示在同一行。

31.把第10、14和22行改成for n in range(NMAX+

1)，把NMAX改成5。

32.60：外循环执行10次，内循环执行6次。

![](../Images/image06181.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06182.jpeg)

37.在测试右括号的代码后面增加语句：

![](../Images/image06183.gif)

把短划线的位置改为9，把长度测试改为valid=len(string)==14。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06184.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06185.jpeg)

40.计算int(random()*2)，并且使用0表示正面，使用1表示背面，或者反过来。

41.计算randint(1，4)并把每个数字1……4对应4种花色，然后计算randint(1，13)并把数字1……13和Ace，2，……10，Jack，Queen和King对应起来。

42.我们需要为每个骰子调用一次。如果我们两次都是输出同样的值，掷骰子就不是互相独立的了。

43.该调用会生成一个介于2和12之间的值，但是所有值的概率是一样的。当投掷一对骰子时，出现数字7的次数可能是2的6倍。正确的公式是

![](../Images/image06186.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06187.jpeg)

![](../Images/image06188.gif)

47.你可以先写个程序输出给定字符串的所有子字符串。

48.你可以查找一个红色像素，或者一个9邻域的红色像素块。

49.下面是一个方案：

a.查找字符串中第一个数字的位置。

b.查找字符串给定位置之后的第一个非数字字符的位置。

c.使用前面的两步提取字符串中的第一个整数。

d.输出字符串中的所有整数。（使用前三步，然后对提取的整数后面的子字符串重复这些步骤。）