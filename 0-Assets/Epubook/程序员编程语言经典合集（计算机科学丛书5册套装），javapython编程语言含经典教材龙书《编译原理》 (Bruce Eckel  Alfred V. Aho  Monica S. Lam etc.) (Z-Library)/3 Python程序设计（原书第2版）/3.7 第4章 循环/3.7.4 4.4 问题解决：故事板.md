   

## 4.4　问题解决：故事板

当你设计一个与用户交互的程序时，你需要为那个交互做个计划。用户提供什么样的信息，以什么顺序？你的程序会显示什么样的信息，以什么格式？如果出现了错误应该发生什么？程序何时退出？

这个计划类似于电影或计算机游戏的开发，后者经常使用故事板来计划动作序列。故事板由若干显示每一步草图的面板组成。标注用来解释正在发生什么并提示任何特殊情况。故事板也可以用来开发软件——见图4-3。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05930.jpeg)

图4-3　开发一个Web应用的故事板

在开始设计程序时制作一个故事板是非常有帮助的。你需要问自己你需要什么信息才能计算出程序用户需要的答案。你需要决定如何展示那些答案。这些都是非常重要的考虑，需要在设计计算答案的算法之前解决。

让我们看一个简单的例子。我们想编写一个程序来帮助用户回答类似于“一品脱有多少汤匙？”或者“30厘米有多少英寸？”这样的问题。

用户提供什么信息？

·源数量和单位

·目标单位

如果有多于一个的数量该怎么办？用户可能有大量的厘米值需要转换成英寸。

如果程序不知道如何处理用户输入的单位，例如ångström，该怎么办？

如果用户想要执行不可能的转换，例如从英寸到加仑，该怎么办？

让我们从一个故事板面板开始，使用不同的颜色来书写用户输入是个不错的主意。（如果手边没有彩笔的话，可以在下面画上下划线。）

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05931.jpeg)

这个故事板显示了我们如何处理一个潜在的困惑。如果一个用户想知道多少英寸是30厘米，但是没有仔细阅读第一个提示，并且指定了英寸。然后得到的输出是“30 in=76.2cm”，警告用户这个问题。

故事板也会引发问题。用户如何才能知道cm和in是合法的单位呢？可以使用centimeter和inch吗？如果用户输入了错误单位会发生什么呢？让我们制作另一个故事板来演示错误处理。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05932.jpeg)

为了减少挫败感，最好能够列出用户可以提供的单位。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05933.jpeg)

我们使用了短一些的提示以便可以显示所有的单位名称。练习R4.21显示了一个可以替代的方法。

还有个问题没有解决。用户如何退出程序？第一个故事板暗示这个程序会一直运行。

我们可以在用户看到结束输入的警戒值之后进行询问。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05934.jpeg)

正如你从这个案例中看到的一样，故事板对于开发一个可用的程序是必要的。为了构建你的程序，你需要知道用户交互的流程。

自测题

15.为了读取一系列测试成绩并计算平均成绩的程序设计一个故事板。该程序仅需要处理一组成绩，并且不用考虑错误处理。

16.谷歌有一个进行单位转换的简单接口。你只需要输入问题，然后就可以得到答案。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05935.jpeg)

为能够提供等价接口的Python程序制作故事板。显示一个一切都可以正常工作的场景，并且显示两种错误的处理。

17.把自测题15中的程序修改一下。假设我们想在计算平均分之前丢弃最低分。提供一个故事板用来演示用户只输入了一个成绩的场景。

18.使用Python实现下面故事板有什么问题？

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05936.jpeg)

19.生成一个程序的故事板，该程序用来比较10 000美元的投资在一定年限内两种利率下的增长。

练习它　现在你可以尝试本章最后的练习：R4.20，R4.21，R4.22。