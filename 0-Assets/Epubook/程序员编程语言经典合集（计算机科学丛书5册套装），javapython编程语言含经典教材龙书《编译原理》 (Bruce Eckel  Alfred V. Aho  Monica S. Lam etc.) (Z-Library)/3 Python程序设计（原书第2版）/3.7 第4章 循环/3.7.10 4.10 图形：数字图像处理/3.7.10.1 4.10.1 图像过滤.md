   

### 4.10.1　图像过滤

数字图像是由行列网格状的像素组成的。你一般看不到单个的像素，但是它们是确实存在的。计算机屏幕上的一幅图像看上去是光滑的或者连续的，是因为屏幕上使用了非常小的点来重现这些单个的像素。

这些像素存储了可见频谱中的颜色数据。有很多表示颜色的方式，但是最常用的是使用离散RGB颜色模型，在这个模型中使用红、绿、蓝三个分量来指定一个颜色，每个分量的值介于0（没有光）和255（最大数量）之间。

图像过滤会得到一个新图像，其中每个像素的颜色各分量值以某种方式被修改。例如，你可以让一个明亮的图像变暗，创建一个图像的负像，或者把一个图像转换到灰度级。

表4-4给出了把几种常见滤波器作用于RGB值之后的近似结果。

表4-4　样本RGB值

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06051.jpeg)

为了处理图像，首先应该把它加载到你的程序中。在ezgraphics模块中，图像是存储在GraphicsImage类的一个实例中的。表4-5列出了这个类的方法。你可以像下面这样加载一个图像：

![](../Images/image06052.gif)

为了显示图像，你可以绘制到一个GraphicsWindow对象的画布上：

![](../Images/image06053.gif)

然而，在显示图像之前，我们想进行过滤或变换。让我们从一些简单的任务开始——把图像替换为负像，也就是老式的胶片照相机拍出来的那种图像（见图4-6）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06054.jpeg)

图4-6　一个图像和它的负像

为了过滤一个图像，你必须获取每个像素颜色值的红、绿、蓝分量值。这些像素是以一个大小为width×height的二维网格的形式进行组织的。

行和列都是从0开始顺序编号的，像素（0，0）位于左上角。行号从0到height-1，列号从0到width-1。

为了得到单个像素的3个分量值，你可以使用getRed、getGreen和getBlue方法。下面的代码用来获取第0行第4列像素的颜色：

![](../Images/image06055.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06056.jpeg)

为了创建一个图像的负像，使用下面的公式调整RGB分量的值：

![](../Images/image06057.gif)

调整完之后，使用新颜色替换像素的值：

![](../Images/image06058.gif)

为了整理整个图像，使用嵌套循环来迭代每个像素：

![](../Images/image06059.gif)

创建了原始图像的负像之后，可以调用下面的代码保存结果。

![](../Images/image06060.gif)

下面是处理一个图像文件并得到原图的负像的完整源代码。

ch04/sec10/filterimage.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06061.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06062.jpeg)