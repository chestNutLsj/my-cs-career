   

## 4.11　问题解决：先解决一个简单些的问题

随着编程学习的深入，要求完成的任务的复杂性也会增加。面对复杂任务时，你应该应用一个非常重要的技巧：把问题简单化，先解决简单一些的任务。

这是一个很好的策略，原因如下：通常你会从解决简单任务的过程中学到一些有用的东西；更重要的是，复杂任务可能看起来是不可克服的，你很难发现应该从哪里开始。当你成功解决简单问题之后，再尝试解决更难的问题时会更加有信心。

把一个问题分解为一系列简单问题需要练习和一定的勇气。掌握这个策略的最好方法就是多练习。在接到下一个任务时，分析一下对最终结果有帮助的任务中最简单的那部分是什么，然后就从那里开始。有了一定的经验之后，你就可以设计一个能够把完整的解决方案组织为一系列中间步骤的方案。

让我们看一个例子。要求组织图片，沿上边对齐，每个图片之间留一个小的空隙，如果当前行满了就另起一行。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06071.jpeg)

下面是一个解决一系列简单问题的方案，而不是上来就想解决整个问题。

1.绘制一个图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06072.jpeg)

2.绘制两个相邻的图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06073.jpeg)

3.绘制中间有个空隙的两个图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06074.jpeg)

4.绘制中间有空隙的3个图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06075.jpeg)

5.在一个长的行中绘制所有图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06076.jpeg)

6.在一行内绘制图片，直到没有空间了，然后在下一行中绘制其他图片。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06077.jpeg)

让我们从这个方案开始。

1.GraphicsImage类是ezgraphics模块的一部分，在4.10节中已经用到过了，这个类可以用来加载图片。本问题的图片文件分别命名为picture1.gif、picture2.gif……picture20.gif。首先加载第一个图片：

![](../Images/image06078.gif)

为了显示这个图片，首先获取GraphicsWindows对象的画布：

![](../Images/image06079.gif)

为了绘制图形，指定画布的坐标来说明图形的左上角将被绘制到什么位置。这里，我们想把第一个图片绘制在画布的左上角，然后等待用户关闭窗口。

![](../Images/image06080.gif)

上面的代码足以显示一个图片了。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06081.jpeg)

2.现在我们在第一个图片后面继续绘制下一个。绘制第二个图片时需要把它的最左侧的边定位到前面的图片的最右侧的边。这可以通过获取第一个图片的宽度值来确定，然后把这个值作为第二个图片的x坐标。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06082.jpeg)

3.下一步是把这两个图片分开一点点：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06083.jpeg)

4.为了绘制第三个图片，只知道前一个图片的宽度是不够的。我们还需要知道前一个图片绘制时的x坐标，然后再加上前一个图片的宽度和图像之间的空隙。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06084.jpeg)

5.现在我们把所有图片都放在一行，在循环内加载图片，把每个图片放到前一个图片的右边。在每次迭代中，你需要跟踪两个图片：正在加载的图片以及它的前一个（见4.5.5节）。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06085.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06086.jpeg)

6.当然，我们不想把所有图片都放在一行。一个图片的右边界不应该超出MAX_WIDTH。

![](../Images/image06087.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06088.jpeg)

如果图像放不下了，我们就要把它放到下一行，也就是在当前行的所有图片下面。我们设置变量maxY为已放置的所有图片的y坐标的最大值，每次放置新图片时都更新这个变量：

![](../Images/image06089.gif)

下面的代码用来把图片放到下一行：

![](../Images/image06090.gif)

这样，我们可以完成构建画廊程序的最后一个基本任务：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06091.jpeg)

![](../Images/image06092.gif)

现在我们已经写出了所有基本任务的完整程序。我们知道如何把图片排成行，如何在中间插入空隙，如何确定何时换行，以及从哪里开始。

有了这些知识之后，给出最终版本的程序就是水到渠成的了，下面是完整的程序。

ch04/sec11/gallery.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06093.jpeg)

自测题

47.编写一个DNA分析的程序，检查一个字符串是否包含在另一个字符串中，不允许使用Python的in运算符。你可以首先解决什么样的简单问题？

48.你想消除图像中的“红眼”而且正在查找红色的圆。你可以从什么更简单的问题开始？

49.考虑在字符串中查找数字的任务。例如，字符串”In 1987，a typical personal computer cost$3000 and had 512 kilobytes of RAM”有3个数字。把这个任务分解为一系列更简单的任务。

练习它　现在你可以尝试本章最后的练习：R4.32，R4.33。

计算与社会4.2　数字盗版

你读到这里的时候，应该已经写过几个计算机程序了，也切身体会了哪怕一个很小的程序也要付出多少努力。编写一个实际的软件产品，例如财务软件或者计算机游戏，需要大量的时间和金钱。没有什么人和公司会花费那种时间和金钱，如果他们没有合适的机会从劳动中赚取更多的钱。（实际上，一些公司免费赠送他们的软件，并期望用户会点击上面的广告或者升级为完整的付费版本。还有些公司赠送他们的软件来读取和使用文件，但销售可以创建这些文件的软件。最后，也有些人因为热情而贡献自己的时间并给出可以自由复制的软件。）

在销售软件时，公司必须依赖于客户的诚信。没有节操的人很容易制作计算机程序的副本而不支付费用。在大多数国家这是非法的。大多数政府提供了法律保护，例如版权法和专利权，来激励新产品的开发。容忍盗版广泛传播的国家已经发现，虽然他们拥有足够多而且便宜的外来软件可以使用，但是没有本土厂商愿意为自己的民众设计好的产品，例如本土语言的字处理软件或者适合当地税法的财务软件。

当软件市场需求量大了以后，生产商被因为盗版而损失的钱激怒了。他们试图通过多种方式进行反击以确保只有合法用户才能使用他们的软件。加密狗是一种必须在软件启动之前插入到打印机端口的设备。然而，合法用户非常痛恨这些措施。他们花钱买了软件，但是还要被各种不方便折磨，例如要有多个加密狗从他们的计算机里伸出来。

盗版软件又简单成本又低，并且被发现的概率很小，你不得不做出一个道德层面的选择。如果一个你非常想要的包对于你的预算来说非常贵，你会偷取它，还是坚持诚信买一个支付得起的产品？

当然，盗版也不仅仅是软件才有，其他电子产品也具有同样的问题。你可能已经有过不用支付就可以获得歌曲或电影副本的机会。或者你可能已经经历过已付费的歌曲因为音乐播放器上的复制保护设备而无法播放的痛苦。公认地，很难给那些音乐团体太多的同情，毕竟他们的出版商收费太多，而看上去他们的付出并不值那么多，最起码和设计并实现一个软件包相比是这样的。然而，好像艺术家和作者为他们的付出得到一些补偿是公平合理的。

如何合理地支付艺术家、作家和程序员的劳动成果而不增加诚信消费者的负担，这在本书编写时还是一个尚未解决的问题，很多计算机科学家正在致力于这方面的研究。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06094.jpeg)