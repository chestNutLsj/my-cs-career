   

### 5.2.3　包含函数的程序

编写包含一个或多个函数的程序时，你需要注意函数定义和调用语句的顺序。

再看一下上一节中的程序，它包含了

·cubeVolume函数的定义。

·几个语句，其中两个调用了那个函数。

读取源代码时，Python解释器依次读取每个函数定义和每个语句。函数定义中的语句在函数被调用之前不会执行。另一方面，函数定义之外的语句在遇到时会立刻执行。所以，在调用之前定义每个函数是非常重要的。例如，下面的程序会产生一个运行时错误：

![](../Images/image06202.gif)

编译器不知道cubeVolume函数会在后面定义。

然而，一个函数可以在定义之前在另一个函数中调用。例如，下面的程序是完全合法的：

![](../Images/image06203.gif)

注意，cubeVolume函数在main函数中调用了，尽管cubeVolume函数是在main函数之后定义的。为了搞清楚为什么可以这样，考虑一下执行流。函数main和cubeVolume的定义先被处理，最后一行的语句不在任何一个函数之内。所以，它被立刻执行，并且调用main函数，main函数的函数体执行并调用函数cubeVolume，而这时cubeVolume函数是已知的了。

语法5.2　带函数的程序

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06204.jpeg)

在Python中定义和使用函数时，把所有语句都放在函数中并且指定一个函数作为入口点，这是一个非常好的编程习惯。在前面的例子中，main函数是执行流开始的位置。任何合法的名字对于入口点都是可以的，但是我们还是选择使用main，因为在其他一些常用语言中是这样要求的。

当然，我们必须在程序中包含一条调用main函数的语句。那个语句就是程序的最后一行，main()。

下面给出了包含注释的完整程序。注意，两个函数是在同一个文件中定义的，并且用来描述cubeVolume函数行为的注释也在同一个文件中。（编程小提示5.1会介绍注释的格式。）

ch05/sec02/cubes.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06205.jpeg)

程序运行结果

![](../Images/image06206.gif)

自测题

5.cubeVolume(3)的值是什么？

6.cubeVolume(cubeVolume(2))的值是什么？

7.改写cubeVolume函数体，不使用幂运算符。

8.定义函数squareArea计算给定边长的正方形面积。

9.考虑下面的函数：

![](../Images/image06207.gif)

调用mystery(2，3)的结果是什么？

练习它　现在你可以尝试本章最后的练习：R5.2，R5.3，P5.5，P5.22。

编程小提示5.1　函数注释

在编写函数时，你应该总是对它的行为进行注释。注释是为人类阅读者准备的，而不是给编译器准备的。不同的人倾向于不同布局的函数注释。在本书中，我们使用下面的布局：

函数注释解释函数的目的、形参变量和返回值的含义，以及任何特殊要求。  

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06208.jpeg)

![](../Images/image06209.gif)

这种特殊的文档风格是从Java语言借鉴来的，得到了大量文档工具的支持，例如Doxygen（[www.doxygen.org](http://www.doxygen.org)）就可以从Python源码中提取HTML格式的文档。

函数注释的每一行在第一列以井号（#）开始。使用两个井号开始的第一行描述函数的目的。每个@param子句描述一个形参变量，@return子句描述返回值。

有一种替代的描述Python函数目的的文档形式，但是我们认为在一定程度上描述性差一些。增加一个“文档字符串”作为函数体的第一条语句，就像这样：

![](../Images/image06210.gif)

我们不使用这种形式，但是很多Python程序员这样做。

注意，函数注释并不解释函数的实现（函数如何完成要做的任务），也不解释函数的设计（函数做什么，输入，输出）。这样的注释使得其他程序员可以像黑盒子一样使用这个函数。