   

## 编程练习

■P5.1　编写下面的函数并提供一个程序来测试它们。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06397.jpeg)

■■P5.2　编写下面的函数并提供一个程序来测试它们。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06398.jpeg)

■■P5.3　编写下面的函数并提供一个程序来测试它们。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06399.jpeg)

例如，firstDigit(1729)是1，lastDigit(1729)是9，digits(1729)是4。

■P5.4　编写函数

![](../Images/image06400.gif)

如果string的长度为奇数就返回string中间位置上的字符，如果长度为偶数就返回中间位置上的两个字符。例如，middle("middle")返回"dd"。

■P5.5　编写函数

![](../Images/image06401.gif)

返回string重复n次的字符串，并且使用字符串delim分割。例如，repeat("ho"，3，"，")返回"ho，ho，ho"。

■■P5.6　编写函数

![](../Images/image06402.gif)

返回字符串string中元音字母的个数。元音字母是a、e、i、o和u以及它们的大写形式。

■■P5.7　编写函数

![](../Images/image06403.gif)

返回字符串string中单词的个数。单词使用空格进行分隔。例如，countWords("Mary had a little lamb")应该返回5。

■■P5.8　有个众所周知的现象，大多数人很容易阅读包含有两个字符翻转了的单词的文本，假设每个单词的第一个和最后一个字母不变。例如，

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06404.jpeg)

编写函数scramble(word)构造给定单词的乱序版本，随机翻转除第一个和最后一个字符之外的两个字符。然后编写程序读取单词并输出乱序单词。

■P5.9　编写函数

![](../Images/image06405.gif)

计算半径为r的球体、底面半径为r且高为h的柱面以及底面半径为r且高为h的圆锥的体积和表面积。然后编写程序提示用户输入r和h的值，调用6个函数并输出结果。

■■P5.10　编写函数

![](../Images/image06406.gif)

显示提示字符串，后面一个空格，读取并返回一个浮点数，下面是典型的用法：

![](../Images/image06407.gif)

■■P5.11　增强intName函数的功能使得在值<；1 000 000 000时能够正常工作。

■■P5.12　增强intName函数的功能使得对负数和0也能正常工作。注意：确保改进后的函数不会把20输出为"twenty zero"。

■■■P5.13　对于某些值（例如20），intName函数会返回一个带前导空格的字符串（"twenty"）。修复这个缺陷，确保只在必要的时候插入空格。提示：有两种方法可以实现这一点。或者保证永远不插入前导空格，或者在返回结果前删除前导空格。

■■■P5.14　编写函数getTimeName(hours，minutes)返回某个时刻的英语名字，例如"ten minutes past two"、"half past three"、"a quarter to four"或"five o’clock"。假设hours的值介于1和12之间。

■■P5.15　编写递归函数

![](../Images/image06408.gif)

把一个字符串逆序。例如，reverse("flow")应该返回"wolf"。提示：翻转第二个字符开始的子串，然后把第一个字符连接到尾部。例如，为了翻转"flow"，首先把"low"翻转为"wol"，然后把"f"连接到尾部。

■■P5.16　编写递归函数

![](../Images/image06409.gif)

如果string是回文就返回True，也就是说，一个单词翻转之后和原来一样。“deed”、“rotor”或者“aibohphobia”都是回文的例子。提示：如果一个单词的第一个和最后一个字母是一样的，并且剩余的部分还是回文，那么这个单词是回文。

■■P5.17　使用递归实现函数find(string，match)，它测试match是否包含在string之中：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06410.jpeg)

提示：如果一个字符串以match开头，任务完成。如果不是，考虑通过删除第一个字符之后得到的字符串。

■P5.18　使用递归思想确定一个整数n的位数。提示：如果n小于10那么只有一位，否则就比n//10多一位。

■P5.19　使用递归计算an，其中n是正整数。提示：如果n是1，那么an=a。如果n是偶数，那么an=a(an/2)2。否则，an=a×an-1。

■■P5.20　闰年。编写函数

![](../Images/image06411.gif)

测试一个年份是否为闰年：也就是具有366天的年份。练习P3.27描述了如何测试一个年份是闰年。在这个练习中，使用多个if语句和return语句，知道答案之后就立刻返回结果。

■■P5.21　在练习P3.28中，你被要求编写程序把一个数字转换成罗马数字形式。当时你不知道如何消除重复代码，导致最终的程序非常冗长。重写那个程序，实现并使用下面的函数：

![](../Images/image06412.gif)

使用由one、five和ten指定的字符串转换一位数字，然后使用下面的形式调用这个函数：

![](../Images/image06413.gif)

■■商业P5.22　给定初始余额和利率，编写函数计算给定年数之后银行账号余额。假设利率是每年复合的。

■■商业P5.23　编写程序打印薪水支票。要求用户输入雇员的名字、每小时的工资和已工作的小时数。如果小时数超过40，那么超过40的部分需要支付给雇员1.5倍的时薪。你的支票应该看起来类似于下图。付款人和银行都使用虚拟名字。记住使用逐步提炼的方法把解决方案分解为几个函数。使用intName函数打印支票上的美元数量。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06414.jpeg)

■■商业P5.24　编写程序打印制作咖啡的指令，并在需要做选择的时候提示用户进行输入。把每个任务分解为函数，例如：

![](../Images/image06415.gif)

■■商业P5.25　邮政条形码。为了更快对信件进行排序，美国邮政服务鼓励发送大型邮件的公司使用条形码表示邮政编码（见图5-10）。

图5-11显示了5位邮政编码的编码方案。每一侧有全高度的框架条，中间是5位数字和一个校验位的编码，其中校验位计算方法为：把所有位相加，然后选择一个校验位使得这个和是10的倍数。例如，邮政编码95014的和是19，所以选择校验位为1使得和等于20。

邮政编码的每一位和校验位按下表进行编码，其中0表示半高度的条，1表示全高度的条：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06416.jpeg)

每一位很容易通过权重列7、4、2、1、0来计算。例如，01100是0×7+1×4+1×2+0×1+0×0=6。唯一的例外是0，如果根据权重公式计算的话会得到11。

编写程序要求用户输入邮政编码然后输出条形码。使用：表示半高度条，使用|表示全高度条。例如，95014变成

![](../Images/image06417.gif)

提供这些函数：

![](../Images/image06418.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06419.jpeg)

图5-10　邮政条形码

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06420.jpeg)

图5-11　5位邮政条形码的编码

■■■商业P5.26　编写程序读取一个条形码（使用：表示半高度条和|表示全高度条）然后输出它表示的邮政编码。如果条形码不正确就输出错误信息。

■■商业P5.27　编写程序把类似于MCMLXXVIII的罗马数字转换为十进制表示形式。提示：首先编写一个返回每个字母对应数字的函数，然后使用下面的算法：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06421.jpeg)

■■商业P5.28　有个民间组织需要一个程序计算贫困家庭的援助金额。计算公式为：

·如果家庭年收入介于30 000美元到40 000美元之间，并且有至少3个孩子，援助金额为每个孩子1000美元。

·如果家庭年收入介于20 000美元到30 000美元之间，并且至少有2个孩子，援助金额为每个孩子1500美元。

·如果家庭年收入少于20 000美元，援助金额为每个孩子2000。

编写函数实现上述的计算。编写程序询问申请人的家庭年收入和孩子的数量，输出函数返回的金额。使用-1作为输入的警戒值。

■■■商业P5.29　在社交网站中，一个用户有朋友，朋友们又有其他朋友，以此类推。我们想知道，从一个人出发然后按照给定数量的朋友关系能够到达多少人。这个数量称作分离度：1表示朋友，2表示朋友的朋友，等等。因为我们没有真实的社交网络数据，所以使用每个用户的朋友数量的平均数。

编写递归函数

![](../Images/image06422.gif)

在程序中提示用户输入期望的分离度和朋友数量平均数，调用上面的函数，然后输出可到达的人数。这个数字应该包括初始用户。

■■商业P5.30　当我们的大量信息都在线存储时，拥有安全密码就变得非常重要了。编写程序对一个新密码进行验证，使用下面的规则：

·密码必须至少包含8个字符。

·密码必须包含至少一个大写字母和一个小写字母。

·密码必须包含至少一位数字。

编写程序，要求用户输入一个密码，然后要求再次输入以便确认。如果两次密码不一致或不符合上面的规则，就再次提示。你的程序应该包含一个用来检查密码是否有效的函数。

■■■商业P5.31　你正在为显示介于0和100之间温度值的控制面板设计一个元件。元件的颜色应该从蓝色（温度为0时）到红色（温度为100时）连续变化。编写函数colorForValue(temperature)计算给定温度对应的颜色值。颜色被编码为红/绿/蓝值，每个分量介于0和255之间。这3个颜色使用下面的公式转换为单个整数

![](../Images/image06423.gif)

每个中间颜色都应该完全饱和，也就是说，应该在颜色立方体的外侧从蓝色出发然后沿着青色、绿色和黄色的路径到达红色。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06424.jpeg)

你需要知道如何进行插值。一般地，如果在输入x从a到b变化时，输出y应该从c到d变化，那么y可以如下计算：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06425.jpeg)

如果温度介于0和25度之间，应该在蓝色和青色之间进行插值，它们的（红，绿，蓝）分量值分别是(0，0，255)和(0，255，255)。对于25到50之间的温度值，应该在(0，255，255)和(0，255，0)之间进行插值，后者表示绿色。对于剩余的两段路径进行同样的处理。

你应该为每个颜色单独进行插值，然后把插值得到的颜色组合为单个整数。

确保使用合适的辅助函数来解决你的任务。

■■科学P5.32　在电影院中，观察者观看屏幕上图像的角度θ依赖于观察者到屏幕的距离x。如果某电影院的尺寸如下图所示，编写函数计算给定距离的角度。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06426.jpeg)

接下来，提供一个适用于任意尺寸电影院的更加通用的函数。

■■科学P5.33　半径为R1和R2且厚度为d的透镜有效焦距f由以下公式给出

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06427.jpeg)

其中n表示透镜介质的折射率。编写函数计算其他参数确定时的f。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06428.jpeg)

■■科学P5.34　实验室容器的形状为圆锥体的平截体：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06429.jpeg)

编写函数，使用下面的公式计算体积和表面积：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06430.jpeg)

■■科学P5.35　电线是一个绝缘介质包围的圆柱形导体。一段电线的电阻由下面的公式给出

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06431.jpeg)

其中ρ表示导体的电阻，L、A和d分别为电线的长度、截面积和直径。铜的电阻是1.678×10-8Ωm。电线直径d通常由美国线规（AWG）指定，是个整数n。AWG指定为n的电线直径d由下面的公式给出

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06432.jpeg)

编写函数

![](../Images/image06433.gif)

接收线规并返回对应的电线直径。编写另一个函数

![](../Images/image06434.gif)

接收一段铜线的长度和线规并返回电线的电阻。铝的电阻是2.82×10-8Ωm。编写第三个函数

![](../Images/image06435.gif)

接收一段铝线的长度和线规并返回电线的电阻。

编写程序测试这些函数。

■■科学P5.36　汽车的曳力由下面的公式给出

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06436.jpeg)

其中ρ表示空气密码（1.23kg/m3），v是以m/s为单位的速度，A是汽车的投影面积（2.5m2），CD是阻力系数（0.2）。

克服这样的曳力需要的力的大小（以瓦为单位）为P=FDv，等价的马力为Hp=P/746。编写程序接收汽车速度为参数，计算克服相应曳力需要的力（分别以瓦和马力为单位）。注意：1mph=0.447m/s.

■■■图形P5.37　为图像处理工具包增加一个函数，用来给一幅图像增加指定颜色的边界。更新processimg.py程序以测试你的函数。

■■■图形P5.38　为图像处理工具包增加一个函数，用来把一幅图像缩小为原来的一半，每隔一个像素丢弃一个。更新processimg.py程序以测试你的函数。

■■■图形P5.39　为图像处理工具包增加一个函数，用来把一幅图像放大两倍，每个像素都水平复制和垂直复制。更新processimg.py程序以测试你的函数。

■■■图形P5.40　为图像处理工具包增加一个函数，用来把一幅图像复制两份并水平相邻摆放，再增加一个函数用来把一幅图像复制两份并上下摆放。更新processimg.py程序以测试你的函数。

■■■图形P5.41　为图像处理工具包增加一个函数，用来把一幅图像修改为灰度图像，按照练习P4.52中的方法。

自测题答案

1.参数是3.14159和2。返回值是3.14。

![](../Images/image06437.gif)

3.3.0

4.函数的用户可以把函数当作黑盒子。

5.27

6.8×8×8=512

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06438.jpeg)

9.(2+3)/(3-2)=5

10.当mystery函数被调用时，x被设置为5，y被设置为7，z变成12.0。然后z被修改为6.0，这个值被返回和打印。

11.当mystery函数被调用时，x被设置为5。然后y被设置为25，这个被返回和打印。

12.当mystery函数被调用时，n被设置为5。然后n自增两次，被设置为7。这个值被返回和打印。

13.它的行为是同样的：如果sideLength为0，立刻返回0，而不是计算0×0×0。

14.如果n是偶数就返回True，如果n是奇数就返回False。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06439.jpeg)

17.函数boxString不返回有效值。所以，你不应该在print函数的调用中使用它。（函数有效输出之后会再输出一个特殊值None。）

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06440.jpeg)

其中函数被定义为

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06441.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06442.jpeg)

其中函数定义如下：

![](../Images/image06443.gif)

22.增加形参变量以便能够给函数传递初始余额和利率：

![](../Images/image06444.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06445.jpeg)

其中函数定义如下：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06446.jpeg)

24.很容易把空格替换为任意字符。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06447.jpeg)

如果你想统计其他字符出现频率，这是很有用的。例如，count(input，"，")可以统计输入中的逗号。

25.把第18行改为

![](../Images/image06448.gif)

在第16行中，增加语句

![](../Images/image06449.gif)

在第10行中，把注释中的1000改为10 000。

26.对于十位数，我们已经有了作为名字一部分的最后一位。

27.没有任何输出。处理这种情况的一种方式是在第14行之前增加下面的语句。

![](../Images/image06450.gif)

28.下面是大概的跟踪过程：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06451.jpeg)

注意字符串以空白字符开始。练习P5.13要求你删除它。

29.下面是一个可能的解决方案。把打印表格的任务分解打印表头和打印表体。打印表头的任务调用打印分隔符，打印表头单元格，然后再调用打印分隔符。打印表体的任务重复调用打印行然后调用打印分隔符。

30.第10～12行。

31.第8～13行。

32.变量x在第4行和第8行定义。

33.第1行。

34.main函数访问mystery函数中的局部变量。假设main函数试图在函数返回之前打印s的最终值，它应该简单地打印保存在局部变量x中的返回值。

35.修改函数头，要求提供3个不同的百分比，每个颜色分量一个：

![](../Images/image06452.gif)

使用下面的语句替换第56、61和66行：

![](../Images/image06453.gif)

36.要加边框的图像，边框的尺寸，以及边框颜色的3个分量。

![](../Images/image06454.gif)

37.

![](../Images/image06455.gif)

38.4+3+2+1+0=10

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06456.jpeg)

40.方案是打印一个[]，然后再打印剩余的n-1个。

![](../Images/image06457.gif)

41.在函数开始位置增加下面的代码：

![](../Images/image06458.gif)