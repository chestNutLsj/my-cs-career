   

### 6.7.5　在函数中使用表格

给函数传递表格时，你会想获得表格的维度。如果values是一个表格，那么

·len(values)是行的数量。

·len(values[0])是列的数量。

例如，下面的函数计算表格中所有元素的和：

![](../Images/image06665.gif)

下面的程序演示了如何处理表格，输出奖牌数量和行的总和。

ch06/sec07/medals.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06666.jpeg)

程序运行结果

![](../Images/image06667.gif)

![](../Images/image06668.gif)

自测题

36.下面创建表格的代码有什么错误？

![](../Images/image06669.gif)

37.下面创建表格的代码有什么错误？

![](../Images/image06670.gif)

38.在我们的样例数据中，如果你对列求和，会得到什么结果？

39.考虑一个棋盘游戏的8×8表格。使用两个嵌套循环，初始化棋盘使得0和1交替出现，就像西洋跳棋盘那样：

![](../Images/image06671.gif)

提示：检查i+j是否为偶数。

40.创建一个表示三连棋游戏的表格，上面有包含字符串"x"、"o"和""的3行3列字符串。

41.编写赋值语句在自测题40中的三连棋表格右上角放置一个"x"。

42.在自测题40中的三连棋表格中连接左上角和右下角的对角线元素是哪些？

练习它　现在你可以尝试本章最后的练习：R6.28，P6.21，P6.22。

编程实战6.3　世界人口表格

问题描述　考虑下面的人口数据。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06672.jpeg)

要求以表格形式输出这些数据，并增加显示给定年份世界人口总数的列总和。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第1步　首先，我们把任务分解为多个步骤：

·Initialize the table data.

·Print the table.

·Compute and print the column totals.

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第2步　把表格初始化为一系列行：

![](../Images/image06673.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第3步　为了输出表头，我们还需要一个包含洲名字的列表。注意它和我们的表格有相同数量的行。

![](../Images/image06674.gif)

为了输出一行，我们首先输出洲的名字，然后是所有列数据。这可以使用两个嵌套循环实现。外层循环输出每一行：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06675.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第4行　为了输出每列的和，我们使用6.7.4节描述的算法，对每列执行一次计算。  

![](../Images/image06676.gif)

下面是完整的程序：

ch06/worked_example_3/population.py

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06677.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06678.jpeg)

程序运行结果

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06679.jpeg)

专题6.8　行长度可变的表格

本节中使用的表格包含相同长度的行。然而，可能会需要创建行长度变化的表格。例如，你可以创建一个三角形的表格，例如：

![](../Images/image06680.gif)

为了创建这样一个表格，你必须在循环内使用列表复制（见图6-14）。

![](../Images/image06681.gif)

你可以像b[i][j]这样访问每个列表元素。表达式b[i]选择第i行，[j]运算符选择那一行中的第j列。

注意，行的数量是len(b)，第i行的长度是len(b[i])。例如，下面的循环输出一个不整齐的表格：

![](../Images/image06682.gif)

如果你不需要行和列的索引值，你可以直接遍历行和元素：

![](../Images/image06683.gif)

很自然，这样的不整齐表格并不是很常用。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06684.jpeg)

图6-14　一个三角形表格

编程实战6.4　图形：绘制正多边形

正多边形是指所有边长都一样并且所有内角都相等且小于180度的多边形。你可能知道指定大小的正多边形的名字：等边三角形、正方形、五边形、六边形、七边形、八边形。

![](../Images/image06685.gif)

问题描述　开发一个图形程序，在窗口中心绘制正多边形，边的数量由用户指定。你的程序应该允许用户重复绘制，直到他们希望退出。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第1步　理解绘图任务。

问题分解为两个独立的任务。首先，绘制给定顶点列表的任意多边形是有用的。从每一个顶点到下一个顶点绘制直线，然后再从最后一个顶点到第一个顶点绘制直线来闭合多边形。

为了在画布上绘制给定边数量的正多边形，你必须决定如何计算多边形的顶点。正多边形可以内接于一个圆使得每个顶点都位于圆周上。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06686.jpeg)

如果多边形的中心，同时也是圆的中心，在坐标原点，那么顶点的x坐标和y坐标可以使用极坐标来计算。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06687.jpeg)

我们从定义x轴上的第一个顶点（α=0）开始，然后通过把角度增加分隔连续顶点的数量（Δ）来计算每个连续的点。下面的图演示了多边形前3个点的计算过程，其中Δ表示360度除以边的数量的。注意这些公式计算的坐标值是浮点数，在用来绘制多边形之前必须四舍五入为整数。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06688.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第2步　进行逐步提炼。

我们在解决这个问题时会使用逐步提炼的过程。从更高层面回顾这个问题，只涉及几个步骤。

![](../Images/image06689.gif)

我们可以把获取边的数量、构建多边形、绘制多边形的任务分解为函数getNumber Sides、buildRegularPolygon和drawPolygon。那么解决这个问题的main函数为：

![](../Images/image06690.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06691.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第3步　要求用户输入边的数量。

提示用户输入多边形边的数量时，我们可以同时询问用户是否想退出。下面给出了这个函数的代码。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06692.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第4步　构建和绘制正多边形。

首先考虑绘制任意多边形的任务，如下所示。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06693.jpeg)

多边形由一系列点指定。每个点有x坐标和y坐标，我们将其表示为长度为2的列表。

为了绘制一个多边形，调用者必须构建这种形式的顶点列表并传递给drawPolygon函数：

![](../Images/image06694.gif)

那个函数的代码绘制n-1个线段，把每个顶点与其后面的点连接。然后再绘制另一条线，连接最后一个点和第一个点。

![](../Images/image06695.gif)

![](../Images/image06696.gif)

现在让我们看一下构建正多边形的函数。我们让用户指定限定正方形的左上角位置和预期的半径。

使用第1步中的方程计算出来的顶点假设多边形中心位于坐标原点。为了绘制左上角位于(x，y)的限定正方形内的多边形，顶点必须使用下面的公式进行偏移。

![](../Images/image06697.gif)

现在，可以计算顶点并保存到列表中。

下面给出了这个任务的函数。注意，在计算每个坐标时，都必须使用round函数将它转换为整数。另外，三角函数要求使用弧度为单位来指定角度。我们使用radians函数完成从角度到弧度的转换。与sin和cos一样，该函数是在math模块中定义的。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06698.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image05174.jpeg)第5步　把所有函数放进单个Python源文件中。

完整程序见源码中的ch06/worked_example_4/drawpoly.py。