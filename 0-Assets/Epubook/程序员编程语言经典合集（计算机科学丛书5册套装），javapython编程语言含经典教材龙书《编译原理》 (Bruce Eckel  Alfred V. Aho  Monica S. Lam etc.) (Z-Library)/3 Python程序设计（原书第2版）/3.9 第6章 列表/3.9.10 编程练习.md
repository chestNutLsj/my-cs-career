   

## 编程练习

■■P6.1　编写程序，使用10个随机数初始化一个列表，然后输出4行，包含

·偶数索引的每个元素。

·每个偶数元素。

·逆序的所有元素。

·只输出第一个和最后一个元素。

■P6.2　编写程序，读取数字，如果不在列表中就增加到列表中。当列表中包含10个数字时，程序显示内容并退出。

■■P6.3　编写程序把从2到10 000之间的所有数字都增加到列表中，然后删除2的倍数（不包括2），3的倍数（不包括3），以此类推，直到100的倍数。输出剩余的值。

■■P6.4　编写列表函数对于整数列表执行下面的任务。对于每个函数，提供一个测试程序。

a.交换列表中第一个和最后一个元素。

b.所有元素向右移动一个位置，把最后一个元素移动到第一个位置。例如，1 4 9 16 25应该被变为25 1 4 9 16。

c.把所有偶数元素替换为0。

d.把除第一个和最后一个元素之外的其他元素替换为两个邻居中较大值。

e.如果列表长度为奇数就删除中间位置的元素，如果长度为偶数就删除中间的两个元素。

f.把所有偶数元素移动到前面，其他元素保持原有的顺序。

g.返回列表中倒数第二个最大的元素。

h.如果列表已按升序排列就返回True。

i.如果列表包含两个相邻的重复元素就返回True。

j.如果列表包含重复元素（不需要相邻）就返回True。

■P6.5　修改6.3节的largest.py程序，同时标记最小和最大的元素。

■■P6.6　编写程序sumWithoutSmallest，使用单个循环计算列表中除最小元素之外其他所有值的和。在这个循环中，更新总和与最小值。循环结束之后，从总和中减去最小值并返回差值。

■P6.7　编写函数removeMin，删除列表中的最小值，不使用min函数和remove方法。

■■P6.8　计算列表中所有元素的交替和。例如，如果你的程序读取输入

![](../Images/image06711.gif)

那么计算

![](../Images/image06712.gif)

■P6.9　编写函数，翻转列表中的一系列元素。例如，如果你使用下面的列表调用函数：

![](../Images/image06713.gif)

列表被改为

![](../Images/image06714.gif)

■P6.10　编写函数，实现6.6节中开发的算法。

■■P6.11　编写函数def equals(a，b)，检查两个列表是否按相同顺序包含相同的元素。

■■P6.12　编写函数def sameSet(a，b)，检查两个列表是否以某种顺序包含同样的元素，忽略重复的元素。例如，两个列表

![](../Images/image06715.gif)

和

![](../Images/image06716.gif)

会被认为是相等的。你可能会需要使用一个或多个辅助函数。

■■■P6.13　编写函数def sameElements(a，b)，检查是否两个列表以某种顺序包含同样的元素，并且具有同样的重复度。例如，

![](../Images/image06717.gif)

和

![](../Images/image06718.gif)

会被认为是相等的，但是

![](../Images/image06719.gif)

和

![](../Images/image06720.gif)

就不会。你可能会需要一个或多个辅助函数。

■■P6.14　修改编程实战6.2中的程序，在决定骰子是否均匀时使用随机生成的数字表示骰子的值，而不是从用户读入。

■■P6.15　一个run表示一系列相邻的重复值。编写程序，生成列表中一系列20个随机骰子值，然后输出骰子的值，把其中的run使用圆括号进行标记，就像：

![](../Images/image06721.gif)

使用下面的伪代码：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06722.jpeg)

■■P6.16　编写程序，生成列表中一系列20个随机数表示骰子的值，然后输出骰子的值，标记最长的run，就像：

![](../Images/image06723.gif)

如果有多于一个最长长度的run，标记第一个。

■■P6.17　编写程序，生成列表中一系列介于0和99之间的随机数，输出这个序列，对其进行排序，输出排序后的序列。使用列表的sort方法。

■■■P6.18　编写程序，生成从1到10的数字的10个随机枚举。为了生成随机枚举，你需要使用从1到10的数字填充列表使得列表中没有两个元素拥有相同的内容。你可以使用暴力测试来完成，生成随机数，直到得到列表中没有的一个值。但是那样做效率很低。相反，使用下面的算法。

![](../Images/image06724.gif)

■■P6.19　研究表明男人在休息室里倾向于占用最长未占用位置序列的中间位置，让自己和已占用座位之间的距离最大化。

例如，假设有10个座位是空的。

![](../Images/image06725.gif)

第一个访客会占用中间位置：

![](../Images/image06726.gif)

下一个访客会占用左侧空区域的中间位置。

![](../Images/image06727.gif)

编写程序读取座位的数量，然后在座位被占用时使用上面给出的格式输出我们的图，一次一个。

提示：使用布尔列表表示座位是否被占用。

■■■P6.20　在这个任务中，你会对保加利亚纸牌游戏进行建模。这个游戏从45个卡片开始。（不必须是扑克牌，没标记的索引卡一样可以用。）随机把这些卡片分成随机大小的几堆。例如，你可能会分成大小为20、5、1、9和10这么几堆。在每一轮中，从每一堆中拿走一个卡片，使用这些卡片组成新的一堆。例如，上面例子中堆的大小会变成19、4、8、9和5。当这些堆的大小变成1、2、3、4、5、6、7、8和9（不关心顺序）时，纸牌游戏结束。（可以显示，你总是会以这样的配置结束。）

在你的程序中，产生一个初始配置并输出它。然后不停地应用纸牌游戏步骤并输出结果，达到纸牌游戏的最终配置时结束。

■■■P6.21　魔方矩阵。如果一个n×n的矩阵使用数字1、2、3……n2填充，并且每行、每列以及两个对角线元素的和都相等，就称作魔方矩阵。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06728.jpeg)

编写程序，从键盘上读取16个值，测试它们放进一个4×4的表格中时是否构成魔方矩阵。你需要测试两个方面：

1.数字1、2……16是否都在用户输入中出现了？

2.这些数字放进正方形时，是否所有行、列以及对角线元素的和彼此相等？

■■■P6.22　实现下面的算法构成n×n的魔方矩阵，其中n是奇数。图中展示了使用下面的算法生成的5×5魔方矩阵：

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06729.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06730.jpeg)

编写程序，输入为数字n，并且在n是奇数时输出n阶魔方矩阵。

■■P6.23　编写函数def neighborAverage(values，row，coumn)，计算表格元素在图6-13中8个方向上邻居的平均值。然而，如果元素位于表格的边界上，只计算表格中的邻居。例如，如果row和column都是0，只有3个邻居。

■■P6.24　编写程序，读取一系列输入值，使用星号显示这些值的柱状图，效果如下：

![](../Images/image06731.gif)

你可以假设所有的值都是正数。首先找出最大值，那个值的柱应该使用40个星号绘制，短的柱按比例使用较少的星号。

■■■P6.25　改进练习P6.24的程序，使得当数据集中包含负数也能正确工作。

■■P6.26　改进练习P6.24的程序，为每个柱增加标题。提示用户输入标题和数据值，输出看上去如下所示：

![](../Images/image06732.gif)

■■P6.27　电影院的座位图使用票价的表格来实现，就像

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06733.jpeg)

编写程序，提示用户选择一个座位或价格。通过把对应价格修改为0来标记售出的座位。当用户指定一个座位时，确保座位可用。当用户指定价格时，查找该价格的任意座位。

■■■P6.28　编写程序玩三连棋。三连棋游戏在右图所示的3×3网格中玩。游戏由2个玩家轮流玩。第一个玩家使用圆圈标记，第二个玩家使用叉号。如果玩家让自己的3个符号组成水平线、垂直线或对角线，就算赢。你的程序应该绘制游戏棋盘，要求用户输入下一个符号的坐标，每次成功走一步后换玩家，宣判赢家。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06734.jpeg)

■P6.29　编写函数def appendList(a，b)，把一个列表追加到另一个列表后面。例如，如果a是

![](../Images/image06735.gif)

且b是

![](../Images/image06736.gif)

那么append返回一个包含下面值的新列表：

![](../Images/image06737.gif)

■■P6.30　编写函数def merge(a，b)，合并两个列表，其中元素交替来自于两个列表。如果其中一个列表比另一个短，那么把短的处理完，然后追加长列表中的剩余元素。例如，如果a是

![](../Images/image06738.gif)

且b是

![](../Images/image06739.gif)

那么merge函数返回包含如下值的新列表：

![](../Images/image06740.gif)

■■P6.31　编写函数def mergeSorted(a，b)，合并两个排序的列表，得到一个新的排序的列表。为每个列表保存一个索引，表示其中已经处理了多少元素。每一次把两个列表中尚未处理的元素中最小的那个追加到新列表中，然后向前移动索引。例如，如果a是

![](../Images/image06741.gif)

且b是

![](../Images/image06742.gif)

那么mergeSorted函数返回包含如下值的新列表：

![](../Images/image06743.gif)

■■商业P6.32　有个宠物店想给客户优惠，如果客户购买了一个或多个宠物和至少其他5个商品。优惠是其他商品的百分之20，宠物不优惠。实现一个函数

![](../Images/image06744.gif)

函数接收一个特定交易的信息。对于第i个商品，prices[i]是优惠前的价格，如果那个商品是宠物则isPet[i]为True。

编写程序，提示收银员输入每个价格，然后输入表示宠物的Y或者另一个商品的N。使用价格-1作为警戒值。把输入保存到一个列表中。调用你实现的函数，显示最终的优惠。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06745.jpeg)

■■商业P6.33　一个超市想回馈每天的最佳客户，在超市屏幕上显示这个客户的名字。为了实现那个目的，把所有客户的购买金额保存到列表中，把所有客户的名字保存到一个对应的列表中。实现一个函数

![](../Images/image06746.gif)

返回交易金额最大的客户的名字。

编写程序，提示收银员输入所有的价格和名字，分别存储到两个列表中，调用你实现的函数，显示结果。使用价格0作为警戒值。

■■商业P6.34　改进练习P6.33中的程序，显示交易额最大的客户，也就是说，具有最大交易额的前topN个客户，其中topN由程序用户提供。实现一个函数

![](../Images/image06747.gif)

如果客户数量少于topN，返回所有客户。

■■■科学P6.35　给定一个表格，其中包含给定正方形内不同点的地形高度。编写一个函数

![](../Images/image06748.gif)

输出一个洪水地图，显示如果给定水位值的话地形中的哪个点会有洪水。在这个洪水地图中，在每个洪水点输出一个*，在每个非洪水点输出一个空格。

下面是一个样例地图：

![](../Images/image06749.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06750.jpeg)

然后编写程序，读取一百个地形高度值，显示这个地形在水位从最低点到最高点分十步变化时的洪水情况。

■■科学P6.36　实验中得到的采样值通常需要平滑化。一个简单的方法是把每个值替换为其两个相邻值的平均值（或者，如果该值位于列表两端时就取一个相邻值）。实现函数

![](../Images/image06751.gif)

执行这个操作。在解决方案中不应该创建另一个列表。

■■科学P6.37　修改ch06/exercises/animation.py程序显示正弦波动画。在第i帧中，把正弦波移动5×i度。

■■■科学P6.38　编写程序，对连接到震荡弹簧上面质量为m的物体的运动情况进行建模。当弹簧偏离平衡位置x时，胡克定律认为回复力为：

F=-kx

其中，k是依赖于弹簧的系数。（使用10N/m完成这个模拟。）

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06752.jpeg)

从给定偏移x（比如0.5米）开始。设置初始速度v为0。根据牛顿定律（F=ma）和胡克定律计算加速度α，使用1kg的质量，和小的时间间隔Δt=0.04秒。更新速度——以αΔt进行改变，更新偏移量——以vΔt进行改变。

每10次迭代绘制弹簧偏移量为一个柱，其中1个像素表示1厘米。使用2.6节中的技术创建图像。

![](../Images/image06753.gif)

■工具箱P6.39　写入一个声音文件，包含采用频率为44 100且在30 000和-30 000之间交替出现的44 100个数据点。你会得到什么声音？使用15 000和-15 000替换并重做一遍，有什么区别？如果把采样频率翻倍会发生什么？采样频率减半呢？

■■工具箱P6.40　编写程序，读取一个声音文件并“淡入”声音。把前一半值乘以从0到1逐步增加的系数。

■■工具箱P6.41　重做练习P6.40，但是在尾部淡出声音。

■工具箱P6.42　编写程序，读取两个声音文件并把它们混到一起。对声音值计算平均值。你的程序应该在两个输入长度不同时也能工作。你可以假设两个声音文件具有相同的采样频率。

■■工具箱P6.43　使得练习P6.42中的程序在两个输入具有不同采样频率时也能工作，在输出文件中使用两个频率中最高的一个。

■■工具箱P6.44　编写程序，读取一个声音文件并产生回声。对于每个数据值，增加0.2秒前的数值的百分之80。完成后，缩放结果使得没有值超过32 787。

■工具箱P6.45　编写程序，读取一个声音文件，翻转所有的值，保存结果。使用一段语音或歌曲试一下。

■■■工具箱P6.46　使用工具箱6.1中描述的Audacity程序，录制自己说1、2、3……9、10、12、12、13、20、30……50的音频文件。然后编写程序，要求用户提供一个类似于9∶53的时间，然后生成一个能够读出那个时间的文件。在这个例子中，你会把9、50和3的声音放到一起。

■■工具箱P6.47　编写程序，读取一个立体声文件，然后通过分离左右声道转换成单声道文件。在读入数据和转换成列表时，你会得到一个列表的列表，其中每个列表包含左右声道的数据值。提示：为了理解这个格式，使用交互模式（见编程小提示1.1）加载立体声文件，如同工具箱6.1描述的那样。显示数据列表，观察其中长度为2的列表元素。

■■工具箱P6.48　编写程序，读取一个立体声文件，翻转左右声道。使用一个噪音物体从左到右移动的文件测试这个程序。

■■工具箱P6.49　编写程序，读取一个立体声文件并生成一个单声道文件，其中每个采样值变为(left-right)/2。使用歌曲文件测试这个程序。如果文件中左右声道录制的歌手的声音相等，结果中包含器乐而删除声乐！

自测题答案

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06754.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06755.jpeg)

![](../Images/image06756.gif)

6.不能。因为你没有存储这些值，你需要在读取时输出它们。但是你不知道在哪里加入<；=，直到看完所有的值。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06757.jpeg)

9.不。例如，如果a=[1，1]并且b=[1，1，1]，它们就不相等。然而，如果a和b具有相同的长度那么它们一定是相等的。

10.第一个列表是[2，2，2]，第二个是列表[3，3]。

11.使用空列表连接：

![](../Images/image06758.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06759.jpeg)

15.如果values中的所有元素都是负数，那么结果被错误地计算为0。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06760.jpeg)

现在你知道我们为什么使用其他方式设置循环了。

17.如果列表中没有元素，那么程序以异常结束。

18.你逆序访问元素时，删除匹配项时没有特殊情况。例如：

![](../Images/image06761.gif)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06762.jpeg)

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06763.jpeg)

21.函数返回一个列表，其长度由第一个参数给出。列表使用介于0和n之间的随机整数进行填充。

22.scores中的内容没有改变，reverse函数返回一个包含逆序后数字的新列表。

23.

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06764.jpeg)

24.使用min和index：

![](../Images/image06765.gif)

如同上一节的例子，发现最小值的算法可以修改为返回其位置。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06766.jpeg)

26.使用统计匹配项的算法（6.3.6节）两次，一次用来统计正数，一次用来统计负数。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06767.jpeg)

注意你不能再使用i>；0作为输出分隔符的标准。

28.使用这个算法收集列表中的所有正数元素，然后使用6.3.3节中的算法输出匹配项的列表。

29.表示i的回形针假定在位置0、1、2、3，当i增加到4时，条件i<；length/2不成立，循环结束。类似地，表示j的回形针位置为4、5、6、7，也就是列表中后一半的有效位置。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06768.jpeg)

30.对列表中的元素进行逆序。

31.这是一个解决方案。基本思想是把所有奇数元素移动到尾部。把一个回形针放在列表的头部，一个回形针放在列表的尾部。如果第一个回形针的元素是奇数，把它和另一个回形针位置的元素交换，并向左移动那个回形针。否则，向右移动第一个回形针。当两个回形针相遇时结束算法。

下面是伪代码：

![](../Images/image06769.gif)

32.这是一个解决方案。想法是删除所有奇数元素并把它们移动到尾部。其中的技巧是知道什么时候停止。把奇数元素移动到包含已移动元素的区域不会有什么收获，所以我们使用另一个回形针标记这个区域。

![](../Images/image06770.gif)

33.读取输入时，每次可以看到一个值，不能提前看。每次从桌子上的卡片中拿一个卡片，比看一系列逆序摆放的物品的模拟效果更好一些。

34.交换时，我们执行n/2次交换，每次移动3个值，一共执行3n/2次移动。如果我们使用切片，我们首先需要复制每个值进入切片（n次移动），然后从切片中移动每个值到连接列表（另外n次移动，一共需要2n次移动）。

35.切片可以通过移动一系列硬币来模拟。（那并不是一个非常好的模拟，因为切片复制这个序列，不影响原来的序列。）你可以通过移动前一半到新的位置，然后后面一半放在它的后面。

36.它创建一个包含ROWS*COLUMNS个0的列表，而不是列表的列表。

37.table中的所有元素是同一行的引用。例如，如果你设置table[0][0]为1，那么table[1][0]、table[2][0]等都会被设置为1。

38.你得到竞赛中金牌、银牌和铜牌的总数。在我们的例子中，每个都是4。

![](0-Assets/Epubook/程序员编程语言经典合集（计算机科学丛书5册套装），javapython编程语言含经典教材龙书《编译原理》%20(Bruce%20Eckel%20%20Alfred%20V.%20Aho%20%20Monica%20S.%20Lam%20etc.)%20(Z-Library)/images/image06771.jpeg)