## 单周期 CPU 设计
### 要实现的指令集
选取 RISC-V 指令中9条典型指令组成的子集：
- 访存指令：lw、sw
- 算术运算指令：add、sub、andi、auipc
- 转移指令：beq、jal、jalr

*其他指令的实现原理可以从中体现——上面 9 条指令覆盖了所有的 RISC-V 指令集的不同类型指令*

解决三个主要问题
- 数据通路设计
- 控制信号设计
- 执行时序设计

### 元件细节
![[23-Singlecycle-Single-cycle-cpu-datapath.png]]

寄存器组 RF：
![[23-CPU-design-register-files.png]]

### 时序设计
- 每条指令占用一个（整）时钟周期
	- 取指令后分析指令，并给出整个执行期间的全部信号 
	- 不需要状态信息，在时钟的结束的边沿写入结果
- 控制对象
	- ALU 的运算
	- 寄存器组和存储器的写入
	- 多路选通器
- 时钟周期开始时读取指令
	- 与具体指令无关，只要 PC+4 正确运行，找到下一条合法指令即可；

### 各指令具体的控制细节
#### 时钟周期开始时
![[23-CPU-design-start.png]]
- 根据 PC 的值找到 IM 中对应的指令——取指阶段
- PC<-PC+4，自动地找到下一条指令的地址；

#### S 型指令

#### I 型指令

#### 