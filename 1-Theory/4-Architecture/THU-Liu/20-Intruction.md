- 第一讲指令系统概述，指令格式，寻址方式
- 第二讲 RISC-V 指令功能及实现
- 第三讲指令格式，数据通路
- 第四讲单周期 CPU 设计
- 第五讲多周期 CPU 设计
- 第六讲指令流水基本概念
- 第七讲流水中的结构冲突、数据冲突
- 第八讲控制冲突、中断的解决方案

## CISC vs. RISC

早期的趋势：为了能够做复杂的操作，增加越来越多的指令 -- CISC
- 导致学习和理解上的困难
- 导致硬件复杂（可能会变慢）

改变设计思路：Reduced Instruction Set Computing (RISC)
- 使用更简单，更小的指令集，会更加容易获得快速的硬件 (pipeline)
- 如果需要做复杂操作的话，让软件来做，组合几条简单的指令来完成工作 (易于设计)

## 指令与指令系统
### 指令和指令系统的概念

计算机系统由硬件和软件两大部分组成。
- 硬件指由中央处理器、存储器以及外围设备等组成的实际装置。
- 软件是为了使用计算机而编写的各种系统的和用户的程序，**程序由一个序列的计算机指令组成**。
- 指令是计算机运行的最小的功能单元，是指挥计算机硬件运行的命令，是由多个二进制位组成的位串，是计算机硬件可以直接识别和执行的一个信息体。
- 一台计算机提供的全部指令构成该计算机的指令系统。==指令用于程序设计人员告知计算机执行一个最基本运算、处理功能，多条指令可以组成一个程序，完成一项预期的任务==。

![[20-Intruction-ISA.png]]
- 可以从 6 个层次分析和看待计算机系统的基本组成。
	- 高级语言层：Application, Algorithm, Programming Language
	- 汇编语言层：Assembly Language
	- 机器码层： Machine Code
	- 指令系统层：Instruction Set Architechture
	- 微体系结构层：Micro Architechture, Gates/Registers
	- 硬件设备层：Devices, Physics
- 指令系统层处在硬件系统和软件系统之间，是硬、软件之间的接口部分，对两部分都有重要影响。
- 硬件系统用于实现每条指令的功能，解决指令之间的衔接关系；
- 软件由按一定规则组织起来的许多条指令组成，完成一定的数据运算或者事务处理功能。
- 指令系统优劣是一个计算机系统是否成功的关键因素。

### 指令系统设计要求

- 完备性: 指令功能齐全、编程方便
- 规整性: 指令格式简单、统一
- 高效性: 占内存少，运行高效
- 兼容性 n 同一系列软件兼容

指令是用户使用计算机和计算机本身运行的最小的功能单元：①指令是由多个二进制位组成的数串, ② 用于设计程序, ③计算机硬件可直接识别和执行。通 常情况下一台计算机需要提供哪些指令呢？

计算机用于计算和处理数据，为此，要在计算机硬件系统中设置 5 种类型的部件：
- 运算器部件、
- 控制器部件、
- 存储器部件、
- 输入设备、
- 输出设备，

各自承担数据运算、系统指挥控制、保存当前程序和数据、执行输入和执行输出的功能。因此，需要在计算机中设置为使用和控制这几个部件运行的相应指令。

- 运算器相关指令：
	- ADD, SUB, AND, OR, MVRR, SHR, RCL
- 控制器相关指令：
	- JUMP, JRC, CALL, RET
- 存储器相关指令：
	- STORE, LOAD, PUSH, POP, 
- 输入输出相关指令：
	- IN, OUT

### 指令功能和分类

算术与逻辑运算指令 n 加、减、乘、除、变符号等算术运算 n 与、或、非、异或等逻辑运算 p 移位操作指令 n 算术移位（一般只右移）、逻辑移位、循环移位 p 数据传送指令 n 通用寄存器之间传送 n 通用寄存器与主存储器存储单元之间传送 n 主存储器不同存储单元之间传送 p 输入输出指令 n 通用寄存器与输入输出设备（接口）之间传送

转移指令 n 变动程序中指令执行次序的指令，分为无条件转移指令和 条件转移指令 p子程序调用与返回指令 n 调用指令与返回指令二者要配合使用，子程序的最后一条 指令一定是返回指令，执行结束后返回主程序断点 p堆栈操作指令 n 堆栈（stack）是由若干个连续存储单元组成的先进后出 的存储区，有压入（即进栈）和弹出（即退栈）操作 p其他指令 n 置条件码指令、开中断指令、关中断指令 n 停机指令、空操作指令、特权指令

### 指令格式

#### 变长指令字/定长指令字

#### 操作码扩展

### 寻址方式